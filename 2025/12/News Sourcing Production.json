{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "Search": {
      "main": [
        [
          {
            "node": "Split Out1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get All Sources",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out1": {
      "main": [
        [
          {
            "node": "Scrape a url and get its content4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "is content empty?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Linkedin profile scraper": {
      "main": [
        [
          {
            "node": "linkedin fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Instagram profile scraper": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "Get All Sources",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get All Sources": {
      "main": [
        [
          {
            "node": "Get Active Sources",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Match Sources": {
      "main": [
        [
          {
            "node": "Limit5",
            "type": "main",
            "index": 0
          },
          {
            "node": "Limit8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Limit7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Scrape a url and get its content",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS Read": {
      "main": [
        [
          {
            "node": "Get 5 Ideas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Active Sources": {
      "main": [
        [
          {
            "node": "If High Priority",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get All Results": {
      "main": [
        [
          {
            "node": "Remove Duplicates",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Remove Duplicates": {
      "main": [
        [
          {
            "node": "If From Form",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If High Priority": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Randomise",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Randomise": {
      "main": [
        [
          {
            "node": "Get 10 Ideas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Match Input Format": {
      "main": [
        [
          {
            "node": "Classification agent with Batch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Evaluation": {
      "main": [
        [
          {
            "node": "Set Output In Evaluation Google Sheet",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "select fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run Evaluation": {
      "main": [
        [
          {
            "node": "Get All Sources1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Publication Date": {
      "main": [
        [
          {
            "node": "Add Content With Date1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Add Content Without Date1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze an image": {
      "main": [
        [
          {
            "node": "image field",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze video": {
      "main": [
        [
          {
            "node": "video fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Analyze an image",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Analyze video",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get 10 Ideas": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Get 5 Ideas": {
      "main": [
        [
          {
            "node": "Scrape a url and get its content2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF text longer than 2000 chars": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Filter Articles By Topic",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Splits text in small chuncks": {
      "main": [
        [
          {
            "node": "IF2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF2": {
      "main": [
        [
          {
            "node": "If Publication Date2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Add Content To Post",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Filter Articles By Topic1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Publication Date2": {
      "main": [
        [
          {
            "node": "Add Content With Date",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Add Content Without Date",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "Filter out empty content2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "image field": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "video fields": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Analyze an image1": {
      "main": [
        [
          {
            "node": "sidecar fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Analyze an image1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Article URL": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Content To Post": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "sources": {
      "main": [
        [
          {
            "node": "Match Sources",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape a url and get its content": {
      "main": [
        [
          {
            "node": "If Not Error1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge3": {
      "main": [
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape a url and get its content4": {
      "main": [
        [
          {
            "node": "If Not Error2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "keyword or url": {
      "main": [
        [
          {
            "node": "Twitter/ X post scraper - urls",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "create longtail keyword",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Form Submission1": {
      "main": [
        [
          {
            "node": "sources",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge4": {
      "main": [
        [
          {
            "node": "If Valid Content?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Either Url or Keyword": {
      "main": [
        [
          {
            "node": "keyword or url",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Either Url or Keyword1": {
      "main": [
        [
          {
            "node": "Instagram profile scraper",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Either Url or Keyword2": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Either Url or Keyword3": {
      "main": [
        [
          {
            "node": "create longtail keyword6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge5": {
      "main": [
        [
          {
            "node": "Filter out empty content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "linkedin fields": {
      "main": [
        [
          {
            "node": "Merge5",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "linkedin fields1": {
      "main": [
        [
          {
            "node": "Merge5",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "tavily search fields1": {
      "main": [
        [
          {
            "node": "Merge8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Twitter/ X post fields1": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Instagram profile scraper fields1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Linkedin post search scraper fields1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "X fields1": {
      "main": [
        [
          {
            "node": "Merge4",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Twitter/ X post scraper - urls": {
      "main": [
        [
          {
            "node": "X fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Twitter/ X post scraper - keyword": {
      "main": [
        [
          {
            "node": "X fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If From Form": {
      "main": [
        [
          {
            "node": "select fields",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Pre-Screener",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 4
          }
        ],
        [
          {
            "node": "Either Url or Keyword2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 6
          }
        ],
        [
          {
            "node": "Either Url or Keyword1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items3": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 5
          }
        ],
        [
          {
            "node": "Either Url or Keyword",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit5": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Not Error": {
      "main": [
        [
          {
            "node": "Create summary and title",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "failed urls",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "failed urls": {
      "main": [
        [
          {
            "node": "extract content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Not Error1": {
      "main": [
        [
          {
            "node": "firecrawl fields",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "failed url",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge6": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 7
          }
        ]
      ]
    },
    "firecrawl fields": {
      "main": [
        [
          {
            "node": "Merge6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "failed url": {
      "main": [
        [
          {
            "node": "extract content2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "https fields1": {
      "main": [
        [
          {
            "node": "Merge6",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "If Not Error2": {
      "main": [
        [
          {
            "node": "tavily search fields1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "failed url1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge8": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "failed url1": {
      "main": [
        [
          {
            "node": "extract content1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "https fields": {
      "main": [
        [
          {
            "node": "Merge8",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Filter out empty content": {
      "main": [
        [
          {
            "node": "Create summary and title3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter out empty content1": {
      "main": [
        []
      ]
    },
    "Filter out empty content2": {
      "main": [
        [
          {
            "node": "Create summary and title5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract content": {
      "main": [
        [
          {
            "node": "extract date1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract content1": {
      "main": [
        [
          {
            "node": "extract date",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract content2": {
      "main": [
        [
          {
            "node": "extract date3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items5": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 3
          }
        ],
        [
          {
            "node": "Either Url or Keyword3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Either Url or Keyword5": {
      "main": [
        [
          {
            "node": "Filter5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items6": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "Either Url or Keyword5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape a url and get its content5": {
      "main": [
        [
          {
            "node": "If Not Error4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Not Error4": {
      "main": [
        [
          {
            "node": "inoreader search fields",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "failed urls2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "failed urls2": {
      "main": [
        [
          {
            "node": "extract content4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge10": {
      "main": [
        []
      ]
    },
    "extract content4": {
      "main": [
        [
          {
            "node": "extract date2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "inoreader search fields": {
      "main": [
        [
          {
            "node": "Merge10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "markdown present?": {
      "main": [
        [
          {
            "node": "Create summary and title8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown": {
      "main": [
        [
          {
            "node": "Filter3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown6": {
      "main": [
        [
          {
            "node": "Filter1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown1": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract date": {
      "main": [
        [
          {
            "node": "Markdown6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract date1": {
      "main": [
        [
          {
            "node": "Markdown1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract date2": {
      "main": [
        [
          {
            "node": "Markdown",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown8": {
      "main": [
        [
          {
            "node": "Filter2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract date3": {
      "main": [
        [
          {
            "node": "Markdown8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "select fields": {
      "main": [
        [
          {
            "node": "filter",
            "type": "main",
            "index": 0
          },
          {
            "node": "If From Form1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get many articles from folder": {
      "main": [
        [
          {
            "node": "Inoreader",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Either Url or Keyword6": {
      "main": [
        [
          {
            "node": "Filter4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items7": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 8
          }
        ],
        [
          {
            "node": "Either Url or Keyword6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "markdown present?1": {
      "main": [
        [
          {
            "node": "Create summary and title7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RAG Web - Url search": {
      "main": [
        [
          {
            "node": "markdown present?1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RAG Web - Keyword Search": {
      "main": [
        [
          {
            "node": "markdown present?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RAG Web - Url search1": {
      "main": [
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RAG Web - Keyword Search1": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Inoreader": {
      "main": [
        [
          {
            "node": "Scrape a url and get its content5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "inoreader search fields1": {
      "main": [
        [
          {
            "node": "Merge10",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Loop Over Items4": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ],
        [
          {
            "node": "Either Url or Keyword4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit8": {
      "main": [
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit7": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit2": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit4": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit3": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit6": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape a url and get its content2": {
      "main": [
        [
          {
            "node": "If Not Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remove Duplicates1": {
      "main": [
        [
          {
            "node": "Add Content Idea to Evaluation Table1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Google Sheet Fields": {
      "main": [
        [
          {
            "node": "Remove Duplicates1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get All Ideas From Evaluation Table2": {
      "main": [
        [
          {
            "node": "Remove Duplicates1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "is content empty?": {
      "main": [
        [
          {
            "node": "Remove Duplicates3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If From Form1": {
      "main": [
        [
          {
            "node": "IF text longer than 2000 chars",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Valid content only (score above 2)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remove Duplicates3": {
      "main": [
        [
          {
            "node": "Get All Results",
            "type": "main",
            "index": 0
          },
          {
            "node": "Remove Duplicates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sort": {
      "main": [
        [
          {
            "node": "Get 10 best articles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get 10 best articles": {
      "main": [
        [
          {
            "node": "Evaluation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Valid content only (score above 2)": {
      "main": [
        [
          {
            "node": "IF text longer than 2000 chars",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit1": {
      "main": [
        [
          {
            "node": "Match Sources",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get All Sources1": {
      "main": [
        [
          {
            "node": "Match Input Format",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Classification agent with Batch (Tariq)",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "filter": {
      "main": [
        [
          {
            "node": "Set Google Sheet Fields",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get All Ideas From Evaluation Table2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "create longtail keyword5",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser3": {
      "ai_outputParser": [
        [
          {
            "node": "create longtail keyword5",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title": {
      "main": [
        [
          {
            "node": "RSS search fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser4": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title1": {
      "main": [
        [
          {
            "node": "inoreader search fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "create longtail keyword6",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser5": {
      "ai_outputParser": [
        [
          {
            "node": "create longtail keyword6",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser7": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model7": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser8": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title3",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title2": {
      "main": [
        [
          {
            "node": "https fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title3": {
      "main": [
        [
          {
            "node": "Linkedin post search scraper fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model9": {
      "ai_languageModel": [
        [
          {
            "node": "create longtail keyword",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser9": {
      "ai_outputParser": [
        [
          {
            "node": "create longtail keyword",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model10": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title4",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser10": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title4",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title4": {
      "main": [
        [
          {
            "node": "Twitter/ X post fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model11": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title5",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser11": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title5",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title5": {
      "main": [
        [
          {
            "node": "Instagram profile scraper fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model12": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title6",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser12": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title6",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title6": {
      "main": [
        [
          {
            "node": "https fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Output In Evaluation Google Sheet": {
      "main": [
        [
          {
            "node": "Evaluation1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Classification agent with Batch1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model8": {
      "ai_languageModel": [
        [
          {
            "node": "Evaluation1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser13": {
      "ai_outputParser": [
        [
          {
            "node": "Classification agent with Batch2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Sonnet 4.5 T0.5": {
      "ai_languageModel": [
        [
          {
            "node": "Classification agent with Batch",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4.1 T0.7": {
      "ai_languageModel": [
        [
          {
            "node": "Classification agent with Batch (Tariq)",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Gemini 2.5 T0.5": {
      "ai_languageModel": [
        [
          {
            "node": "Classification agent with Batch2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Sonnet 4.5 T0.": {
      "ai_languageModel": [
        [
          {
            "node": "Classification agent with Batch1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Classification agent with Batch1": {
      "main": [
        [
          {
            "node": "Sort",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title7",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser14": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title7",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title7": {
      "main": [
        [
          {
            "node": "RAG Web - Url search1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model13": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title8",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser15": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title8",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title8": {
      "main": [
        [
          {
            "node": "RAG Web - Keyword Search1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Linkedin company post search scraper": {
      "main": [
        [
          {
            "node": "linkedin fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter4": {
      "main": [
        [
          {
            "node": "RAG Web - Url search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "sidecar fields": {
      "main": [
        [
          {
            "node": "Summarize",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarize": {
      "main": [
        [
          {
            "node": "sidecar images1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "sidecar images1": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Linkedin keword scraper",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Linkedin profile scraper",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Linkedin company post search scraper",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Linkedin keword scraper": {
      "main": [
        [
          {
            "node": "linkedin fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "linkedin fields2": {
      "main": [
        [
          {
            "node": "Merge5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Create summary and title9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter1": {
      "main": [
        [
          {
            "node": "Create summary and title2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter2": {
      "main": [
        [
          {
            "node": "Create summary and title6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter3": {
      "main": [
        [
          {
            "node": "Create summary and title1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "X fields": {
      "main": [
        [
          {
            "node": "Merge4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge9": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS search fields1": {
      "main": [
        [
          {
            "node": "Merge9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter5": {
      "main": [
        [
          {
            "node": "create longtail keyword5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model5": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title9",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser6": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title9",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title9": {
      "main": [
        [
          {
            "node": "RSS search fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser16": {
      "ai_outputParser": [
        [
          {
            "node": "Classification agent with Batch3",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Sonnet 4.5 T0.1": {
      "ai_languageModel": [
        [
          {
            "node": "Classification agent with Batch3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser17": {
      "ai_outputParser": [
        [
          {
            "node": "Classification agent with Batch4",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Sonnet 4.5 T0.2": {
      "ai_languageModel": [
        [
          {
            "node": "Classification agent with Batch4",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Urgently Watched List": {
      "main": [
        [
          {
            "node": "Scrape a url and get its content3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser18": {
      "ai_outputParser": [
        [
          {
            "node": "Classification agent with Batch5",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Sonnet 4.5 T0.3": {
      "ai_languageModel": [
        [
          {
            "node": "Classification agent with Batch5",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "RSS search fields": {
      "main": [
        [
          {
            "node": "Merge9",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "OpenAI Chat Model14": {
      "ai_languageModel": [
        [
          {
            "node": "create longtail keword7 TARIQ",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser19": {
      "ai_outputParser": [
        [
          {
            "node": "create longtail keword7 TARIQ",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "create longtail keyword5": {
      "main": [
        [
          {
            "node": "RAG Web - Keyword Search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create longtail keyword6": {
      "main": [
        [
          {
            "node": "Search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create longtail keyword": {
      "main": [
        [
          {
            "node": "Twitter/ X post scraper - keyword",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Pre-Screener",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Pre-Screener": {
      "main": [
        [
          {
            "node": "Remove Unrrelevant Articles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser20": {
      "ai_outputParser": [
        [
          {
            "node": "Pre-Screener",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Remove Unrrelevant Articles": {
      "main": [
        [
          {
            "node": "Classification agent with Batch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter Articles By Topic": {
      "main": [
        [
          {
            "node": "If Publication Date",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter Articles By Topic1": {
      "main": [
        [
          {
            "node": "Splits text in small chuncks",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Either Url or Keyword4": {
      "main": [
        [
          {
            "node": "RSS Read",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Manually Trigger Content Engine": {
      "main": [
        [
          {
            "node": "Get All Sources",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Valid Content?": {
      "main": [
        [
          {
            "node": "Create summary and title4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape a url and get its content3": {
      "main": [
        [
          {
            "node": "If Not Error3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Not Error3": {
      "main": [
        [
          {
            "node": "Create summary and title10",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "failed urls1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "failed urls1": {
      "main": [
        [
          {
            "node": "extract content3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract content3": {
      "main": [
        [
          {
            "node": "extract date4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown2": {
      "main": [
        [
          {
            "node": "Filter6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract date4": {
      "main": [
        [
          {
            "node": "Markdown2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title10": {
      "main": [
        [
          {
            "node": "RSS search fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model15": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title10",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser21": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title10",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Filter6": {
      "main": [
        [
          {
            "node": "Create summary and title11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS search fields2": {
      "main": [
        [
          {
            "node": "Merge11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create summary and title11": {
      "main": [
        [
          {
            "node": "RSS search fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model16": {
      "ai_languageModel": [
        [
          {
            "node": "Create summary and title11",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser22": {
      "ai_outputParser": [
        [
          {
            "node": "Create summary and title11",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "RSS search fields3": {
      "main": [
        [
          {
            "node": "Merge11",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge11": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Content With Date": {
      "main": [
        [
          {
            "node": "Set Article URL",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Content Without Date": {
      "main": [
        [
          {
            "node": "Set Article URL",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Pre-Screener",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    }
  },
  "createdAt": "2025-12-11T11:25:52.825Z",
  "id": "XvR2qiHcGd7RnFWv",
  "isArchived": true,
  "meta": null,
  "name": "News Sourcing Production",
  "nodes": [
    {
      "parameters": {
        "query": "={{ $json.output.keyword_variant }}",
        "options": {
          "topic": "general",
          "search_depth": "advanced",
          "max_results": 5,
          "time_range": "month",
          "include_images": false
        }
      },
      "type": "@tavily/n8n-nodes-tavily.tavily",
      "typeVersion": 1,
      "position": [
        -11936,
        -2464
      ],
      "id": "c53cd4d0-e2ef-4173-b2f0-4aa0cd44efac",
      "name": "Search",
      "alwaysOutputData": false,
      "credentials": {
        "tavilyApi": {
          "id": "ZcHvfAvaiPVC9onF",
          "name": "Tavily account"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 5
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -15872,
        -2784
      ],
      "id": "a9510730-1fef-4407-9127-de49899b86a7",
      "name": "Schedule Trigger",
      "disabled": true
    },
    {
      "parameters": {
        "fieldToSplitOut": "results",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -11776,
        -2592
      ],
      "id": "8ef2e9de-757d-425c-865a-84e648043cab",
      "name": "Split Out1"
    },
    {
      "parameters": {
        "numberInputs": 9
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -7456,
        -2704
      ],
      "id": "8e8617b3-1e2f-40cc-ae3a-b982acaef84b",
      "name": "Merge"
    },
    {
      "parameters": {
        "operation": "Run actor and get dataset",
        "actorSource": "store",
        "actorId": {
          "__rl": true,
          "value": "A3cAPGpwBEG8RJwse",
          "mode": "list",
          "cachedResultName": "LinkedIn Profile Posts Bulk Scraper (No Cookies)⚡$2 per 1k (harvestapi/linkedin-profile-posts)",
          "cachedResultUrl": "https://console.apify.com/actors/A3cAPGpwBEG8RJwse/input"
        },
        "customBody": "={\n    \"includeQuotePosts\": false,\n    \"includeReposts\": false,\n    \"maxComments\": 0,\n    \"maxPosts\": 5,\n    \"maxReactions\": 0,\n    \"postedLimit\": \"month\",\n    \"scrapeComments\": false,\n    \"scrapeReactions\": false,\n    \"targetUrls\": [\n        \"{{ $json.url_or_keyword }}\"\n    ]\n}",
        "timeout": {}
      },
      "type": "@apify/n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -11824,
        -1968
      ],
      "id": "9d6e9d4e-e9ba-4bdf-9076-1be84d4f7c55",
      "name": "Linkedin profile scraper",
      "credentials": {
        "apifyApi": {
          "id": "CtQfLZVS6CSwrUIV",
          "name": "Apify account stephen"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "Run actor and get dataset",
        "actorSource": "store",
        "actorId": {
          "__rl": true,
          "value": "nH2AHrwxeTRJoN5hX",
          "mode": "id"
        },
        "customBody": "={\n    \"onlyPostsNewerThan\": \"1 month\",\n    \"resultsLimit\": 5,\n    \"skipPinnedPosts\": false,\n    \"username\": [\n        \"{{ $json.url_or_keyword }}\"\n    ]\n}",
        "timeout": {}
      },
      "type": "@apify/n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -12432,
        -608
      ],
      "id": "7be3310f-44a1-457a-b2d6-41c423df8a86",
      "name": "Instagram profile scraper",
      "credentials": {
        "apifyApi": {
          "id": "CtQfLZVS6CSwrUIV",
          "name": "Apify account stephen"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -15872,
        -2576
      ],
      "id": "79cbe188-797a-4291-b498-99ff077e5342",
      "name": "When clicking ‘Execute workflow’",
      "disabled": true
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "27a785c0-cfab-807b-b5eb-e1214e18960d",
          "mode": "list",
          "cachedResultName": "Syntech Biofuels Static Sources",
          "cachedResultUrl": "https://www.notion.so/27a785c0cfab807bb5ebe1214e18960d"
        },
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        -15648,
        -2688
      ],
      "id": "c1a63f26-e829-448b-b78f-1fadc83c341b",
      "name": "Get All Sources",
      "credentials": {
        "notionApi": {
          "id": "WaawMco9CQO56cmm",
          "name": "Stephen New Notion"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.source || $if($('Get All Sources').isExecuted, $('Get All Sources').item.json.property_source, null) }}",
                    "rightValue": "RSS",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "64eaa223-9be7-410e-8ff2-3e07451e36fe"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "RSS"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1d69a784-393b-4571-9fc2-9610ebc6e080",
                    "leftValue": "={{ $json.source || $if($('Get All Sources').isExecuted, $('Get All Sources').item.json.property_source, null) }}",
                    "rightValue": "LinkedIn",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "LinkedIn"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b422070f-f4e4-4177-9f59-b5b9c621ac49",
                    "leftValue": "={{ $json.source || $if($('Get All Sources').isExecuted, $('Get All Sources').item.json.property_source, null) }}",
                    "rightValue": "=Keyword",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Keyword"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "39bfb8ee-3bee-417f-86be-f230bb821856",
                    "leftValue": "={{ $json.source || $if($('Get All Sources').isExecuted, $('Get All Sources').item.json.property_source, null) }}",
                    "rightValue": "Instagram",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Instagram"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7c3bf149-65f1-475c-9d68-f3e29d76e933",
                    "leftValue": "={{ $json.source || $if($('Get All Sources').isExecuted, $('Get All Sources').item.json.property_source, null) }}",
                    "rightValue": "Website",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Website"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "00c92dc8-148e-442a-9b62-f6f4a33608e6",
                    "leftValue": "={{ $json.source || $if($('Get All Sources').isExecuted, $('Get All Sources').item.json.property_source, null) }}",
                    "rightValue": "X",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Twitter/ X"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -14048,
        -2368
      ],
      "id": "94d40173-ce80-4e5a-9234-b3c69bc2144e",
      "name": "Match Sources"
    },
    {
      "parameters": {
        "url": "={{ $json.url_or_keyword }}",
        "options": {}
      },
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1.2,
      "position": [
        -12368,
        -3136
      ],
      "id": "0c42b543-a905-4223-9ec7-5a4854d58d28",
      "name": "RSS Read",
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "45d48713-c0cb-44ab-83fc-168ac9a7c419",
              "leftValue": "={{ $json.property_status }}",
              "rightValue": "Active",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -15424,
        -2688
      ],
      "id": "80f55db7-4cd8-439b-bd3b-219e874375bf",
      "name": "Get Active Sources"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "27c785c0-cfab-8137-800f-dcf3e01a3e97",
          "mode": "list",
          "cachedResultName": "Syntech Biofuel Content Ideas",
          "cachedResultUrl": "https://www.notion.so/27c785c0cfab8137800fdcf3e01a3e97"
        },
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        -6864,
        -2480
      ],
      "id": "65c7a414-2ab9-4a98-9b9b-641675220ab7",
      "name": "Get All Results",
      "executeOnce": true,
      "alwaysOutputData": true,
      "credentials": {
        "notionApi": {
          "id": "WaawMco9CQO56cmm",
          "name": "Stephen New Notion"
        }
      }
    },
    {
      "parameters": {
        "mode": "combine",
        "advanced": true,
        "mergeByFields": {
          "values": [
            {
              "field1": "url",
              "field2": "property_source_url"
            }
          ]
        },
        "joinMode": "keepNonMatches",
        "outputDataFrom": "input1",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -6656,
        -2576
      ],
      "id": "9458b772-760b-4427-b52f-4865f0ca1e47",
      "name": "Remove Duplicates"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "b5d7e3e1-0a6d-47e3-8762-1d6bcb90d942",
              "leftValue": "={{ $json.property_priority }}",
              "rightValue": "High",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -15200,
        -2688
      ],
      "id": "9820a45c-aeca-4313-a585-5c9ca7104141",
      "name": "If High Priority"
    },
    {
      "parameters": {
        "type": "random"
      },
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        -14976,
        -2608
      ],
      "id": "2785dd1a-49dd-4907-b43d-2494173752fc",
      "name": "Randomise"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a4678c4d-3605-43b3-930d-54f3db0cf209",
              "name": "content",
              "value": "={{ $('Run Evaluation').item.json.Content }}",
              "type": "string"
            },
            {
              "id": "960e3dc3-5af8-4535-bca0-6db869b1bed0",
              "name": "url",
              "value": "={{ $('Run Evaluation').item.json.URL }}",
              "type": "string"
            },
            {
              "id": "084b87c7-e199-4284-89d5-a2a5bb7a69e7",
              "name": "title",
              "value": "={{ $('Run Evaluation').item.json.Title }}",
              "type": "string"
            },
            {
              "id": "4957e170-7f99-4439-8b8a-29e930aa8823",
              "name": "publication_date",
              "value": "={{ $('Run Evaluation').item.json[\"Publication Date\"] }}",
              "type": "string"
            },
            {
              "id": "7bf20e2e-95b3-4acc-9a9b-7fcf895f1ad2",
              "name": "expected_relevance",
              "value": "={{ $('Run Evaluation').item.json[\"Expected_Score\"] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -6720,
        -3280
      ],
      "id": "b66db9ad-c9ce-419b-b252-e456e07963c4",
      "name": "Match Input Format",
      "executeOnce": true
    },
    {
      "parameters": {
        "operation": "checkIfEvaluating"
      },
      "type": "n8n-nodes-base.evaluation",
      "typeVersion": 4.7,
      "position": [
        -4688,
        -3280
      ],
      "id": "bd37264f-949a-4273-8daa-6598d125526c",
      "name": "Evaluation"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI",
          "mode": "list",
          "cachedResultName": "Syntech Evaluation Test",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Evaluations",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI/edit#gid=0"
        }
      },
      "type": "n8n-nodes-base.evaluationTrigger",
      "typeVersion": 4.6,
      "position": [
        -7184,
        -3280
      ],
      "id": "dceb0491-0e30-45de-bd19-1a919d626f2e",
      "name": "Run Evaluation",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "KtxUrOdQhOl4VgmB",
          "name": "Google Sheets account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI",
          "mode": "list",
          "cachedResultName": "Syntech Evaluation Test",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Evaluations",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI/edit#gid=0"
        },
        "outputs": {
          "values": [
            {
              "outputName": "Actual_Score",
              "outputValue": "={{ $json.output.relevance_score }}"
            },
            {
              "outputName": "AI_Reasoning",
              "outputValue": "={{ $('Classification agent with Batch1').item.json.output.reason }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.evaluation",
      "typeVersion": 4.7,
      "position": [
        -4432,
        -3376
      ],
      "id": "97ef6307-30c3-4c0a-ac0b-3f008d119b57",
      "name": "Set Output In Evaluation Google Sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "KtxUrOdQhOl4VgmB",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e20ca9df-9034-44ac-8d9e-ecad56c6a923",
              "leftValue": "={{ $('Merge').item.json.publication_date }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2944,
        -1792
      ],
      "id": "de768a73-3dee-4a10-a551-230c7686e228",
      "name": "If Publication Date"
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash-lite",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash-lite"
        },
        "text": "=<prompt>\n\n    <introduction>\n    You are a Visual Description Specialist. You excel at analyzing images and creating descriptions that are both factually accurate for accessibility (alt-text) and rich enough to convey the image's emotional tone.\n    </introduction>\n\n    <task>\n    Analyze the provided image. Write a single, concise paragraph that functions as rich alt-text. Your description must identify the main people and objects, describe the setting, and capture the overall mood and atmosphere of the scene.\n    </task>\n\n    <output_rules>\n    <rule_1> **Content Priority:** Start by describing the main subject (person or object). Then, describe the background and any significant secondary elements. </rule_1>\n    <rule_2> **Capture the Mood:** Weave in adjectives that convey the feeling of the photo (e.g., \"serene,\" \"bustling,\" \"joyful,\" \"melancholy\").</rule_2>\n    <rule_3> **Format:** The entire output must be a single, descriptive paragraph, ideally 2-4 sentences long.</rule_3>\n    </output_rules>\n\n    <restrictions>\n    <restriction_1> **Be Objective:** Describe only what is visually present. Do not invent names, backstories, or infer information not explicitly shown.</restriction_1>\n    <restriction_2> **No Lists:** Do not use bullet points. The output must be a paragraph.</restriction_2>\n    </restrictions>\n\n    <examples>\n    <example_1>\n        **For an image of a person on a foggy London bridge:**\n        **Your Correct Output:** \"A person walks across a bridge in London, their silhouette partially obscured by thick morning fog. The iconic shape of a double-decker bus is faintly visible in the background, creating a moody and atmospheric urban scene.\"\n    </example_1>\n    <example_2>\n        **For an image of a plate of food in a restaurant:**\n        **Your Correct Output:** \"A vibrant plate of fish and chips sits on a dark wooden table, illuminated by warm restaurant lighting. The fish has a golden, crispy batter, and a small dish of mushy peas adds a splash of color, making the meal look comforting and delicious.\"\n    </example_2>\n    </examples>\n\n</prompt>",
        "imageUrls": "={{ $('Instagram profile scraper').item.json.displayUrl }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -11360,
        -864
      ],
      "id": "5057b20c-4553-43aa-be02-18189d1c9cd7",
      "name": "Analyze an image",
      "credentials": {
        "googlePalmApi": {
          "id": "ZmbuA0PXohNwTNly",
          "name": "Google Gemini(PaLM) paid"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "resource": "video",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash-lite",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash-lite"
        },
        "text": "<prompt>\n\n    <introduction>\n    You are a Video Analysis Specialist. You excel at watching video content and summarizing it effectively. Your skill is in creating descriptions that capture the sequence of events, key subjects, and the overall narrative or emotional tone of the video.\n    </introduction>\n\n    <task>\n    Analyze the provided video. Write a single, concise paragraph that functions as a rich summary. Your description must identify the main people or subjects, describe the key sequence of actions from beginning to end, and capture the overall mood and atmosphere of the video.\n    </task>\n\n    <output_rules>\n    <rule_1> **Narrative Flow:** Briefly describe the opening scene, the main action or development, and how the video concludes. </rule_1>\n    <rule_2> **Capture the Mood:** Weave in adjectives that convey the feeling of the video, considering visuals, pacing, and any audible music or sounds.</rule_2>\n    <rule_3> **Format:** The entire output must be a single, descriptive paragraph, ideally 2-4 sentences long.</rule_3>\n    </output_rules>\n\n    <restrictions>\n    <restriction_1> **Summarize, Don't Detail:** Focus on the most important actions. Do not provide a shot-by-shot breakdown of the entire video.</restriction_1>\n    <restriction_2> **Be Objective:** Describe only what happens in the video. Do not invent backstories or predict what might happen next.</restriction_2>\n    <restriction_3> **No Lists:** Do not use bullet points. The output must be a paragraph.</restriction_3>\n    </restrictions>\n\n    <examples>\n    <example_1>\n        **For a video of someone unboxing a new phone:**\n        **Your Correct Output:** \"The video opens with a person placing a sleek, branded box on a clean white desk. They proceed to carefully unbox a new smartphone, removing the protective film and turning it on for the first time, ending with a shot of the bright, glowing home screen, creating a feeling of excitement and anticipation.\"\n    </example_1>\n    <example_2>\n        **For a travel video of a market:**\n        **Your Correct Output:** \"This short, fast-paced video clip follows someone through a vibrant street market, capturing quick shots of colourful textiles and bustling crowds. Set to upbeat, energetic music, the video conveys a sense of adventure and cultural immersion in just a few seconds.\"\n    </example_2>\n    </examples>\n\n</prompt>",
        "videoUrls": "={{ $json.videoUrl }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -11360,
        -480
      ],
      "id": "a7bf72fc-5d9f-473f-a546-e8957fdb3ba5",
      "name": "Analyze video",
      "credentials": {
        "googlePalmApi": {
          "id": "ZmbuA0PXohNwTNly",
          "name": "Google Gemini(PaLM) paid"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.type }}",
                    "rightValue": "Image",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e106c5fe-6a60-42c8-b903-111972b85a3f"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Image"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "64f8adb7-a378-4031-9e83-1926292e4d6e",
                    "leftValue": "={{ $json.type }}",
                    "rightValue": "Video",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Video"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "15e45d2b-d3ca-457b-abcc-f6a6273e826d",
                    "leftValue": "={{ $json.type }}",
                    "rightValue": "Sidecar",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Sidecar"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -11936,
        -624
      ],
      "id": "75df6112-ea4a-48c2-abab-78dcdbdaaf2d",
      "name": "Switch"
    },
    {
      "parameters": {
        "maxItems": 10
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -14752,
        -2608
      ],
      "id": "c2db1737-6ad5-487f-aa13-dafb33e7925d",
      "name": "Get 10 Ideas"
    },
    {
      "parameters": {
        "maxItems": 10
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -12064,
        -3136
      ],
      "id": "b80a240d-6845-44ce-bb41-39668b75e41d",
      "name": "Get 5 Ideas"
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{  $('Remove Duplicates').item.json.content?.length() }}",
              "operation": "larger",
              "value2": 2000
            }
          ]
        }
      },
      "id": "fdfab34f-5e81-4ef6-8fc3-c9d76e77fe3a",
      "name": "IF text longer than 2000 chars",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -3408,
        -2592
      ]
    },
    {
      "parameters": {
        "jsCode": "let result = [];\nlet firstBlock = true;\n\n// Split text on \\n characters - FIXED: Use .item instead of .first() to get current item\nlet textBlocks = $('Remove Duplicates').item.json.content.split(/\\n/);\n\nfor (let block of textBlocks) {\n    if (block.length === 0) continue;\n    result.push({\n        \"textSubString\": block.trim(),\n        \"firstBlock\": firstBlock\n    });\n    firstBlock = false;\n}\n\nreturn result;"
      },
      "id": "d5a64e15-672f-4fd5-baa3-99de89ef999e",
      "name": "Splits text in small chuncks",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2512,
        -2336
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.firstBlock }}",
              "value2": true
            }
          ]
        }
      },
      "id": "ddb609cc-8558-4777-9dcf-7a97eadfa4fd",
      "name": "IF2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -2304,
        -2336
      ]
    },
    {
      "parameters": {
        "mode": "combine",
        "combinationMode": "multiplex",
        "options": {}
      },
      "id": "651d30af-ce7a-486a-bb9c-d13028a12a4f",
      "name": "Merge1",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        -1344,
        -2336
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -2928,
        -2224
      ],
      "id": "98f4291c-3765-4d5e-9713-75fa246b2770",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e20ca9df-9034-44ac-8d9e-ecad56c6a923",
              "leftValue": "={{ $('Merge').item.json.publication_date }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2016,
        -2432
      ],
      "id": "71162559-3c60-4cae-a79f-72d317445821",
      "name": "If Publication Date2"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -10336,
        -688
      ],
      "id": "2ed1468d-51fe-4dd4-827a-556ddcf86443",
      "name": "Merge2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2a08b0a3-caaf-40f7-86ad-3e1d8da5242f",
              "name": "image",
              "value": "={{ $json.content.parts[0].text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11072,
        -880
      ],
      "id": "d71d5905-0698-4a2e-a23e-c5b268806b0b",
      "name": "image field"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6bec0252-74d5-443d-a8dd-62065d2a6975",
              "name": "video",
              "value": "={{ $json.content.parts[0].text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11072,
        -496
      ],
      "id": "95847643-af56-44ed-a743-561e0caa052c",
      "name": "video fields"
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash-lite",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash-lite"
        },
        "text": "=<prompt>\n\n    <introduction>\n    You are a Visual Description Specialist. You excel at analyzing images and creating descriptions that are both factually accurate for accessibility (alt-text) and rich enough to convey the image's emotional tone.\n    </introduction>\n\n    <task>\n    Analyze the provided image. Write a single, concise paragraph that functions as rich alt-text. Your description must identify the main people and objects, describe the setting, and capture the overall mood and atmosphere of the scene.\n    </task>\n\n    <output_rules>\n    <rule_1> **Content Priority:** Start by describing the main subject (person or object). Then, describe the background and any significant secondary elements. </rule_1>\n    <rule_2> **Capture the Mood:** Weave in adjectives that convey the feeling of the photo (e.g., \"serene,\" \"bustling,\" \"joyful,\" \"melancholy\").</rule_2>\n    <rule_3> **Format:** The entire output must be a single, descriptive paragraph, ideally 2-4 sentences long.</rule_3>\n    </output_rules>\n\n    <restrictions>\n    <restriction_1> **Be Objective:** Describe only what is visually present. Do not invent names, backstories, or infer information not explicitly shown.</restriction_1>\n    <restriction_2> **No Lists:** Do not use bullet points. The output must be a paragraph.</restriction_2>\n    </restrictions>\n\n    <examples>\n    <example_1>\n        **For an image of a person on a foggy London bridge:**\n        **Your Correct Output:** \"A person walks across a bridge in London, their silhouette partially obscured by thick morning fog. The iconic shape of a double-decker bus is faintly visible in the background, creating a moody and atmospheric urban scene.\"\n    </example_1>\n    <example_2>\n        **For an image of a plate of food in a restaurant:**\n        **Your Correct Output:** \"A vibrant plate of fish and chips sits on a dark wooden table, illuminated by warm restaurant lighting. The fish has a golden, crispy batter, and a small dish of mushy peas adds a splash of color, making the meal look comforting and delicious.\"\n    </example_2>\n    </examples>\n\n</prompt>",
        "imageUrls": "={{ $json.images }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -11360,
        -672
      ],
      "id": "3f07cc68-45bc-4cf7-9d66-55aeab6362f0",
      "name": "Analyze an image1",
      "credentials": {
        "googlePalmApi": {
          "id": "ZmbuA0PXohNwTNly",
          "name": "Google Gemini(PaLM) paid"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "fieldToSplitOut": "images",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -11616,
        -672
      ],
      "id": "f0897b33-a1a4-4f31-8903-1aff0db449fd",
      "name": "Split Out"
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "url",
              "stringValue": "={{ $json.url }}"
            }
          ]
        },
        "include": "none",
        "options": {}
      },
      "id": "ddc60400-1f45-4aff-b6bc-758b5f28dbae",
      "name": "Set Article URL",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        -1568,
        -2432
      ]
    },
    {
      "parameters": {
        "resource": "block",
        "blockId": {
          "__rl": true,
          "value": "={{ $json.url }}",
          "mode": "url"
        },
        "blockUi": {
          "blockValues": [
            {
              "textContent": "={{ $json.textSubString }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        -1120,
        -2176
      ],
      "id": "a2fec284-e093-482d-be5b-67404fb695a6",
      "name": "Add Content To Post",
      "credentials": {
        "notionApi": {
          "id": "WaawMco9CQO56cmm",
          "name": "Stephen New Notion"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "4289e8b4-8a0a-4929-b43b-eb3610653c15",
              "name": "prompt",
              "value": "={{ $json.body.data.properties['Own Analysis'].rich_text[0].text.content }}",
              "type": "string"
            },
            {
              "id": "3ff2b13d-6bcf-43fa-8646-05ce4499bf91",
              "name": "url_or_keyword",
              "value": "={{ $json.body.data.properties['Source URL or Keyword'].title[0].text.content }}",
              "type": "string"
            },
            {
              "id": "3ebeed9d-5988-4b35-bb1d-b5eb6bcf0328",
              "name": "source",
              "value": "={{ $json.body.data.properties['Source Platform'].multi_select[0].name }}",
              "type": "string"
            },
            {
              "id": "29c37d50-0339-49f9-9c3a-3bcba964ecd9",
              "name": "additional_formats",
              "value": "={{ $json.body.data.properties[\"Additional Formats\"].relation }}",
              "type": "array"
            },
            {
              "id": "bc4aa16e-fbc6-4c7f-b43a-68fce7e46cf3",
              "name": "process_mode",
              "value": "={{ $json.body.data.properties.Mode.multi_select[0].name }}",
              "type": "string"
            },
            {
              "id": "1b931470-5b57-42e4-8584-75c19d6d9e7c",
              "name": "bypass_filter",
              "value": true,
              "type": "boolean"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -14448,
        -2304
      ],
      "id": "9fd7b1a3-b7a9-4b3c-9d79-b1c75aef82f6",
      "name": "sources"
    },
    {
      "parameters": {
        "operation": "scrape",
        "url": "={{ $json.url_or_keyword }}",
        "scrapeOptions": {
          "options": {
            "formats": {
              "format": [
                {},
                {
                  "type": "summary"
                }
              ]
            },
            "excludeTags": {
              "items": [
                {
                  "tag": "footer"
                },
                {
                  "tag": "script"
                },
                {
                  "tag": "style"
                },
                {
                  "tag": "nav"
                }
              ]
            },
            "headers": {}
          }
        },
        "requestOptions": {}
      },
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        -11648,
        -80
      ],
      "id": "b18d8349-3d75-4a21-8f50-e2252d4b4938",
      "name": "Scrape a url and get its content",
      "credentials": {
        "firecrawlApi": {
          "id": "BNVJqHXn81DoWSYA",
          "name": "Firecrawl account"
        }
      }
    },
    {
      "parameters": {
        "operation": "scrape",
        "url": "={{ decodeURIComponent($json.link.match(/url=([^&]+)/)?.[1] || '') || $json.link }}",
        "scrapeOptions": {
          "options": {
            "formats": {
              "format": [
                {}
              ]
            },
            "excludeTags": {
              "items": [
                {
                  "tag": "footer"
                },
                {
                  "tag": "script"
                },
                {
                  "tag": "nav"
                },
                {
                  "tag": "style"
                }
              ]
            },
            "headers": {}
          }
        },
        "requestOptions": {}
      },
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        -11824,
        -3136
      ],
      "id": "3c2b9149-bd91-4429-a41c-c212899c64c5",
      "name": "Scrape a url and get its content2",
      "credentials": {
        "firecrawlApi": {
          "id": "BNVJqHXn81DoWSYA",
          "name": "Firecrawl account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "maxItems": 100
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -13456,
        -2480
      ],
      "id": "812ce3a3-392f-4636-b2f1-ac04ed676d74",
      "name": "Limit2"
    },
    {
      "parameters": {
        "maxItems": 100
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -13248,
        -1840
      ],
      "id": "865c4e98-f4f7-4dde-9267-fcc056936d03",
      "name": "Limit4"
    },
    {
      "parameters": {
        "maxItems": 100
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -13264,
        -688
      ],
      "id": "5f67b759-77df-40de-b427-6e4c87337a28",
      "name": "Limit6"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        -2752,
        -2080
      ],
      "id": "8f6a5776-4dce-4d41-815e-57fc80545917",
      "name": "No Operation, do nothing"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -14528,
        -2688
      ],
      "id": "9ad79940-e981-44cb-bc29-e56261d75512",
      "name": "Merge3"
    },
    {
      "parameters": {
        "operation": "scrape",
        "url": "={{ $json.url }}",
        "scrapeOptions": {
          "options": {
            "formats": {
              "format": [
                {},
                {
                  "type": "summary"
                }
              ]
            },
            "excludeTags": {
              "items": [
                {
                  "tag": "footer"
                },
                {
                  "tag": "script"
                },
                {
                  "tag": "nav"
                },
                {
                  "tag": "style"
                }
              ]
            },
            "headers": {}
          }
        },
        "requestOptions": {}
      },
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        -11392,
        -2592
      ],
      "id": "2eb2a226-fc34-481a-97d0-0eb401a86b64",
      "name": "Scrape a url and get its content4",
      "credentials": {
        "firecrawlApi": {
          "id": "BNVJqHXn81DoWSYA",
          "name": "Firecrawl account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "maxItems": 100
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -13264,
        -1280
      ],
      "id": "1877e5ed-1fcc-493c-ac73-ffd8a5500c77",
      "name": "Limit3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "3d1849b4-edf5-488f-83e4-3678e2f03e64",
              "leftValue": "={{ $json.url_or_keyword }}",
              "rightValue": "=https://",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -12432,
        -1280
      ],
      "id": "2b70f402-ee15-4f21-a795-13f912e34374",
      "name": "keyword or url"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "news-sourcing-production",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -14672,
        -2304
      ],
      "id": "452a6533-3ce2-4b34-bbf7-454d40b19a95",
      "name": "Form Submission1",
      "webhookId": "d7c4ad3a-52b4-46fd-b480-76a083a42ff2"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -11072,
        -1280
      ],
      "id": "54bb098d-8eb9-4f8c-ad01-092cc29a0457",
      "name": "Merge4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8efead37-57d8-4101-9010-c855f2525db6",
              "name": "url_or_keyword",
              "value": "={{ $json.property_url || $json.url_or_keyword || $json.name }}",
              "type": "string"
            },
            {
              "id": "670b79a6-99da-4cef-9b7d-74f346980d34",
              "name": "prompt",
              "value": "={{ $json.prompt }}",
              "type": "string"
            },
            {
              "id": "0a3f9442-f913-4b62-9fe3-30b46de7569d",
              "name": "additional_formats",
              "value": "={{ $json.additional_formats }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -12720,
        -1280
      ],
      "id": "51a80a01-b6f6-4f94-871a-10be612e255d",
      "name": "Either Url or Keyword"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8efead37-57d8-4101-9010-c855f2525db6",
              "name": "url_or_keyword",
              "value": "={{ $json.property_url || $json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "761f96da-4b01-4ac7-8a07-03e42c93bdd8",
              "name": "prompt",
              "value": "={{ $json.prompt }}",
              "type": "string"
            },
            {
              "id": "7af35df9-e2ce-4e76-b8d8-115ef1099d7b",
              "name": "additional_formats",
              "value": "={{ $json.additional_formats }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -12720,
        -608
      ],
      "id": "925eb4e5-d34d-4aea-869b-b36bd8975db7",
      "name": "Either Url or Keyword1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8efead37-57d8-4101-9010-c855f2525db6",
              "name": "url_or_keyword",
              "value": "={{ $json.property_url || $json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "20618a33-4eba-4a9e-99e3-5271598f180c",
              "name": "prompt",
              "value": "={{ $json.prompt }}",
              "type": "string"
            },
            {
              "id": "f195a260-08af-4cc2-a6b1-7e5f306adb5c",
              "name": "additional_formats",
              "value": "={{ $json.additional_formats }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -12720,
        -1824
      ],
      "id": "4a6fb19a-0077-4cf9-9617-614ce566b516",
      "name": "Either Url or Keyword2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8efead37-57d8-4101-9010-c855f2525db6",
              "name": "url_or_keyword",
              "value": "={{ $json.property_name || $json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "1bf13ab6-84ba-4faf-ae05-c664b1e9c8cd",
              "name": "prompt",
              "value": "={{ $json.prompt }}",
              "type": "string"
            },
            {
              "id": "e49600f7-c2d9-46d2-9903-5bc13fbb7f78",
              "name": "additional_formats",
              "value": "={{ $json.additional_formats }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -12512,
        -2464
      ],
      "id": "05719362-83d1-40ba-b25a-105d3c0a424d",
      "name": "Either Url or Keyword3"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -11280,
        -2000
      ],
      "id": "e667c4aa-4be1-4597-a6e3-54b8cf09185a",
      "name": "Merge5"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "85711e61-d413-47d4-b046-f368cd9ea7e6",
              "name": "url",
              "value": "={{ $json.linkedinUrl }}",
              "type": "string"
            },
            {
              "id": "3ecbaa12-9e7c-4210-adf3-8ae326daa833",
              "name": "content",
              "value": "={{ $json.content }}",
              "type": "string"
            },
            {
              "id": "b3e1beef-2b90-40f4-b275-f09998ec258b",
              "name": "publication_date",
              "value": "={{ $json.postedAt.date }}",
              "type": "string"
            },
            {
              "id": "bcd3d0bb-05f7-4e46-9292-c9f035648ba8",
              "name": "search_query",
              "value": "={{ $('Either Url or Keyword2').item.json.url_or_keyword }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11552,
        -1984
      ],
      "id": "14ea27f8-fa1e-48b0-9bc3-f1cf6538e578",
      "name": "linkedin fields"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "85711e61-d413-47d4-b046-f368cd9ea7e6",
              "name": "url",
              "value": "={{ $json.linkedinUrl }}",
              "type": "string"
            },
            {
              "id": "3ecbaa12-9e7c-4210-adf3-8ae326daa833",
              "name": "content",
              "value": "={{ $json.content }}",
              "type": "string"
            },
            {
              "id": "b3e1beef-2b90-40f4-b275-f09998ec258b",
              "name": "publication_date",
              "value": "={{ $json.postedAt.date }}",
              "type": "string"
            },
            {
              "id": "bcd3d0bb-05f7-4e46-9292-c9f035648ba8",
              "name": "search_query",
              "value": "={{ $('Either Url or Keyword2').item.json.url_or_keyword }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11552,
        -1824
      ],
      "id": "b93df97a-244e-4419-beaa-de9f16a0fdfc",
      "name": "linkedin fields1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $('Scrape a url and get its content4').item.json.data.metadata.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ \n  $('Scrape a url and get its content4').item.json.data.markdown.removeMarkdown()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $('Scrape a url and get its content4').item.json.data.metadata.url }}",
              "type": "string"
            },
            {
              "id": "0276c4d6-4a0f-49c5-95e1-9cece3690cc8",
              "name": "summary",
              "value": "={{ $('Scrape a url and get its content4').item.json.data.summary }}",
              "type": "string"
            },
            {
              "id": "9573ac47-f760-4075-af1e-41774d546f60",
              "name": "search_query",
              "value": "={{ $('Either Url or Keyword3').item.json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $('Split Out1').item.json.published_date || $json.data.metadata.citation_publication_date || $('Scrape a url and get its content4').item.json.data.metadata['cXenseParse:publishtime'] || $('Scrape a url and get its content4').item.json.data.metadata.publishedTime || $('Scrape a url and get its content4').item.json.data.metadata.publishedTime || $('Scrape a url and get its content4').item.json.data.metadata['article:published_time'] }}\n\n",
              "type": "string"
            },
            {
              "id": "156a551e-8b0b-49ae-9543-4337fd48f33f",
              "name": "source",
              "value": "Tavily",
              "type": "string"
            },
            {
              "id": "40580acd-9a0c-4de0-91cd-0605052a5810",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "a1839b94-f160-4685-8932-0258bd67b0cf",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "8cad40d7-a7a0-46cb-a90e-a20807fe81b9",
              "name": "=mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -10560,
        -2608
      ],
      "id": "4aeffbd6-d015-47e9-9a9d-f018d3f00364",
      "name": "tavily search fields1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ $('Merge4').item.json.content }}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $('Merge4').item.json.url }}",
              "type": "string"
            },
            {
              "id": "0276c4d6-4a0f-49c5-95e1-9cece3690cc8",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "9573ac47-f760-4075-af1e-41774d546f60",
              "name": "search_query",
              "value": "={{ $('Merge4').item.json.search_query }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $('Merge4').item.json.publication_date }}",
              "type": "string"
            },
            {
              "id": "156a551e-8b0b-49ae-9543-4337fd48f33f",
              "name": "source",
              "value": "X",
              "type": "string"
            },
            {
              "id": "28519406-e423-4222-a586-4562a4dca6b9",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "cb2f856d-5f8b-4429-b6cb-550f05b4d09a",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "3e7f1bc1-8eb9-48d5-9321-f67f466d2f83",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -10240,
        -1136
      ],
      "id": "7c0dd945-d8af-4834-8bfc-03d8bec7c4c4",
      "name": "Twitter/ X post fields1",
      "retryOnFail": false
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a4834c8f-ac22-4c1c-a063-cb013a7551e1",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "32dabcd5-3ab3-4db6-aa40-4b95ac34bc83",
              "name": "content",
              "value": "=Content:\n{{ $('Instagram profile scraper').item.json.caption }}\n\nSingle image Description:\n{{ $('Merge2').item.json.image }}\n\nVideo Analysis:\n{{ $('Merge2').item.json.video }}\n\nMultiple image Description:\n{{ $('Merge2').item.json.sidecar_images }}",
              "type": "string"
            },
            {
              "id": "534a78cb-d400-4d1d-8a6b-183e66484257",
              "name": "url",
              "value": "={{ $('Instagram profile scraper').item.json.url }}",
              "type": "string"
            },
            {
              "id": "d508784a-e41d-4ea9-8871-c8759b9bef5a",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "5d3ea0be-c893-4a29-a9b4-4b5fe7b2bde0",
              "name": "search_query",
              "value": "={{ $('Either Url or Keyword1').item.json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "5a9c9207-b078-4fbc-88d9-c2e8fa2a2fed",
              "name": "publication_date",
              "value": "={{ $('Instagram profile scraper').item.json.timestamp }}",
              "type": "string"
            },
            {
              "id": "c1a6a0ce-b44f-4ef6-9742-fc87d628f391",
              "name": "source",
              "value": "Instagram",
              "type": "string"
            },
            {
              "id": "5df51f8f-9a46-457d-b8b8-15ea63b70751",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "9eae9c3d-3384-4e34-a482-2e1336b828e2",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "72a938f3-ef21-454f-ac18-a37eaa24f8a5",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -9536,
        -464
      ],
      "id": "14286556-3967-4bcd-9e3e-fd77c0b5b016",
      "name": "Instagram profile scraper fields1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "43ef6d98-1769-479a-ab8a-0f9d4d543ce6",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "014cb7eb-9846-4c41-8cee-4a809250264e",
              "name": "content",
              "value": "={{ $('Merge5').item.json.content }}",
              "type": "string"
            },
            {
              "id": "b2be53b4-3451-4aeb-be78-c71beb7a8178",
              "name": "url",
              "value": "={{ $('Merge5').item.json.url }}",
              "type": "string"
            },
            {
              "id": "54293f71-70d3-40d0-9f40-19de090bcd63",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "ce7b5d35-72b2-4f82-8744-f1643dd958eb",
              "name": "search_query",
              "value": "={{ $('Merge5').item.json.search_query }}",
              "type": "string"
            },
            {
              "id": "db4f55e1-7247-4206-a654-e5d314dbd40b",
              "name": "publication_date",
              "value": "={{ $('Merge5').item.json.publication_date }}",
              "type": "string"
            },
            {
              "id": "7674fce2-3c47-4703-88e3-c55a4990ee5c",
              "name": "prompt",
              "value": "={{ $('Either Url or Keyword2').item.json.prompt }}",
              "type": "string"
            },
            {
              "id": "694d03a3-b47b-4515-9ed7-fa8cf0d4b0b6",
              "name": "additional_formats",
              "value": "={{ $('Either Url or Keyword2').item.json.additional_formats }}",
              "type": "string"
            },
            {
              "id": "cdb58557-3653-4500-943e-71ea35ec0f27",
              "name": "source",
              "value": "LinkedIn",
              "type": "string"
            },
            {
              "id": "070c84e8-8286-4abb-b573-4a18af055f6d",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -10416,
        -1808
      ],
      "id": "987be005-73fc-4749-835e-23ec895c3168",
      "name": "Linkedin post search scraper fields1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0de21055-4554-4c15-9071-4c7a32560eae",
              "name": "content",
              "value": "={{ $json.text }}",
              "type": "string"
            },
            {
              "id": "d7e8711b-7f7c-487e-8aae-afa5d6132cec",
              "name": "url",
              "value": "={{ $json.url }}",
              "type": "string"
            },
            {
              "id": "69a2c6ec-5340-4ef4-8dbb-c9bb1d945bfe",
              "name": "publication_date",
              "value": "={{ $json.createdAt }}",
              "type": "string"
            },
            {
              "id": "b3af0d59-d4e0-4dde-8bfc-6716e11d9089",
              "name": "search_query",
              "value": "={{ $('Either Url or Keyword').item.json.url_or_keyword }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11360,
        -1264
      ],
      "id": "5606e736-5779-4413-b8cd-ab55c872ffd2",
      "name": "X fields1"
    },
    {
      "parameters": {
        "operation": "Run actor and get dataset",
        "actorSource": "store",
        "actorId": {
          "__rl": true,
          "value": "ghSpYIW3L1RvT57NT",
          "mode": "list",
          "cachedResultName": "Twitter Scraper PPR (danek/twitter-scraper-ppr)",
          "cachedResultUrl": "https://console.apify.com/actors/ghSpYIW3L1RvT57NT/input"
        },
        "customBody": "={\n    \"max_posts\": 10,\n    \"username\": \"{{ \n  (() => {\n    const input = $json.url_or_keyword;\n    \n    // If input contains x.com or twitter.com, extract username\n    if (input.includes('x.com/') || input.includes('twitter.com/')) {\n      // Remove protocol and domain\n      const urlPart = input\n        .replace(/^https?:\\/\\//, '')           // Remove http:// or https://\n        .replace(/^(www\\.)?twitter\\.com\\//, '') // Remove twitter.com/\n        .replace(/^(www\\.)?x\\.com\\//, '');      // Remove x.com/\n      \n      // Extract username (everything before / or end of string)\n      const username = urlPart.split(/[/?#]/)[0];\n      \n      // Remove @ if present\n      return username.replace(/^@/, '');\n    }\n    \n    // If it's already just a username, return it (remove @ if present)\n    return input.replace(/^@/, '');\n  })()\n}}\"\n}\n\n",
        "timeout": {}
      },
      "type": "@apify/n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -11648,
        -1456
      ],
      "id": "ef67c8ad-e79b-4b6e-b64e-9074641e1c33",
      "name": "Twitter/ X post scraper - urls",
      "alwaysOutputData": false,
      "credentials": {
        "apifyApi": {
          "id": "CtQfLZVS6CSwrUIV",
          "name": "Apify account stephen"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "Run actor and get dataset",
        "actorSource": "store",
        "actorId": {
          "__rl": true,
          "value": "nfp1fpt5gUlBwPcor",
          "mode": "list",
          "cachedResultName": "Twitter (X.com) Scraper Unlimited: No Limits (apidojo/twitter-scraper-lite)",
          "cachedResultUrl": "https://console.apify.com/actors/nfp1fpt5gUlBwPcor/input"
        },
        "customBody": "={\n    \"customMapFunction\": \"(object) => { return {...object} }\",\n    \"includeSearchTerms\": false,\n    \"maxItems\": 5,\n    \"onlyImage\": false,\n    \"onlyQuote\": false,\n    \"onlyTwitterBlue\": false,\n    \"onlyVerifiedUsers\": false,\n    \"onlyVideo\": false,\n    \"searchTerms\": [\n        \"{{ $json.output.keyword_variant }}\"\n    ],\n    \"sort\": \"Latest\",\n    \"tweetLanguage\": \"en\"\n}",
        "timeout": {}
      },
      "type": "@apify/n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -11648,
        -1264
      ],
      "id": "b274dc34-ba93-4729-9b59-60e23395dc9d",
      "name": "Twitter/ X post scraper - keyword",
      "alwaysOutputData": false,
      "credentials": {
        "apifyApi": {
          "id": "CtQfLZVS6CSwrUIV",
          "name": "Apify account stephen"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "cc515966-f679-4152-a85b-f524bb588f34",
              "leftValue": "={{ $if($('sources').isExecuted, $('sources').item.json.bypass_filter, false) }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -6432,
        -2576
      ],
      "id": "224a8d45-2a5c-461e-9721-bfe580485a3b",
      "name": "If From Form"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -12992,
        -1840
      ],
      "id": "c660d4b9-f110-4e48-96ce-924e45300e35",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -13008,
        -688
      ],
      "id": "6d854729-4487-4bd8-8a51-90668f515bb8",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -13008,
        -1280
      ],
      "id": "a99a2669-c3a9-4397-b0c0-1821e49d2c0f",
      "name": "Loop Over Items3"
    },
    {
      "parameters": {
        "maxItems": 100
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -13472,
        -2912
      ],
      "id": "48ebd95e-6e8b-400c-83c1-1f21e3c5f6cf",
      "name": "Limit5"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e532ff2-3eee-4984-88ef-3cc30f2e6bdf",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -11600,
        -3136
      ],
      "id": "9f737058-7713-48b5-8649-621bcae2a9fa",
      "name": "If Not Error"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f1fd4a3-670d-4861-af5b-bc94fa454574",
              "name": "failed_url",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.link, '') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11424,
        -3024
      ],
      "id": "59466b59-e1c8-4cef-8ef4-7d45ced9f614",
      "name": "failed urls",
      "executeOnce": false
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e532ff2-3eee-4984-88ef-3cc30f2e6bdf",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -11424,
        -80
      ],
      "id": "ff988d6c-997a-4ed1-a7f3-c0102d00a9f7",
      "name": "If Not Error1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -9488,
        32
      ],
      "id": "92e15a2d-edcc-4379-b783-1155c8f9ec6e",
      "name": "Merge6"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $json.data.metadata.ogTitle }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ \n  $json.data.markdown.removeMarkdown()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $json.data.metadata.url }}",
              "type": "string"
            },
            {
              "id": "81fb049e-bbc7-49f8-b932-9f2d3ae0305d",
              "name": "summary",
              "value": "={{ $json.data.summary }}",
              "type": "string"
            },
            {
              "id": "da6884f3-275c-41e7-87c5-c20fb29e9419",
              "name": "search_query",
              "value": "={{ $('sources').item.json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $json.data.metadata['article:published_time'] || $json.data.metadata.es_page_date || $('Scrape a url and get its content').item.json.data.metadata.publishedTime || $('Scrape a url and get its content').item.json.data.metadata.publishedTime || $('Scrape a url and get its content').item.json.data.metadata['article:published_time'] }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "=Website",
              "type": "string"
            },
            {
              "id": "b6707082-f321-40a8-8174-678e004169df",
              "name": "additional_formats",
              "value": "={{ $('sources').item.json.additional_formats }}",
              "type": "string"
            },
            {
              "id": "ac5d4a60-217d-4291-a6cd-ef525481c403",
              "name": "prompt",
              "value": "={{ $('sources').item.json.prompt }}",
              "type": "string"
            },
            {
              "id": "eb7d506e-d06c-448f-a6a1-7726df3f6bbb",
              "name": "mode",
              "value": "={{ $('sources').item.json.process_mode }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -10000,
        -96
      ],
      "id": "e91c9453-5215-4fb1-bcf2-d66da5e72298",
      "name": "firecrawl fields"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7f5d0405-44b1-4f2d-8c24-9a3c2efe4520",
              "name": "url_or_keyword",
              "value": "={{ $('sources').item.json.url_or_keyword }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11312,
        192
      ],
      "id": "2275d86d-3117-4f51-bbc1-06fb6be7b3ed",
      "name": "failed url"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ \n  $('Markdown8').item.json.linebreak.removeMarkdown()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $('sources').item.json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "81fb049e-bbc7-49f8-b932-9f2d3ae0305d",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "da6884f3-275c-41e7-87c5-c20fb29e9419",
              "name": "search_query",
              "value": "={{ $('sources').item.json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $('extract date3').item.json.publishedDate }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "=Website",
              "type": "string"
            },
            {
              "id": "b6707082-f321-40a8-8174-678e004169df",
              "name": "additional_formats",
              "value": "={{ $('sources').item.json.additional_formats }}",
              "type": "string"
            },
            {
              "id": "ac5d4a60-217d-4291-a6cd-ef525481c403",
              "name": "prompt",
              "value": "={{ $('sources').item.json.prompt }}",
              "type": "string"
            },
            {
              "id": "eb7d506e-d06c-448f-a6a1-7726df3f6bbb",
              "name": "mode",
              "value": "={{ $('sources').item.json.process_mode }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -9760,
        176
      ],
      "id": "62ae45db-df34-450c-a5df-450d3a3f3062",
      "name": "https fields1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e532ff2-3eee-4984-88ef-3cc30f2e6bdf",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -11200,
        -2592
      ],
      "id": "69682309-ab69-4412-bc84-02edadc69faa",
      "name": "If Not Error2"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -9312,
        -2496
      ],
      "id": "8efebc1d-a811-4b9b-bdee-5aee00b7f13f",
      "name": "Merge8"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7f5d0405-44b1-4f2d-8c24-9a3c2efe4520",
              "name": "url_or_keyword",
              "value": "={{ $('Split Out1').item.json.url }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11008,
        -2480
      ],
      "id": "0ace4a66-e1c2-4cbc-851d-b397fef42ffa",
      "name": "failed url1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ \n  $('Markdown6').item.json.linebreak.removeMarkdown()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $('failed url1').item.json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "81fb049e-bbc7-49f8-b932-9f2d3ae0305d",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "da6884f3-275c-41e7-87c5-c20fb29e9419",
              "name": "search_query",
              "value": "={{ $('Search').item.json.query }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $('extract date').item.json.publishedDate || '' }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "=Tavily",
              "type": "string"
            },
            {
              "id": "b6707082-f321-40a8-8174-678e004169df",
              "name": "=additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "ac5d4a60-217d-4291-a6cd-ef525481c403",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "eb7d506e-d06c-448f-a6a1-7726df3f6bbb",
              "name": "=mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -9552,
        -2480
      ],
      "id": "75f5e6f9-2605-4c3d-92cd-7688be998526",
      "name": "https fields"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "66ef2c27-8157-47fc-a348-9b34481bd702",
              "leftValue": "={{ $json.content }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "53df6988-fe46-4734-ab7c-744879729cd3",
              "leftValue": "={{ $json.url }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "8b9fe87b-480d-4a26-9d6d-f721176c66ec",
              "leftValue": "={{ $json.url }}",
              "rightValue": "syntechbiofuel",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            },
            {
              "id": "b88fcee8-e374-4417-968a-69fa5c7e7978",
              "leftValue": "={{ $json.content }}",
              "rightValue": "https://",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -11040,
        -1984
      ],
      "id": "624d0ccf-2659-4358-bdc6-2a696dddd780",
      "name": "Filter out empty content"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "66ef2c27-8157-47fc-a348-9b34481bd702",
              "leftValue": "={{ $json.content }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "c429f5e6-79cc-4db2-8d8c-cee051943346",
              "leftValue": "={{ $json.url }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "b8ee7030-556e-4254-b155-7e781aa6b037",
              "leftValue": "={{ $json.content }}",
              "rightValue": "https://",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            },
            {
              "id": "74f28484-13b9-4718-b864-72044871c058",
              "leftValue": "={{ $json.url }}",
              "rightValue": "syntechbiofuel",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            },
            {
              "id": "6ca5d98d-48be-4af3-947d-f1130c7c5893",
              "leftValue": "={{ $json.publication_date }}",
              "rightValue": "={{ new Date(Date.now() - 90 * 24 * 60 * 60 * 1000).toISOString() }}",
              "operator": {
                "type": "dateTime",
                "operation": "after"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -10864,
        -1536
      ],
      "id": "5e4bf3bb-195e-4dec-aaaf-fda0a49c9d23",
      "name": "Filter out empty content1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "66ef2c27-8157-47fc-a348-9b34481bd702",
              "leftValue": "={{ $('Instagram profile scraper').item.json.caption }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "f8550bb0-e3bd-482d-9810-e57fc6060e52",
              "leftValue": "={{ $('Instagram profile scraper').item.json.ownerUsername }}",
              "rightValue": "syntechbiofuel",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            },
            {
              "id": "b5271347-4a6a-4350-9344-e6bcebd5a3a5",
              "leftValue": "={{ $('Instagram profile scraper').item.json.caption }}",
              "rightValue": "https://",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -10112,
        -672
      ],
      "id": "acddfa76-8653-4fff-83d7-b49d233c8f69",
      "name": "Filter out empty content2"
    },
    {
      "parameters": {
        "url": "={{ decodeURIComponent($json.failed_url.match(/url=([^&]+)/)?.[1] || '') || $json.failed_url }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -11104,
        -3024
      ],
      "id": "e0c74a4e-dd08-470a-9be4-0ff8f3472e92",
      "name": "extract content",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "url": "={{ $json.url_or_keyword }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -10816,
        -2480
      ],
      "id": "a30d31a4-9a87-4eaa-9c72-58eabb2f28ec",
      "name": "extract content1",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "url": "={{ $json.url_or_keyword }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -11088,
        192
      ],
      "id": "a8927514-f8a9-466a-902a-8f2525c13bab",
      "name": "extract content2",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -13152,
        -2640
      ],
      "id": "eb007bb5-e3cd-4b56-b8a2-9a1574d334a5",
      "name": "Loop Over Items5"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8efead37-57d8-4101-9010-c855f2525db6",
              "name": "url_or_keyword",
              "value": "={{ $json.url_or_keyword || $json.name }}",
              "type": "string"
            },
            {
              "id": "7ca00974-25ef-4c7a-ac32-42d318e2efaa",
              "name": "prompt",
              "value": "={{ $json.prompt }}",
              "type": "string"
            },
            {
              "id": "2a3d10ea-9972-4e63-a289-f79cfec66ac6",
              "name": "additional_formats",
              "value": "={{ $json.additional_formats }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -12816,
        -3552
      ],
      "id": "a043af1c-07a7-47c6-8733-9be66c9de6e1",
      "name": "Either Url or Keyword5"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -13104,
        -3568
      ],
      "id": "b4bd953d-e631-45d2-bd73-003dd72ed84d",
      "name": "Loop Over Items6"
    },
    {
      "parameters": {
        "maxItems": 100
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -13440,
        -3568
      ],
      "id": "6a94ad41-7617-4b16-b800-63ecb2f719ee",
      "name": "Limit7"
    },
    {
      "parameters": {
        "operation": "scrape",
        "url": "={{ $json.inoreader_url }}",
        "scrapeOptions": {
          "options": {
            "formats": {
              "format": [
                {},
                {
                  "type": "summary"
                }
              ]
            },
            "excludeTags": {
              "items": [
                {
                  "tag": "footer"
                },
                {
                  "tag": "script"
                },
                {
                  "tag": "nav"
                },
                {
                  "tag": "style"
                }
              ]
            },
            "headers": {}
          }
        },
        "requestOptions": {}
      },
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        -8320,
        -4560
      ],
      "id": "8b61a5bd-9f43-4507-a167-54db23c438ee",
      "name": "Scrape a url and get its content5",
      "credentials": {
        "firecrawlApi": {
          "id": "BNVJqHXn81DoWSYA",
          "name": "Firecrawl account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e532ff2-3eee-4984-88ef-3cc30f2e6bdf",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -8112,
        -4560
      ],
      "id": "7e8d7c98-df1f-45c4-b5fb-a465bd6bc095",
      "name": "If Not Error4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f1fd4a3-670d-4861-af5b-bc94fa454574",
              "name": "failed_url",
              "value": "={{ $('Inoreader').item.json.inoreader_url }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -7904,
        -4448
      ],
      "id": "ec0bce6d-2406-46cd-b0ea-88795c0bdd56",
      "name": "failed urls2",
      "executeOnce": false
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -6048,
        -4560
      ],
      "id": "c8f11946-efc1-4661-b1c3-e6be2d19dedd",
      "name": "Merge10"
    },
    {
      "parameters": {
        "url": "={{ $json.failed_url }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -7600,
        -4448
      ],
      "id": "8bf497fa-d923-4a53-8c48-1ba95a2f9b92",
      "name": "extract content4",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $('Scrape a url and get its content5').item.json.data.metadata.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ \n  $json.data.markdown    \n    // Remove everything before the main article title (remove navigation/header)\n    .replace(/^[\\s\\S]*?(?=\\n[A-Z][^\\n]{20,}\\n)/m, '')\n    // Remove author bios (e.g., \"Name Name is a freelance writer...\")\n    .replace(/\\n[A-Z][a-z]+\\s+[A-Z][a-z]+\\s+is\\s+(a|an)\\s+[\\s\\S]*?(?=\\n[A-Z]|$)/gi, '')\n    // Remove comment sections\n    .replace(/\\n(Leave a Reply|Leave a Comment)[\\s\\S]*$/i, '')\n    .replace(/\\nYour email address[\\s\\S]*$/i, '')\n    .replace(/\\nComment\\s*\\\\?\\*[\\s\\S]*$/i, '')\n    // Remove \"This site uses Akismet\" and everything after\n    .replace(/\\nThis site uses[\\s\\S]*$/i, '')\n    // Remove social/footer sections\n    .replace(/\\n(Follow Us|Check Out Our|About Us|Fuel News Center|Search Site|Energy News|Grab Our Free|Proudly powered by)[\\s\\S]*$/i, '')\n    // Remove footers (common patterns)\n    .replace(/\\n(Share this:|Related Posts?:|Tags?:|Categories:|Filed Under:|About the Author|Subscribe|Newsletter|Follow us)[\\s\\S]*$/i, '')\n    // Remove navigation lists (lines starting with * followed by capitalized words)\n    .replace(/(^|\\n)\\s*\\*\\s+[A-Z][^\\n]*(\\n\\s*\\*\\s+[A-Z][^\\n]*)*/g, '')\n    // Remove \"Search for:\" and similar patterns\n    .replace(/\\n(Search for:|Submit Press Release|Free ebook|Green Job Board).*$/gm, '')\n    // Remove date/author lines (e.g., \"October 21, 2025 By Author Name\")\n    .replace(/\\n[A-Z][a-z]+\\s+\\d{1,2},\\s+\\d{4}\\s+By\\s+[^\\n]+\\n/g, '\\n')\n    // Remove Markdown headers (e.g., #, ##, ###)\n    .replace(/(^|\\n)#+\\s?/g, '\\n')\n    // Remove bold and italics (**text**, *text*, __text__, _text_)\n    .replace(/(\\*\\*|__)(.*?)\\1/g, '$2')\n    .replace(/(\\*|_)(.*?)\\1/g, '$2')\n    // Remove inline code and code blocks\n    .replace(/`{1,3}[^`]*`{1,3}/g, '')\n    // Remove images ![alt](url)\n    .replace(/!\\[.*?\\]\\(.*?\\)/g, '')\n    // Replace links [text](url) with just text\n    .replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n    // Remove blockquotes\n    .replace(/(^|\\n)>\\s?/g, '\\n')\n    // Remove unordered and ordered list markers (but keep the text)\n    .replace(/(^|\\n)[\\*\\-\\+]\\s+/g, '\\n')\n    .replace(/(^|\\n)\\d+\\.\\s+/g, '\\n')\n    // Remove lines that are just navigation/menu items (short capitalized lines)\n    .replace(/\\n[A-Z][a-z\\s]{2,30}\\n(?=[A-Z])/g, '\\n')\n    // Remove escaped characters\n    .replace(/\\\\([*_\\[\\](){}])/g, '$1')\n    // Remove special symbols like Δ\n    .replace(/Δ/g, '')\n    // Remove short trailing lines (likely footer fragments)\n    .replace(/\\n[^\\n]{1,40}$/g, '')\n    // Replace multiple newlines with double newline for paragraphs\n    .replace(/\\n{3,}/g, '\\n\\n')\n    // Trim whitespace\n    .trim()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $('Inoreader').item.json.inoreader_url }}",
              "type": "string"
            },
            {
              "id": "81fb049e-bbc7-49f8-b932-9f2d3ae0305d",
              "name": "summary",
              "value": "={{ $('Scrape a url and get its content5').item.json.data.summary }}",
              "type": "string"
            },
            {
              "id": "39872c24-4acc-4513-b7fb-7689cd511afb",
              "name": "search_query",
              "value": "={{ $('Inoreader').item.json.inoreader_url }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $('Scrape a url and get its content5').item.json.data.metadata.publishedTime || $('Scrape a url and get its content5').item.json.data.metadata.publishedTime || $('Scrape a url and get its content5').item.json.data.metadata['article:published_time'] }}",
              "type": "string"
            },
            {
              "id": "6bd73285-c360-4b10-8567-8ae66ecba2bd",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "101c6d7f-6e56-4362-9238-0b3e4fd7f14d",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "Inoreader",
              "type": "string"
            },
            {
              "id": "9aea88f6-a629-4f42-ba37-8608bb631772",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -7664,
        -4576
      ],
      "id": "a73843d9-132a-4f7d-9b95-06c0ae2c0429",
      "name": "inoreader search fields"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "b7af449b-1b66-41eb-bd3c-8528f3a342e5",
              "leftValue": "={{ $json.markdown }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "733accc0-809e-4828-b8fc-d17d6dc8bf0a",
              "leftValue": "={{ $json.searchResult.url }}",
              "rightValue": "https://syntechbiofuel.com/",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -11792,
        -3552
      ],
      "id": "66a49919-7aa0-42c0-a773-acbdb7cc3d62",
      "name": "markdown present?"
    },
    {
      "parameters": {
        "html": "={{ $('extract content4').item.json.data || '' }}",
        "destinationKey": "linebreak",
        "options": {
          "bulletMarker": "*",
          "codeFence": "```",
          "emDelimiter": "_",
          "ignore": "a, link, nav, footer, header, script, style, table",
          "keepDataImages": false,
          "maxConsecutiveNewlines": 2,
          "useLinkReferenceDefinitions": false,
          "strongDelimiter": "**",
          "codeBlockStyle": "fence",
          "textReplace": {
            "values": [
              {
                "pattern": "\\[([^\\]]+)\\]\\([^)]+\\)",
                "replacement": "$1"
              },
              {
                "pattern": "\\s{2,}",
                "replacement": " "
              },
              {
                "pattern": "^\\s+|\\s+$"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        -7152,
        -4464
      ],
      "id": "310f9952-178d-416f-843f-b84bacfe3c4a",
      "name": "Markdown"
    },
    {
      "parameters": {
        "html": "={{ $('extract content1').item.json.data || '' }}",
        "destinationKey": "linebreak",
        "options": {
          "bulletMarker": "*",
          "codeFence": "```",
          "emDelimiter": "_",
          "ignore": "a, link, nav, footer, header, script, style, table",
          "keepDataImages": false,
          "maxConsecutiveNewlines": 2,
          "useLinkReferenceDefinitions": false,
          "strongDelimiter": "**",
          "codeBlockStyle": "fence",
          "textReplace": {
            "values": [
              {
                "pattern": "\\[([^\\]]+)\\]\\([^)]+\\)",
                "replacement": "$1"
              },
              {
                "pattern": "\\s{2,}",
                "replacement": " "
              },
              {
                "pattern": "^\\s+|\\s+$"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        -10336,
        -2480
      ],
      "id": "204bbe2d-8438-4155-9cf3-20d5fe94ca79",
      "name": "Markdown6"
    },
    {
      "parameters": {
        "html": "={{ $('extract content').item.json.data || '' }}",
        "destinationKey": "linebreak",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        -10608,
        -3040
      ],
      "id": "ed9f1260-1a05-4eec-87ec-3650a30e88ee",
      "name": "Markdown1"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const htmlContent = $('extract content1').item.json.data;\n// const htmlContent = $node[\"extract content1\"].json[\"data\"];\n// Function to extract published date from various HTML patterns\nconst extractPublishedDate = (html) => {\n    if (!html) return null;\n    \n    // 1. Open Graph meta tags (most common)\n    let match = html.match(/<meta[^>]*property=[\"']article:published_time[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*property=[\"']article:published_time[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 2. Schema.org meta tags\n    match = html.match(/<meta[^>]*itemprop=[\"']datePublished[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*itemprop=[\"']datePublished[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 3. Standard meta name tags\n    const metaNames = [\n        'publishdate', 'publication-date', 'date', 'pubdate', 'publish_date',\n        'published-date', 'article.published', 'article:published',\n        'datePublished', 'dc.date', 'DC.date', 'dc.date.issued',\n        'sailthru.date', 'article.created', 'last-modified', 'created'\n    ];\n    \n    for (const name of metaNames) {\n        match = html.match(new RegExp(`<meta[^>]*name=[\"']${name}[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n        \n        match = html.match(new RegExp(`<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*name=[\"']${name}[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n    }\n    \n    // 4. JSON-LD structured data\n    const jsonLdMatch = html.match(/<script[^>]*type=[\"']application\\/ld\\+json[\"'][^>]*>([\\s\\S]*?)<\\/script>/gi);\n    if (jsonLdMatch) {\n        for (const jsonBlock of jsonLdMatch) {\n            try {\n                const jsonContent = jsonBlock.replace(/<script[^>]*>|<\\/script>/gi, '').trim();\n                const data = JSON.parse(jsonContent);\n                \n                // Handle both single objects and arrays\n                const items = Array.isArray(data) ? data : [data];\n                \n                for (const item of items) {\n                    if (item.datePublished) return item.datePublished;\n                    if (item.publishedDate) return item.publishedDate;\n                    if (item.dateCreated) return item.dateCreated;\n                    if (item.article?.datePublished) return item.article.datePublished;\n                }\n            } catch (e) {\n                // Continue if JSON parsing fails\n            }\n        }\n    }\n    \n    // 5. Time tags with datetime attribute\n    match = html.match(/<time[^>]*datetime=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 6. Data attributes\n    match = html.match(/data-published[-_]?(?:time|date)=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/data-date=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 7. Twitter card meta tags\n    match = html.match(/<meta[^>]*name=[\"']twitter:data1[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1] && /\\d{4}/.test(match[1])) return match[1];\n    \n    // 8. Specific publisher formats\n    // WordPress\n    match = html.match(/<abbr[^>]*class=[\"'][^\"']*published[\"'][^>]*title=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // Medium\n    match = html.match(/data-post-published-at=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 9. Look for ISO date patterns in the HTML (last resort)\n    // Matches formats like: 2024-01-15, 2024-01-15T10:30:00, etc.\n    const isoDateMatch = html.match(/\\b(20\\d{2}[-\\/](0[1-9]|1[0-2])[-\\/](0[1-9]|[12]\\d|3[01])(?:T[\\d:]+(?:\\.\\d+)?(?:Z|[+-]\\d{2}:\\d{2})?)?)\\b/);\n    if (isoDateMatch?.[1]) return isoDateMatch[1];\n    \n    return null;\n};\n\n// Extract the published date\nconst publishedDate = extractPublishedDate(htmlContent);\n\n// Return the result\nreturn {\n    publishedDate: publishedDate\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -10544,
        -2480
      ],
      "id": "9c69df23-f6d7-4b08-bbaf-f497001a149a",
      "name": "extract date"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const htmlContent = $('extract content').item.json.data;\n// const htmlContent = $node[\"extract content\"].json[\"data\"];\n\n// Function to extract published date from various HTML patterns\nconst extractPublishedDate = (html) => {\n    if (!html) return null;\n    \n    // 1. Open Graph meta tags (most common)\n    let match = html.match(/<meta[^>]*property=[\"']article:published_time[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*property=[\"']article:published_time[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 2. Schema.org meta tags\n    match = html.match(/<meta[^>]*itemprop=[\"']datePublished[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*itemprop=[\"']datePublished[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 3. Standard meta name tags\n    const metaNames = [\n        'publishdate', 'publication-date', 'date', 'pubdate', 'publish_date',\n        'published-date', 'article.published', 'article:published',\n        'datePublished', 'dc.date', 'DC.date', 'dc.date.issued',\n        'sailthru.date', 'article.created', 'last-modified', 'created'\n    ];\n    \n    for (const name of metaNames) {\n        match = html.match(new RegExp(`<meta[^>]*name=[\"']${name}[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n        \n        match = html.match(new RegExp(`<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*name=[\"']${name}[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n    }\n    \n    // 4. JSON-LD structured data\n    const jsonLdMatch = html.match(/<script[^>]*type=[\"']application\\/ld\\+json[\"'][^>]*>([\\s\\S]*?)<\\/script>/gi);\n    if (jsonLdMatch) {\n        for (const jsonBlock of jsonLdMatch) {\n            try {\n                const jsonContent = jsonBlock.replace(/<script[^>]*>|<\\/script>/gi, '').trim();\n                const data = JSON.parse(jsonContent);\n                \n                // Handle both single objects and arrays\n                const items = Array.isArray(data) ? data : [data];\n                \n                for (const item of items) {\n                    if (item.datePublished) return item.datePublished;\n                    if (item.publishedDate) return item.publishedDate;\n                    if (item.dateCreated) return item.dateCreated;\n                    if (item.article?.datePublished) return item.article.datePublished;\n                }\n            } catch (e) {\n                // Continue if JSON parsing fails\n            }\n        }\n    }\n    \n    // 5. Time tags with datetime attribute\n    match = html.match(/<time[^>]*datetime=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 6. Data attributes\n    match = html.match(/data-published[-_]?(?:time|date)=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/data-date=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 7. Twitter card meta tags\n    match = html.match(/<meta[^>]*name=[\"']twitter:data1[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1] && /\\d{4}/.test(match[1])) return match[1];\n    \n    // 8. Specific publisher formats\n    // WordPress\n    match = html.match(/<abbr[^>]*class=[\"'][^\"']*published[\"'][^>]*title=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // Medium\n    match = html.match(/data-post-published-at=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 9. Look for ISO date patterns in the HTML (last resort)\n    // Matches formats like: 2024-01-15, 2024-01-15T10:30:00, etc.\n    const isoDateMatch = html.match(/\\b(20\\d{2}[-\\/](0[1-9]|1[0-2])[-\\/](0[1-9]|[12]\\d|3[01])(?:T[\\d:]+(?:\\.\\d+)?(?:Z|[+-]\\d{2}:\\d{2})?)?)\\b/);\n    if (isoDateMatch?.[1]) return isoDateMatch[1];\n    \n    return null;\n};\n\n// Extract the published date\nconst publishedDate = extractPublishedDate(htmlContent);\n\n// Return the result\nreturn {\n    publishedDate: publishedDate\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -10832,
        -3040
      ],
      "id": "3240c4eb-b267-452e-a38a-7246f9244d31",
      "name": "extract date1"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const htmlContent = $node[\"extract content4\"].json[\"data\"];\n\n// Function to extract published date from various HTML patterns\nconst extractPublishedDate = (html) => {\n    if (!html) return null;\n    \n    // 1. Open Graph meta tags (most common)\n    let match = html.match(/<meta[^>]*property=[\"']article:published_time[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*property=[\"']article:published_time[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 2. Schema.org meta tags\n    match = html.match(/<meta[^>]*itemprop=[\"']datePublished[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*itemprop=[\"']datePublished[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 3. Standard meta name tags\n    const metaNames = [\n        'publishdate', 'publication-date', 'date', 'pubdate', 'publish_date',\n        'published-date', 'article.published', 'article:published',\n        'datePublished', 'dc.date', 'DC.date', 'dc.date.issued',\n        'sailthru.date', 'article.created', 'last-modified', 'created'\n    ];\n    \n    for (const name of metaNames) {\n        match = html.match(new RegExp(`<meta[^>]*name=[\"']${name}[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n        \n        match = html.match(new RegExp(`<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*name=[\"']${name}[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n    }\n    \n    // 4. JSON-LD structured data\n    const jsonLdMatch = html.match(/<script[^>]*type=[\"']application\\/ld\\+json[\"'][^>]*>([\\s\\S]*?)<\\/script>/gi);\n    if (jsonLdMatch) {\n        for (const jsonBlock of jsonLdMatch) {\n            try {\n                const jsonContent = jsonBlock.replace(/<script[^>]*>|<\\/script>/gi, '').trim();\n                const data = JSON.parse(jsonContent);\n                \n                // Handle both single objects and arrays\n                const items = Array.isArray(data) ? data : [data];\n                \n                for (const item of items) {\n                    if (item.datePublished) return item.datePublished;\n                    if (item.publishedDate) return item.publishedDate;\n                    if (item.dateCreated) return item.dateCreated;\n                    if (item.article?.datePublished) return item.article.datePublished;\n                }\n            } catch (e) {\n                // Continue if JSON parsing fails\n            }\n        }\n    }\n    \n    // 5. Time tags with datetime attribute\n    match = html.match(/<time[^>]*datetime=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 6. Data attributes\n    match = html.match(/data-published[-_]?(?:time|date)=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/data-date=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 7. Twitter card meta tags\n    match = html.match(/<meta[^>]*name=[\"']twitter:data1[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1] && /\\d{4}/.test(match[1])) return match[1];\n    \n    // 8. Specific publisher formats\n    // WordPress\n    match = html.match(/<abbr[^>]*class=[\"'][^\"']*published[\"'][^>]*title=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // Medium\n    match = html.match(/data-post-published-at=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 9. Look for ISO date patterns in the HTML (last resort)\n    // Matches formats like: 2024-01-15, 2024-01-15T10:30:00, etc.\n    const isoDateMatch = html.match(/\\b(20\\d{2}[-\\/](0[1-9]|1[0-2])[-\\/](0[1-9]|[12]\\d|3[01])(?:T[\\d:]+(?:\\.\\d+)?(?:Z|[+-]\\d{2}:\\d{2})?)?)\\b/);\n    if (isoDateMatch?.[1]) return isoDateMatch[1];\n    \n    return null;\n};\n\n// Extract the published date\nconst publishedDate = extractPublishedDate(htmlContent);\n\n// Return the result\nreturn {\n    publishedDate: publishedDate\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -7376,
        -4464
      ],
      "id": "74c163ad-197d-478f-bc34-1a3b13eccd39",
      "name": "extract date2"
    },
    {
      "parameters": {
        "html": "={{ $('extract content2').item.json.data || '' }}",
        "destinationKey": "linebreak",
        "options": {
          "bulletMarker": "*",
          "codeFence": "```",
          "emDelimiter": "_",
          "ignore": "a, link, nav, footer, header, script, style, table",
          "keepDataImages": false,
          "maxConsecutiveNewlines": 2,
          "useLinkReferenceDefinitions": false,
          "strongDelimiter": "**",
          "codeBlockStyle": "fence",
          "textReplace": {
            "values": [
              {
                "pattern": "\\[([^\\]]+)\\]\\([^)]+\\)",
                "replacement": "$1"
              },
              {
                "pattern": "\\s{2,}",
                "replacement": " "
              },
              {
                "pattern": "^\\s+|\\s+$"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        -10640,
        176
      ],
      "id": "a586c59e-82b0-4039-bc68-507bbd9ac7d0",
      "name": "Markdown8"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const htmlContent = $node[\"extract content2\"].json[\"data\"];\n\n// Function to extract published date from various HTML patterns\nconst extractPublishedDate = (html) => {\n    if (!html) return null;\n    \n    // 1. Open Graph meta tags (most common)\n    let match = html.match(/<meta[^>]*property=[\"']article:published_time[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*property=[\"']article:published_time[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 2. Schema.org meta tags\n    match = html.match(/<meta[^>]*itemprop=[\"']datePublished[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*itemprop=[\"']datePublished[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 3. Standard meta name tags\n    const metaNames = [\n        'publishdate', 'publication-date', 'date', 'pubdate', 'publish_date',\n        'published-date', 'article.published', 'article:published',\n        'datePublished', 'dc.date', 'DC.date', 'dc.date.issued',\n        'sailthru.date', 'article.created', 'last-modified', 'created'\n    ];\n    \n    for (const name of metaNames) {\n        match = html.match(new RegExp(`<meta[^>]*name=[\"']${name}[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n        \n        match = html.match(new RegExp(`<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*name=[\"']${name}[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n    }\n    \n    // 4. JSON-LD structured data\n    const jsonLdMatch = html.match(/<script[^>]*type=[\"']application\\/ld\\+json[\"'][^>]*>([\\s\\S]*?)<\\/script>/gi);\n    if (jsonLdMatch) {\n        for (const jsonBlock of jsonLdMatch) {\n            try {\n                const jsonContent = jsonBlock.replace(/<script[^>]*>|<\\/script>/gi, '').trim();\n                const data = JSON.parse(jsonContent);\n                \n                // Handle both single objects and arrays\n                const items = Array.isArray(data) ? data : [data];\n                \n                for (const item of items) {\n                    if (item.datePublished) return item.datePublished;\n                    if (item.publishedDate) return item.publishedDate;\n                    if (item.dateCreated) return item.dateCreated;\n                    if (item.article?.datePublished) return item.article.datePublished;\n                }\n            } catch (e) {\n                // Continue if JSON parsing fails\n            }\n        }\n    }\n    \n    // 5. Time tags with datetime attribute\n    match = html.match(/<time[^>]*datetime=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 6. Data attributes\n    match = html.match(/data-published[-_]?(?:time|date)=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/data-date=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 7. Twitter card meta tags\n    match = html.match(/<meta[^>]*name=[\"']twitter:data1[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1] && /\\d{4}/.test(match[1])) return match[1];\n    \n    // 8. Specific publisher formats\n    // WordPress\n    match = html.match(/<abbr[^>]*class=[\"'][^\"']*published[\"'][^>]*title=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // Medium\n    match = html.match(/data-post-published-at=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 9. Look for ISO date patterns in the HTML (last resort)\n    // Matches formats like: 2024-01-15, 2024-01-15T10:30:00, etc.\n    const isoDateMatch = html.match(/\\b(20\\d{2}[-\\/](0[1-9]|1[0-2])[-\\/](0[1-9]|[12]\\d|3[01])(?:T[\\d:]+(?:\\.\\d+)?(?:Z|[+-]\\d{2}:\\d{2})?)?)\\b/);\n    if (isoDateMatch?.[1]) return isoDateMatch[1];\n    \n    return null;\n};\n\n// Extract the published date\nconst publishedDate = extractPublishedDate(htmlContent);\n\n// Return the result\nreturn {\n    publishedDate: publishedDate\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -10848,
        176
      ],
      "id": "8f013700-43c8-445a-8f87-77e3bb8fda37",
      "name": "extract date3"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9a8264bf-82d2-434f-b146-3b8deb76e519",
              "name": "title",
              "value": "={{ $('Merge').item.json.title }}",
              "type": "string"
            },
            {
              "id": "dfdf1695-e69f-4cff-a8f0-21d9da07745b",
              "name": "content",
              "value": "={{ ($('Merge').item.json.content || '').substring(0, 49000) }}",
              "type": "string"
            },
            {
              "id": "4899f665-2f29-41df-afea-d8a744a6fec9",
              "name": "url",
              "value": "={{ $('Merge').item.json.url }}",
              "type": "string"
            },
            {
              "id": "ec8500c3-9d57-45d3-b1a9-2de1706dee8d",
              "name": "summary",
              "value": "={{ $('Merge').item.json.summary }}",
              "type": "string"
            },
            {
              "id": "0c470796-e8e2-4605-a6af-9e8236d9635c",
              "name": "search_query",
              "value": "={{ $('Merge').item.json.search_query }}",
              "type": "string"
            },
            {
              "id": "4d34103a-b327-42cc-8e50-dec38a8fc1f5",
              "name": "publication_date",
              "value": "={{ $('Merge').item.json.publication_date }}",
              "type": "string"
            },
            {
              "id": "02065b1c-286c-4cf9-8709-27d8a766d2d1",
              "name": "prompt",
              "value": "={{ $('Merge').item.json.prompt }}",
              "type": "string"
            },
            {
              "id": "ef20184c-2ce1-4660-9658-fe12f9776f2d",
              "name": "additional_formats",
              "value": "={{ $('Merge').item.json.additional_formats }}",
              "type": "string"
            },
            {
              "id": "5a5e80cb-0ad3-4e06-86f8-63e9e59765fd",
              "name": "source",
              "value": "={{ $('Merge').item.json.source }}",
              "type": "string"
            },
            {
              "id": "61574df1-c16c-42df-9b9b-ebe428bd7eae",
              "name": "mode",
              "value": "={{ $('Merge').item.json.mode }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -4272,
        -2624
      ],
      "id": "50cf414f-43b0-4f32-819a-18760711813a",
      "name": "select fields"
    },
    {
      "parameters": {
        "operation": "getFromFolder",
        "folderId": "user/1003916850/label/Sustainable fuel",
        "limit": 10
      },
      "type": "n8n-nodes-inoreader.inoreader",
      "typeVersion": 1,
      "position": [
        -8816,
        -4560
      ],
      "id": "fe7baf73-2881-4797-a827-03ffa644acfa",
      "name": "Get many articles from folder",
      "credentials": {
        "inoreaderOAuth2Api": {
          "id": "efsbxIBcU1yQ96dB",
          "name": "Inoreader account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8efead37-57d8-4101-9010-c855f2525db6",
              "name": "url_or_keyword",
              "value": "={{ $json.property_url }}",
              "type": "string"
            },
            {
              "id": "7ca00974-25ef-4c7a-ac32-42d318e2efaa",
              "name": "prompt",
              "value": "={{ $json.prompt }}",
              "type": "string"
            },
            {
              "id": "2a3d10ea-9972-4e63-a289-f79cfec66ac6",
              "name": "additional_formats",
              "value": "={{ $json.additional_formats }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -12816,
        -4000
      ],
      "id": "d6f82c40-61c0-4f00-a9a9-45d8f9acbc28",
      "name": "Either Url or Keyword6"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -13104,
        -4016
      ],
      "id": "1a800221-f429-46fe-a3a0-c3850dd41761",
      "name": "Loop Over Items7"
    },
    {
      "parameters": {
        "maxItems": 100
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -13440,
        -4016
      ],
      "id": "d9b17733-cd9a-4362-a0cf-b112ea53b163",
      "name": "Limit8"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "b7af449b-1b66-41eb-bd3c-8528f3a342e5",
              "leftValue": "={{ $json.markdown }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "33f7eec4-37a8-44b2-bc5a-b6ab28e81677",
              "leftValue": "={{ $json.searchResult.url }}",
              "rightValue": "https://syntechbiofuel.com/",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -11808,
        -4016
      ],
      "id": "4c009c25-c94b-489f-ae32-75dcb8524031",
      "name": "markdown present?1"
    },
    {
      "parameters": {
        "operation": "Run actor and get dataset",
        "actorSource": "store",
        "actorId": {
          "__rl": true,
          "value": "3ox4R101TgZz67sLr",
          "mode": "list",
          "cachedResultName": "RAG Web Browser (apify/rag-web-browser)",
          "cachedResultUrl": "https://console.apify.com/actors/3ox4R101TgZz67sLr/input"
        },
        "customBody": "={\n    \"debugMode\": false,\n    \"desiredConcurrency\": 5,\n    \"htmlTransformer\": \"none\",\n    \"maxResults\": 5,\n    \"outputFormats\": [\n        \"markdown\"\n    ],\n    \"proxyConfiguration\": {\n        \"useApifyProxy\": true\n    },\n    \"query\": \"site:{{ $json.url_or_keyword + \" after:\" + $now.minus({days: 30}).toFormat('yyyy-MM-dd') }}\",\n    \"removeCookieWarnings\": true,\n    \"requestTimeoutSecs\": 40\n}\n",
        "timeout": 300
      },
      "type": "@apify/n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -12224,
        -4000
      ],
      "id": "1e2e7672-73d1-45f9-9051-408d470db67b",
      "name": "RAG Web - Url search",
      "credentials": {
        "apifyApi": {
          "id": "CtQfLZVS6CSwrUIV",
          "name": "Apify account stephen"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "Run actor and get dataset",
        "actorSource": "store",
        "actorId": {
          "__rl": true,
          "value": "3ox4R101TgZz67sLr",
          "mode": "list",
          "cachedResultName": "RAG Web Browser (apify/rag-web-browser)",
          "cachedResultUrl": "https://console.apify.com/actors/3ox4R101TgZz67sLr/input"
        },
        "customBody": "={\n    \"debugMode\": false,\n    \"maxResults\": 5,\n    \"outputFormats\": [\n        \"markdown\"\n    ],\n    \"proxyConfiguration\": {\n        \"useApifyProxy\": true\n    },\n    \"query\": \"{{ $json.output.keyword_variant + \" after:\" + $now.minus({days: 30}).toFormat('yyyy-MM-dd') }}\",\n    \"removeCookieWarnings\": true,\n    \"requestTimeoutSecs\": 40\n}\n",
        "timeout": "=300",
        "memory": 2048
      },
      "type": "@apify/n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -12064,
        -3552
      ],
      "id": "a24bc061-47f5-4b47-aef0-f1ca3d6d28e0",
      "name": "RAG Web - Keyword Search",
      "credentials": {
        "apifyApi": {
          "id": "CtQfLZVS6CSwrUIV",
          "name": "Apify account stephen"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ \n  $('RAG Web - Url search').item.json.markdown.removeMarkdown()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $('RAG Web - Url search').item.json.searchResult.url }}",
              "type": "string"
            },
            {
              "id": "81fb049e-bbc7-49f8-b932-9f2d3ae0305d",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "39872c24-4acc-4513-b7fb-7689cd511afb",
              "name": "search_query",
              "value": "={{ $('RAG Web - Url search').item.json.query }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ (()=>{\n  const s = $('RAG Web - Url search').item.json.searchResult.description ?? '';\n  const m = s.match(/\\b(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Sept|Oct|Nov|Dec)[a-z]*\\s+\\d{1,2},\\s+\\d{4}\\b/i);\n  return m ? m[0] : null;\n})() }}",
              "type": "string"
            },
            {
              "id": "6bd73285-c360-4b10-8567-8ae66ecba2bd",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "101c6d7f-6e56-4362-9238-0b3e4fd7f14d",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "Website",
              "type": "string"
            },
            {
              "id": "9aea88f6-a629-4f42-ba37-8608bb631772",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11200,
        -4016
      ],
      "id": "2fc3215b-3188-4fc2-b761-7fd513b857b0",
      "name": "RAG Web - Url search1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ \n  $('RAG Web - Keyword Search').item.json.markdown.removeMarkdown()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $('RAG Web - Keyword Search').item.json.searchResult.url }}",
              "type": "string"
            },
            {
              "id": "81fb049e-bbc7-49f8-b932-9f2d3ae0305d",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "39872c24-4acc-4513-b7fb-7689cd511afb",
              "name": "search_query",
              "value": "={{ $('RAG Web - Keyword Search').item.json.query }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ (()=>{\n  const s = $('RAG Web - Keyword Search').item.json.searchResult.description ?? '';\n  const m = s.match(/\\b(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Sept|Oct|Nov|Dec)[a-z]*\\s+\\d{1,2},\\s+\\d{4}\\b/i);\n  return m ? m[0] : null;\n})() }}",
              "type": "string"
            },
            {
              "id": "6bd73285-c360-4b10-8567-8ae66ecba2bd",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "101c6d7f-6e56-4362-9238-0b3e4fd7f14d",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "Website",
              "type": "string"
            },
            {
              "id": "9aea88f6-a629-4f42-ba37-8608bb631772",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11264,
        -3552
      ],
      "id": "68854018-3118-4fbe-ae77-939b5e296bd5",
      "name": "RAG Web - Keyword Search1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "bd9a6b8c-3a70-4675-b076-0c10c238a0d0",
              "name": "inoreader_url",
              "value": "={{ $json.canonical[0].href }}",
              "type": "string"
            },
            {
              "id": "07a76ffc-c66f-458f-b97f-7985bf0a8bd5",
              "name": "inoreader_title",
              "value": "={{ $json.title }}",
              "type": "string"
            },
            {
              "id": "0e58a0d3-4d63-4ffd-ab43-57a00bbe7d53",
              "name": "summary_content",
              "value": "={{ $json.summary.content.replace(/<[^>]*>/g, '').replace(/&amp;/g, '&').replace(/&nbsp;/g, ' ').trim() }}",
              "type": "string"
            },
            {
              "id": "353cc99b-5a58-44d5-a9b2-811295ace703",
              "name": "published",
              "value": "={{ DateTime.fromSeconds($json.published).toFormat('yyyy-MM-dd HH:mm:ss') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -8560,
        -4560
      ],
      "id": "c801a8a4-d83a-45b2-9d19-1d233de61392",
      "name": "Inoreader"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d34aa6b-dce8-4761-9a9a-a663f61a86ac",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "={{ \n  $('Markdown').item.json.linebreak    \n    // Remove everything before the main article title (remove navigation/header)\n    .replace(/^[\\s\\S]*?(?=\\n[A-Z][^\\n]{20,}\\n)/m, '')\n    // Remove author bios (e.g., \"Name Name is a freelance writer...\")\n    .replace(/\\n[A-Z][a-z]+\\s+[A-Z][a-z]+\\s+is\\s+(a|an)\\s+[\\s\\S]*?(?=\\n[A-Z]|$)/gi, '')\n    // Remove comment sections\n    .replace(/\\n(Leave a Reply|Leave a Comment)[\\s\\S]*$/i, '')\n    .replace(/\\nYour email address[\\s\\S]*$/i, '')\n    .replace(/\\nComment\\s*\\\\?\\*[\\s\\S]*$/i, '')\n    // Remove \"This site uses Akismet\" and everything after\n    .replace(/\\nThis site uses[\\s\\S]*$/i, '')\n    // Remove social/footer sections\n    .replace(/\\n(Follow Us|Check Out Our|About Us|Fuel News Center|Search Site|Energy News|Grab Our Free|Proudly powered by)[\\s\\S]*$/i, '')\n    // Remove footers (common patterns)\n    .replace(/\\n(Share this:|Related Posts?:|Tags?:|Categories:|Filed Under:|About the Author|Subscribe|Newsletter|Follow us)[\\s\\S]*$/i, '')\n    // Remove navigation lists (lines starting with * followed by capitalized words)\n    .replace(/(^|\\n)\\s*\\*\\s+[A-Z][^\\n]*(\\n\\s*\\*\\s+[A-Z][^\\n]*)*/g, '')\n    // Remove \"Search for:\" and similar patterns\n    .replace(/\\n(Search for:|Submit Press Release|Free ebook|Green Job Board).*$/gm, '')\n    // Remove date/author lines (e.g., \"October 21, 2025 By Author Name\")\n    .replace(/\\n[A-Z][a-z]+\\s+\\d{1,2},\\s+\\d{4}\\s+By\\s+[^\\n]+\\n/g, '\\n')\n    // Remove Markdown headers (e.g., #, ##, ###)\n    .replace(/(^|\\n)#+\\s?/g, '\\n')\n    // Remove bold and italics (**text**, *text*, __text__, _text_)\n    .replace(/(\\*\\*|__)(.*?)\\1/g, '$2')\n    .replace(/(\\*|_)(.*?)\\1/g, '$2')\n    // Remove inline code and code blocks\n    .replace(/`{1,3}[^`]*`{1,3}/g, '')\n    // Remove images ![alt](url)\n    .replace(/!\\[.*?\\]\\(.*?\\)/g, '')\n    // Replace links [text](url) with just text\n    .replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n    // Remove blockquotes\n    .replace(/(^|\\n)>\\s?/g, '\\n')\n    // Remove unordered and ordered list markers (but keep the text)\n    .replace(/(^|\\n)[\\*\\-\\+]\\s+/g, '\\n')\n    .replace(/(^|\\n)\\d+\\.\\s+/g, '\\n')\n    // Remove lines that are just navigation/menu items (short capitalized lines)\n    .replace(/\\n[A-Z][a-z\\s]{2,30}\\n(?=[A-Z])/g, '\\n')\n    // Remove escaped characters\n    .replace(/\\\\([*_\\[\\](){}])/g, '$1')\n    // Remove special symbols like Δ\n    .replace(/Δ/g, '')\n    // Remove short trailing lines (likely footer fragments)\n    .replace(/\\n[^\\n]{1,40}$/g, '')\n    // Replace multiple newlines with double newline for paragraphs\n    .replace(/\\n{3,}/g, '\\n\\n')\n    // Trim whitespace\n    .trim()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $('Inoreader').item.json.inoreader_url }}",
              "type": "string"
            },
            {
              "id": "81fb049e-bbc7-49f8-b932-9f2d3ae0305d",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "39872c24-4acc-4513-b7fb-7689cd511afb",
              "name": "search_query",
              "value": "={{ $('Inoreader').item.json.inoreader_url }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $('extract date2').item.json.publishedDate }}",
              "type": "string"
            },
            {
              "id": "6bd73285-c360-4b10-8567-8ae66ecba2bd",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "101c6d7f-6e56-4362-9238-0b3e4fd7f14d",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "Inoreader",
              "type": "string"
            },
            {
              "id": "9aea88f6-a629-4f42-ba37-8608bb631772",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -6288,
        -4464
      ],
      "id": "618adade-8a98-4349-b828-be168b6adf4e",
      "name": "inoreader search fields1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -13152,
        -3152
      ],
      "id": "9c0e5dab-3df3-463c-9989-bd3fb15a89f9",
      "name": "Loop Over Items4"
    },
    {
      "parameters": {
        "mode": "combine",
        "advanced": true,
        "mergeByFields": {
          "values": [
            {
              "field1": "url",
              "field2": "URL"
            }
          ]
        },
        "joinMode": "keepNonMatches",
        "outputDataFrom": "input1",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -3312,
        -3104
      ],
      "id": "1c4a0725-ae38-4619-a98d-5c85a8109e59",
      "name": "Remove Duplicates1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "4061f412-99c2-4549-9d2e-be355aa6a5bb",
              "name": "url",
              "value": "={{ $('select fields').item.json.url }}",
              "type": "string"
            },
            {
              "id": "60a2488f-d96c-4c21-94f1-6f627e9c99ae",
              "name": "title",
              "value": "={{ $('select fields').item.json.title }}",
              "type": "string"
            },
            {
              "id": "30183727-5e80-401c-a728-37da12a2054b",
              "name": "content",
              "value": "={{ $('select fields').item.json.content }}",
              "type": "string"
            },
            {
              "id": "ac7fb376-710f-43b5-9ff8-c3de8dc4f0ff",
              "name": "publication_date",
              "value": "={{ $('select fields').item.json.publication_date }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3504,
        -3200
      ],
      "id": "d0ed4573-ae94-4637-8008-ceddeff235a5",
      "name": "Set Google Sheet Fields"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI",
          "mode": "list",
          "cachedResultName": "Syntech Evaluation Test",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Evaluations",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3520,
        -3008
      ],
      "id": "4b49799b-eaef-445a-a2ab-ba647de12898",
      "name": "Get All Ideas From Evaluation Table2",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "KtxUrOdQhOl4VgmB",
          "name": "Google Sheets account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "d1a433e2-115c-4f9c-a258-7731b132de1c",
              "leftValue": "={{ $json.content }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "ad722536-85c8-4fba-8145-67715452ce2f",
              "leftValue": "={{ $json.title }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "fe7a45d4-d4f0-4ace-a3b9-ded0a3b66bc6",
              "leftValue": "={{ $json.summary }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "42359478-9817-4951-b123-cb290b9d766d",
              "leftValue": "={{ $json.search_query }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "dcacffd7-ba99-4bc9-bac1-deda617262aa",
              "leftValue": "={{ $json.url }}",
              "rightValue": "https://syntechbiofuel.com/",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            },
            {
              "id": "3251c219-5c31-41e5-9bbd-ede17913a7cf",
              "leftValue": "={{ $json.content }}",
              "rightValue": "Aa",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            },
            {
              "id": "36e2c2b2-ec6a-42f9-ad14-32264f257027",
              "leftValue": "={{ $json.url }}",
              "rightValue": "syntechbiofuel",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -7248,
        -2592
      ],
      "id": "c62ef2dc-cce1-44d6-8f71-c80c57d23868",
      "name": "is content empty?"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "cc515966-f679-4152-a85b-f524bb588f34",
              "leftValue": "={{ $if($('sources').isExecuted, $('sources').item.json.bypass_filter, false) }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -3904,
        -2608
      ],
      "id": "0688e808-3b8f-47ff-aa1a-aebd501e8098",
      "name": "If From Form1"
    },
    {
      "parameters": {
        "compare": "selectedFields",
        "fieldsToCompare": "url",
        "options": {}
      },
      "type": "n8n-nodes-base.removeDuplicates",
      "typeVersion": 2,
      "position": [
        -7040,
        -2592
      ],
      "id": "8711986e-a7df-4545-9dd8-6a25c62b11d9",
      "name": "Remove Duplicates3"
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "output.relevance_score",
              "order": "descending"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        -5136,
        -3280
      ],
      "id": "896ed1ca-a674-424b-9295-35d0bb4afc42",
      "name": "Sort"
    },
    {
      "parameters": {
        "maxItems": 20
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -4928,
        -3280
      ],
      "id": "4f8d4875-7dfc-4d90-ac04-1adccf8310a4",
      "name": "Get 10 best articles"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "8987c495-abc2-4e29-86db-4466755af908",
              "leftValue": "={{ $('Classification agent with Batch1').item.json.output.relevance_score }}",
              "rightValue": 2,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -3632,
        -2480
      ],
      "id": "e057d489-a7bf-49b0-a6e9-c3a7abc50c7f",
      "name": "Valid content only (score above 2)"
    },
    {
      "parameters": {
        "maxItems": 1000
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -14320,
        -2688
      ],
      "id": "ff481554-550c-43b0-8de8-33520f47e4bf",
      "name": "Limit1"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "27a785c0-cfab-807b-b5eb-e1214e18960d",
          "mode": "list",
          "cachedResultName": "Syntech Biofuels Static Sources",
          "cachedResultUrl": "https://www.notion.so/27a785c0cfab807bb5ebe1214e18960d"
        },
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        -6928,
        -3280
      ],
      "id": "ef86a57a-357c-4b60-8386-3aeee83d5bfd",
      "name": "Get All Sources1",
      "credentials": {
        "notionApi": {
          "id": "WaawMco9CQO56cmm",
          "name": "Stephen New Notion"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"relevance_score\": {\n      \"type\": \"integer\",\n      \"description\": \"Relevance score from 0 to 5 indicating how closely the article aligns with Syntech Biofuel's focus\",\n      \"minimum\": 0,\n      \"maximum\": 5\n    },\n    \"reason\": {\n      \"type\": \"string\",\n      \"description\": \"Short factual explanation of the score (1-2 sentences maximum)\"\n    }\n  },\n  \"required\": [\"score\", \"reason\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -8544,
        -3680
      ],
      "id": "00f1f28c-4bd7-47d7-867b-83043b3b80f9",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "8181b8db-969e-49ec-9489-805d0054391e",
              "leftValue": "={{ $if($('sources').isExecuted, $('sources').item.json.bypass_filter, false) }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -3872,
        -3056
      ],
      "id": "1ea85eab-d7d9-4de8-99ea-452b23bc48d8",
      "name": "filter"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $('Scrape a url and get its content2').item.json.data.markdown }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n-if \"article page\" has only page or header or footer information dont mention it in your output\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -10192,
        -3328
      ],
      "id": "c2f48773-7891-433f-9daf-1cd54669191f",
      "name": "Create summary and title"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -10160,
        -3184
      ],
      "id": "70c21b4c-1045-4d99-bf8e-24702e00b3fb",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -12416,
        -3360
      ],
      "id": "8cee7eaf-7139-44ce-be27-1d5d4ce81975",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -10000,
        -3184
      ],
      "id": "5b00ce13-f6fc-4063-85a3-2ee7931efc65",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"keyword_variant\": {\n      \"type\": \"string\",\n      \"description\": \"SEO keyword variant\"\n    }\n  },\n  \"required\": [\"keyword_variant\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -12256,
        -3376
      ],
      "id": "8af0a0b2-85b6-4c8d-b10b-a4712c9205eb",
      "name": "Structured Output Parser3"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.linebreak }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -6656,
        -4464
      ],
      "id": "7cb3f1be-58ce-49df-af24-6ca4ff2affd9",
      "name": "Create summary and title1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -6656,
        -4304
      ],
      "id": "1caa1d90-4e68-4ef8-924e-d9117dabf072",
      "name": "OpenAI Chat Model3",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -6480,
        -4304
      ],
      "id": "3242c887-5ee2-4ac7-afc1-3b33446df36e",
      "name": "Structured Output Parser4"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -12288,
        -2272
      ],
      "id": "c0b81ee1-2a9e-4437-88d9-964a68c40b7c",
      "name": "OpenAI Chat Model4",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"keyword_variant\": {\n      \"type\": \"string\",\n      \"description\": \"SEO keyword variant\"\n    }\n  },\n  \"required\": [\"keyword_variant\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -12128,
        -2288
      ],
      "id": "1f5242da-573d-47bf-9686-959d8254aaa6",
      "name": "Structured Output Parser5"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.linebreak }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -9952,
        -2480
      ],
      "id": "0c8b77c9-56d2-4de6-a613-539616b42800",
      "name": "Create summary and title2"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -9968,
        -2304
      ],
      "id": "5681ebc1-c24b-4a17-9ecb-8d908ab952e4",
      "name": "OpenAI Chat Model6",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -9792,
        -2304
      ],
      "id": "22044ef8-3031-4b87-a529-653fcb545209",
      "name": "Structured Output Parser7"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.content }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -10800,
        -1984
      ],
      "id": "cbb09823-ddaf-487f-ab37-310026f3608e",
      "name": "Create summary and title3"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -10848,
        -1696
      ],
      "id": "36feb61f-7d01-4ce3-9e33-9fd634a7e313",
      "name": "OpenAI Chat Model7",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -10688,
        -1712
      ],
      "id": "b8ab98b9-73fc-456a-adf2-ec9fb1da7038",
      "name": "Structured Output Parser8"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -12048,
        -1104
      ],
      "id": "39c05356-e7c2-4b4e-8837-519b27cff9e9",
      "name": "OpenAI Chat Model9",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"keyword_variant\": {\n      \"type\": \"string\",\n      \"description\": \"SEO keyword variant\"\n    }\n  },\n  \"required\": [\"keyword_variant\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -11856,
        -1104
      ],
      "id": "0598e20f-2f4d-4e4c-8f7e-f3278c77549c",
      "name": "Structured Output Parser9"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.content }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -10608,
        -1280
      ],
      "id": "d46dd8e1-dcfd-40e8-bfba-7d112c738078",
      "name": "Create summary and title4"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -10592,
        -1104
      ],
      "id": "8fbb8ec5-82c0-43d7-acdd-68e57274b2b1",
      "name": "OpenAI Chat Model10",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -10432,
        -1120
      ],
      "id": "9165e2ec-867c-477e-8ad7-5dc377fc0bf9",
      "name": "Structured Output Parser10"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $('Instagram profile scraper').item.json.caption }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -9856,
        -672
      ],
      "id": "6ced9edc-ecfe-4faf-ad72-83b944e743b3",
      "name": "Create summary and title5"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -9872,
        -464
      ],
      "id": "13dff5a5-bca5-4701-bdbf-0b27d4321c55",
      "name": "OpenAI Chat Model11",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -9712,
        -480
      ],
      "id": "8b050777-a7bb-4095-aa80-59d2799362ab",
      "name": "Structured Output Parser11"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.linebreak }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -10160,
        176
      ],
      "id": "17c63d10-4041-45a2-bbbd-c651f64a5176",
      "name": "Create summary and title6"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -10160,
        352
      ],
      "id": "90c3c2be-0263-49f3-ab09-fe9e8b7c66ed",
      "name": "OpenAI Chat Model12",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -10000,
        352
      ],
      "id": "58caaab5-3222-4e8a-8d7d-11612db23ac5",
      "name": "Structured Output Parser12"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI",
          "mode": "list",
          "cachedResultName": "Syntech Evaluation Test",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Evaluations",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1DGxbB-WIk_Ycv8W0iH7dXUo6ESu67ZqLNFhXB8w3-AI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Publication Date": "={{ $json.publication_date }}",
            "URL": "={{ $json.url }}",
            "Title": "={{ $json.title }}",
            "Content": "={{ $json.content }}",
            "Actual Score": "={{ $('Classification agent with Batch (Tariq)').item.json.message.content.relevance_score }}",
            "AI Reasoning": "={{ $('Classification agent with Batch (Tariq)').item.json.message.content.reasoning }}"
          },
          "matchingColumns": [
            "URL"
          ],
          "schema": [
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Publication Date",
              "displayName": "Publication Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Actual Score",
              "displayName": "Actual Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Expected Score",
              "displayName": "Expected Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Human Reasoning",
              "displayName": "Human Reasoning",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "AI Reasoning",
              "displayName": "AI Reasoning",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "useAppend": true
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3104,
        -3104
      ],
      "id": "84e355ec-947c-47b7-9768-ec5d5c4c0d06",
      "name": "Add Content Idea to Evaluation Table1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "KtxUrOdQhOl4VgmB",
          "name": "Google Sheets account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"relevance_score\": {\n      \"type\": \"integer\",\n      \"description\": \"Relevance score from 0 to 5 indicating how closely the article aligns with Syntech Biofuel's focus\",\n      \"minimum\": 0,\n      \"maximum\": 5\n    },\n    \"reason\": {\n      \"type\": \"string\",\n      \"description\": \"Short factual explanation of the score (1-2 sentences maximum)\"\n    }\n  },\n  \"required\": [\"score\", \"reason\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -5264,
        -3056
      ],
      "id": "ea5e3ddf-5993-47ee-badb-477d9e7fed6d",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "content": "## Score\n* consistent 4.0",
        "height": 576,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -8832,
        -4032
      ],
      "id": "946461f7-38e7-44fa-a1fb-d9850a20e6aa",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.content }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n\n    <introduction>\n        You are an expert evaluator of sustainability and renewable fuel content.  \n        Your role is to assess how closely an article aligns with **Syntech Biofuel’s ecosystem, mission, and focus areas**.  \n        Syntech specializes in **advanced liquid biofuels** (B100, HVO, ASB, FAME) made from **waste streams**, emphasizing **UK-based innovation**, **decarbonisation**, and **drop-in diesel substitution**.  \n        Articles most relevant to Syntech discuss **UK waste-to-fuel systems**, **B100/B20/FAME deployment**, **RTFO-linked initiatives**, or **circular-economy biodiesel production**.\n    </introduction>\n\n    <task>\n        Assign a **relevance_score** from 0–5 showing how closely the article aligns with Syntech’s interests.  \n        Base this on:\n        1. **Centrality:** Are advanced biofuels, biodiesel, or waste-to-fuel systems the main topic?  \n        2. **Context:** Does it directly support Syntech’s UK-focused mission (e.g., decarbonising fleets with drop-in fuels)?  \n        3. **Brand Alignment:** Is it UK-based, waste-derived, and non-competitive in focus?  \n\n        Output only:\n        {\"relevance_score\": number, \"reason\": \"short factual explanation\"}\n    </task>\n\n    <keywords>\n        biodiesel, B100, B20, FAME, HVO, ASB, renewable diesel, advanced biofuel, waste-to-fuel, used cooking oil, UCO, tallow, drop-in diesel, drop-in fuel, decarbonisation, RTFO, greenhouse gas reduction, carbon intensity, circular economy, renewable fuel, Syntech Biofuel, biofuel refinery, renewable diesel plant, fleet fuel, waste-derived fuel, UK biofuel, UK renewable fuel, transport decarbonisation\n    </keywords>\n\n    <steps>\n        1. **Read the entire article** to determine its **primary focus**.  \n        2. **Identify keyword mentions** and classify them as:\n            - *Central*: Core topic of the article.  \n            - *Peripheral*: Minor or passing mention.  \n        3. **Prioritize topic centrality** over keyword count. A few central mentions are stronger than many irrelevant ones.  \n        4. **UK relevance check:**  \n            - Articles about UK projects, policy, or operations can reach scores of 4–5.  \n            - Global or general renewables content should cap at 3.  \n        5. **Exclude or penalize** content dominated by hydrogen, EVs, solar, wind, SAF, or biogas **unless explicitly linked** to **liquid biofuels or drop-in diesel**.  \n        6. **Downweight competitor or reseller content** (e.g., Green Fuels, Neste, Argent Energy) — cap at **1–2**.  \n        7. **Paywalled, teaser, or directory listings** cap at **1**.  \n        8. **Use <scoring_criteria> and <examples>** to guide final score assignment.  \n        9. Output only the JSON with `relevance_score` and `reason`.\n    </steps>\n\n    <scoring_criteria>\n        **0 — Unrelated:**  \n        No connection to advanced biofuels, Syntech’s ecosystem, or UK decarbonisation using drop-in fuels.  \n        *Examples:* hydrogen, EVs, solar, generic sustainability, aviation SAF.\n\n        **1 — Marginally Related:**  \n        Mentions sustainability or emissions reduction but lacks any link to biofuels or Syntech’s UK context.  \n        *Example:* general energy transition or decarbonisation article.\n\n        **2 — Slightly Related:**  \n        Brief reference to biofuels, renewable diesel, or B100, but not central; or focuses on competitors.  \n        *Example:* “Green Fuels launches new biodiesel” or global trade summary.\n\n        **3 — Partially Related:**  \n        Includes biofuels or waste-derived energy as part of a broader discussion, with limited UK focus.  \n        *Example:* UK energy overview mentioning biodiesel among other renewables.\n\n        **4 — Strongly Related:**  \n        Focuses on UK biofuel or waste-to-fuel projects, such as B100 or HVO fleet deployment, circular economy models, or RTFO compliance.  \n        *Example:* UK waste oil conversion to biodiesel or local decarbonisation initiative.\n\n        **5 — Highly Relevant:**  \n        Article is primarily about Syntech-aligned subjects: **UK waste-to-fuel production**, **B100/FAME/ASB innovation**, or **drop-in diesel substitution** supporting decarbonisation.  \n        *Example:* “Biodiesel produced in the UK from used cooking oil powers fleet vehicles.”\n    </scoring_criteria>\n\n    <brand_alignment_rules>\n        * **Upweight** UK-based coverage of B100, HVO, ASB, or circular-economy biodiesel.  \n        * **Upweight** articles that quantify decarbonisation or mention RTFO alignment.  \n        * **Downweight or exclude** hydrogen, EV, SAF, or non-liquid renewables unless explicitly linked to liquid fuels.  \n        * **Downweight** competitor or reseller marketing content.  \n        * **Cap** scores for vague, global, or teaser content lacking technical depth or UK linkage.\n    </brand_alignment_rules>\n\n    <examples>\n        **Example Scoring Anchors:**  \n        - *Score 0:* “Hydrogen fuel cells breakthrough” → unrelated to liquid biofuels.  \n        - *Score 1:* “Global decarbonisation trends” → generic sustainability, no biofuel focus.  \n        - *Score 2:* “Neste launches renewable diesel product” → relevant technology but competitor-focused.  \n        - *Score 3:* “UK clean energy overview mentioning biodiesel” → partial relevance.  \n        - *Score 4:* “Teesside fleet adopts B100 biodiesel from waste oil” → strongly aligned.  \n        - *Score 5:* “UK biodiesel produced from used cooking oil powers national fleets” → fully aligned with Syntech mission.\n    </examples>\n\n    <restrictions>\n        * Output must be **only** a valid JSON object with `relevance_score` and `reason`.  \n        * Keep reasoning factual, concise (1–2 sentences).  \n        * Do not output keyword data, markdown, or extra commentary.\n    </restrictions>\n\n    <output_rules>\n        {\"relevance_score\": 4, \"reason\": \"Article focuses on UK waste-derived biodiesel and B100 deployment for decarbonisation, directly aligned with Syntech’s mission.\"}\n        Output nothing else.\n    </output_rules>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {
          "batchSize": 10,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -8720,
        -3856
      ],
      "id": "564ac465-5b19-44e1-86ff-5a81d0166c60",
      "name": "Classification agent with Batch (Tariq)"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -4096,
        -3216
      ],
      "id": "4fa1eb68-4695-486b-8f58-a0a00adb281f",
      "name": "OpenAI Chat Model8",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "setMetrics",
        "expectedAnswer": "={{ $('Run Evaluation').item.json.Expected_Score }}",
        "actualAnswer": "={{ $('Classification agent with Batch1').item.json.output.relevance_score }}",
        "prompt": "=You are an expert evaluator assessing how closely an actual score matches the expected score.\n\nCompare the expected and actual scores numerically, then assign a final similarity rating from 0 to 5 according to the following scale:\n\n# Scoring Criteria\n- 5: Perfect match – actual and expected scores are identical.\n- 4: Very close – difference of 1 point.\n- 3: Somewhat close – difference of 2 points.\n- 2: Noticeably different – difference of 3 points.\n- 1: Highly different – difference of 4 points.\n- 0: Completely misaligned or invalid comparison – difference greater than 4 or one score missing.\n\n# Output Format\nOnly output the final score in strict JSON format as follows:\n{\n  \"score\": <integer from 0 to 5>\n}\n\nDo not include any reasoning, explanation, or additional text.\n",
        "options": {}
      },
      "type": "n8n-nodes-base.evaluation",
      "typeVersion": 4.8,
      "position": [
        -4208,
        -3376
      ],
      "id": "377a886a-413a-4ee9-950c-1dbdf0ddf371",
      "name": "Evaluation1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.content }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n\n    <introduction>\n        You are an expert evaluator of sustainability and renewable fuel content.  \n        Your role is to assess how closely an article aligns with **Syntech Biofuel’s ecosystem, mission, and focus areas**.  \n        Syntech specializes in **advanced liquid biofuels** (B100, HVO, ASB, FAME) made from **waste streams**, emphasizing **UK-based innovation**, **decarbonisation**, and **drop-in diesel substitution**.  \n        Articles most relevant to Syntech discuss **UK waste-to-fuel systems**, **B100/B20/FAME deployment**, **RTFO-linked initiatives**, or **circular-economy biodiesel production**.\n    </introduction>\n\n    <task>\n        Assign a **relevance_score** from 0–5 showing how closely the article aligns with Syntech’s interests.  \n        Base this on:\n        1. **Centrality:** Are advanced biofuels, biodiesel, or waste-to-fuel systems the main topic?  \n        2. **Context:** Does it directly support Syntech’s UK-focused mission (e.g., decarbonising fleets with drop-in fuels)?  \n        3. **Brand Alignment:** Is it UK-based, waste-derived, and non-competitive in focus?  \n\n        Output only:\n        {\"relevance_score\": number, \"reason\": \"short factual explanation\"}\n    </task>\n\n    <keywords>\n        biodiesel, B100, B20, FAME, HVO, ASB, renewable diesel, advanced biofuel, waste-to-fuel, used cooking oil, UCO, tallow, drop-in diesel, drop-in fuel, decarbonisation, RTFO, greenhouse gas reduction, carbon intensity, circular economy, renewable fuel, Syntech Biofuel, biofuel refinery, renewable diesel plant, fleet fuel, waste-derived fuel, UK biofuel, UK renewable fuel, transport decarbonisation\n    </keywords>\n\n    <steps>\n        1. **Read the entire article** to determine its **primary focus**.  \n        2. **Identify keyword mentions** and classify them as:\n            - *Central*: Core topic of the article.  \n            - *Peripheral*: Minor or passing mention.  \n        3. **Prioritize topic centrality** over keyword count. A few central mentions are stronger than many irrelevant ones.  \n        4. **UK relevance check:**  \n            - Articles about UK projects, policy, or operations can reach scores of 4–5.  \n            - Global or general renewables content should cap at 3.  \n        5. **Exclude or penalize** content dominated by hydrogen, EVs, solar, wind, SAF, or biogas **unless explicitly linked** to **liquid biofuels or drop-in diesel**.  \n        6. **Downweight competitor or reseller content** (e.g., Green Fuels, Neste, Argent Energy) — cap at **1–2**.  \n        7. **Paywalled, teaser, or directory listings** cap at **1**.  \n        8. **Use <scoring_criteria> and <examples>** to guide final score assignment.  \n        9. Output only the JSON with `relevance_score` and `reason`.\n    </steps>\n\n    <scoring_criteria>\n        **0 — Unrelated:**  \n        No connection to advanced biofuels, Syntech’s ecosystem, or UK decarbonisation using drop-in fuels.  \n        *Examples:* hydrogen, EVs, solar, generic sustainability, aviation SAF.\n\n        **1 — Marginally Related:**  \n        Mentions sustainability or emissions reduction but lacks any link to biofuels or Syntech’s UK context.  \n        *Example:* general energy transition or decarbonisation article.\n\n        **2 — Slightly Related:**  \n        Brief reference to biofuels, renewable diesel, or B100, but not central; or focuses on competitors.  \n        *Example:* “Green Fuels launches new biodiesel” or global trade summary.\n\n        **3 — Partially Related:**  \n        Includes biofuels or waste-derived energy as part of a broader discussion, with limited UK focus.  \n        *Example:* UK energy overview mentioning biodiesel among other renewables.\n\n        **4 — Strongly Related:**  \n        Focuses on UK biofuel or waste-to-fuel projects, such as B100 or HVO fleet deployment, circular economy models, or RTFO compliance.  \n        *Example:* UK waste oil conversion to biodiesel or local decarbonisation initiative.\n\n        **5 — Highly Relevant:**  \n        Article is primarily about Syntech-aligned subjects: **UK waste-to-fuel production**, **B100/FAME/ASB innovation**, or **drop-in diesel substitution** supporting decarbonisation.  \n        *Example:* “Biodiesel produced in the UK from used cooking oil powers fleet vehicles.”\n    </scoring_criteria>\n\n    <brand_alignment_rules>\n        * **Upweight** UK-based coverage of B100, HVO, ASB, or circular-economy biodiesel.  \n        * **Upweight** articles that quantify decarbonisation or mention RTFO alignment.  \n        * **Downweight or exclude** hydrogen, EV, SAF, or non-liquid renewables unless explicitly linked to liquid fuels.  \n        * **Downweight** competitor or reseller marketing content.  \n        * **Cap** scores for vague, global, or teaser content lacking technical depth or UK linkage.\n    </brand_alignment_rules>\n\n    <examples>\n        **Example Scoring Anchors:**  \n        - *Score 0:* “Hydrogen fuel cells breakthrough” → unrelated to liquid biofuels.  \n        - *Score 1:* “Global decarbonisation trends” → generic sustainability, no biofuel focus.  \n        - *Score 2:* “Neste launches renewable diesel product” → relevant technology but competitor-focused.  \n        - *Score 3:* “UK clean energy overview mentioning biodiesel” → partial relevance.  \n        - *Score 4:* “Teesside fleet adopts B100 biodiesel from waste oil” → strongly aligned.  \n        - *Score 5:* “UK biodiesel produced from used cooking oil powers national fleets” → fully aligned with Syntech mission.\n    </examples>\n\n    <restrictions>\n        * Output must be **only** a valid JSON object with `relevance_score` and `reason`.  \n        * Keep reasoning factual, concise (1–2 sentences).  \n        * Do not output keyword data, markdown, or extra commentary.\n    </restrictions>\n\n    <output_rules>\n        {\"relevance_score\": 4, \"reason\": \"Article focuses on UK waste-derived biodiesel and B100 deployment for decarbonisation, directly aligned with Syntech’s mission.\"}\n        Output nothing else.\n    </output_rules>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {
          "batchSize": 10,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -8192,
        -3888
      ],
      "id": "f9eb3de6-bb02-4201-b1df-c730f6810e73",
      "name": "Classification agent with Batch"
    },
    {
      "parameters": {
        "content": "## Score\n* consistent 4.3",
        "height": 576,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -8288,
        -4032
      ],
      "id": "ee46a6ec-91dd-4825-a2a6-283bbc798210",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"relevance_score\": {\n      \"type\": \"integer\",\n      \"description\": \"Relevance score from 0 to 5 indicating how closely the article aligns with Syntech Biofuel's focus\",\n      \"minimum\": 0,\n      \"maximum\": 5\n    },\n    \"reason\": {\n      \"type\": \"string\",\n      \"description\": \"Short factual explanation of the score (1-2 sentences maximum)\"\n    }\n  },\n  \"required\": [\"score\", \"reason\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -7472,
        -3680
      ],
      "id": "4742868d-ffcd-412f-9184-21e6168e0fba",
      "name": "Structured Output Parser13"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.content }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n\n    <introduction>\n        You are an expert evaluator of sustainability and renewable fuel content.  \n        Your role is to assess how closely an article aligns with **Syntech Biofuel’s ecosystem, mission, and focus areas**.  \n        Syntech specializes in **advanced liquid biofuels** (B100, HVO, ASB, FAME) made from **waste streams**, emphasizing **UK-based innovation**, **decarbonisation**, and **drop-in diesel substitution**.  \n        Articles most relevant to Syntech discuss **UK waste-to-fuel systems**, **B100/B20/FAME deployment**, **RTFO-linked initiatives**, or **circular-economy biodiesel production**.\n    </introduction>\n\n    <task>\n        Assign a **relevance_score** from 0–5 showing how closely the article aligns with Syntech’s interests.  \n        Base this on:\n        1. **Centrality:** Are advanced biofuels, biodiesel, or waste-to-fuel systems the main topic?  \n        2. **Context:** Does it directly support Syntech’s UK-focused mission (e.g., decarbonising fleets with drop-in fuels)?  \n        3. **Brand Alignment:** Is it UK-based, waste-derived, and non-competitive in focus?  \n\n        Output only:\n        {\"relevance_score\": number, \"reason\": \"short factual explanation\"}\n    </task>\n\n    <keywords>\n        biodiesel, B100, B20, FAME, HVO, ASB, renewable diesel, advanced biofuel, waste-to-fuel, used cooking oil, UCO, tallow, drop-in diesel, drop-in fuel, decarbonisation, RTFO, greenhouse gas reduction, carbon intensity, circular economy, renewable fuel, Syntech Biofuel, biofuel refinery, renewable diesel plant, fleet fuel, waste-derived fuel, UK biofuel, UK renewable fuel, transport decarbonisation\n    </keywords>\n\n    <steps>\n        1. **Read the entire article** to determine its **primary focus**.  \n        2. **Identify keyword mentions** and classify them as:\n            - *Central*: Core topic of the article.  \n            - *Peripheral*: Minor or passing mention.  \n        3. **Prioritize topic centrality** over keyword count. A few central mentions are stronger than many irrelevant ones.  \n        4. **UK relevance check:**  \n            - Articles about UK projects, policy, or operations can reach scores of 4–5.  \n            - Global or general renewables content should cap at 3.  \n        5. **Exclude or penalize** content dominated by hydrogen, EVs, solar, wind, SAF, or biogas **unless explicitly linked** to **liquid biofuels or drop-in diesel**.  \n        6. **Downweight competitor or reseller content** (e.g., Green Fuels, Neste, Argent Energy) — cap at **1–2**.  \n        7. **Paywalled, teaser, or directory listings** cap at **1**.  \n        8. **Use <scoring_criteria> and <examples>** to guide final score assignment.  \n        9. Output only the JSON with `relevance_score` and `reason`.\n    </steps>\n\n    <scoring_criteria>\n        **0 — Unrelated:**  \n        No connection to advanced biofuels, Syntech’s ecosystem, or UK decarbonisation using drop-in fuels.  \n        *Examples:* hydrogen, EVs, solar, generic sustainability, aviation SAF.\n\n        **1 — Marginally Related:**  \n        Mentions sustainability or emissions reduction but lacks any link to biofuels or Syntech’s UK context.  \n        *Example:* general energy transition or decarbonisation article.\n\n        **2 — Slightly Related:**  \n        Brief reference to biofuels, renewable diesel, or B100, but not central; or focuses on competitors.  \n        *Example:* “Green Fuels launches new biodiesel” or global trade summary.\n\n        **3 — Partially Related:**  \n        Includes biofuels or waste-derived energy as part of a broader discussion, with limited UK focus.  \n        *Example:* UK energy overview mentioning biodiesel among other renewables.\n\n        **4 — Strongly Related:**  \n        Focuses on UK biofuel or waste-to-fuel projects, such as B100 or HVO fleet deployment, circular economy models, or RTFO compliance.  \n        *Example:* UK waste oil conversion to biodiesel or local decarbonisation initiative.\n\n        **5 — Highly Relevant:**  \n        Article is primarily about Syntech-aligned subjects: **UK waste-to-fuel production**, **B100/FAME/ASB innovation**, or **drop-in diesel substitution** supporting decarbonisation.  \n        *Example:* “Biodiesel produced in the UK from used cooking oil powers fleet vehicles.”\n    </scoring_criteria>\n\n    <brand_alignment_rules>\n        * **Upweight** UK-based coverage of B100, HVO, ASB, or circular-economy biodiesel.  \n        * **Upweight** articles that quantify decarbonisation or mention RTFO alignment.  \n        * **Downweight or exclude** hydrogen, EV, SAF, or non-liquid renewables unless explicitly linked to liquid fuels.  \n        * **Downweight** competitor or reseller marketing content.  \n        * **Cap** scores for vague, global, or teaser content lacking technical depth or UK linkage.\n    </brand_alignment_rules>\n\n    <examples>\n        **Example Scoring Anchors:**  \n        - *Score 0:* “Hydrogen fuel cells breakthrough” → unrelated to liquid biofuels.  \n        - *Score 1:* “Global decarbonisation trends” → generic sustainability, no biofuel focus.  \n        - *Score 2:* “Neste launches renewable diesel product” → relevant technology but competitor-focused.  \n        - *Score 3:* “UK clean energy overview mentioning biodiesel” → partial relevance.  \n        - *Score 4:* “Teesside fleet adopts B100 biodiesel from waste oil” → strongly aligned.  \n        - *Score 5:* “UK biodiesel produced from used cooking oil powers national fleets” → fully aligned with Syntech mission.\n    </examples>\n\n    <restrictions>\n        * Output must be **only** a valid JSON object with `relevance_score` and `reason`.  \n        * Keep reasoning factual, concise (1–2 sentences).  \n        * Do not output keyword data, markdown, or extra commentary.\n    </restrictions>\n\n    <output_rules>\n        json\n        ```\n        {\"relevance_score\": 4, \"reason\": \"Article focuses on UK waste-derived biodiesel and B100 deployment for decarbonisation, directly aligned with Syntech’s mission.\"}\n        ```\n        Output nothing else.\n    </output_rules>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {
          "batchSize": 10,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -7680,
        -3904
      ],
      "id": "50b11c26-a132-47bb-ada4-491722f3a2b4",
      "name": "Classification agent with Batch2",
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "content": "## Score\n* consistent 3.95",
        "height": 576,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -7728,
        -4032
      ],
      "id": "106c81d2-e0d1-41cf-92d6-5fb186ec5135",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-sonnet-4-5-20250929",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {
          "temperature": 0.5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        -8192,
        -3664
      ],
      "id": "36a4e81d-bc9c-46a6-847d-e06343868970",
      "name": "Sonnet 4.5 T0.5",
      "credentials": {
        "anthropicApi": {
          "id": "5bvanokrfgZFZkQx",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {
          "temperature": 0.7
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -8736,
        -3680
      ],
      "id": "a4dd09a0-2351-4486-93c1-204f1e879763",
      "name": "GPT-4.1 T0.7",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {
          "temperature": 0
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -7664,
        -3680
      ],
      "id": "8af491ff-8965-46d5-9898-389ffffa5f68",
      "name": "Gemini 2.5 T0.5",
      "credentials": {
        "googlePalmApi": {
          "id": "ZmbuA0PXohNwTNly",
          "name": "Google Gemini(PaLM) paid"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-haiku-4-5-20251001",
          "mode": "list",
          "cachedResultName": "Claude Haiku 4.5"
        },
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        -5504,
        -3680
      ],
      "id": "c5d075aa-6e0b-4afe-8d7e-37060445fddb",
      "name": "Haiku 4.5 T0.5 3.92",
      "credentials": {
        "anthropicApi": {
          "id": "5bvanokrfgZFZkQx",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-sonnet-4-5-20250929",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {
          "temperature": 0.5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        -5472,
        -3040
      ],
      "id": "6d9f91f5-fc36-462e-bcb3-7379228d8cc2",
      "name": "Sonnet 4.5 T0.",
      "credentials": {
        "anthropicApi": {
          "id": "5bvanokrfgZFZkQx",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('If From Form').item.json.content }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n\n<introduction>\nYou are an expert evaluator of renewable fuel content. Your task is to determine how relevant an article is to **Syntech Biofuel**, a UK company producing **waste-derived, drop-in diesel alternatives** (B100, FAME, HVO, ASB).\n\nSyntech’s mission centers on:\n- UK-generated waste feedstocks (e.g., UCO) only  \n- Circular ecology, precision engineering, and practical decarbonisation  \n- Deployment in major UK infrastructure projects (Lower Thames Crossing, NetZero Teesside, Sizewell C)  \n- Immediate-use, drop-in solutions for high-emitting sectors, especially construction, logistics, and heavy infrastructure\n</introduction>\n\n<output_schema>\nReturn **only** the following JSON object:\n\n{\n  \"relevance_score\": 0–5,\n  \"reason\": \"string\"\n}\n\nThe reason must be factual, concise (1–2 sentences), and must reference the *determinant factor(s)* behind the score.\n</output_schema>\n\n<primary_scoring_logic>\nDetermine the relevance score using this weighted system:\n\n1. **Topical Dominance (0–3 points)**  \n   - 3: Liquid biofuels (B100, FAME, HVO, ASB), waste-to-fuel systems, UCO supply chains, or drop-in diesel replacement are the central topic.  \n   - 2: Biofuels are a major component but not the primary subject.  \n   - 1: Biofuels mentioned peripherally.  \n   - 0: Not about liquid biofuels.\n\n2. **Geographical Relevance (0–2 points)**  \n   - 2: Strong UK focus (projects, policy, operators, infrastructure).  \n   - 1: Mentions the UK but not as a central focus.  \n   - 0: No UK relevance, but the article is EU-focused.  \n   - EU content is neutral — it does not add points and it does not incur a penalty.\n\n3. **Strategic Alignment (0–3 points)**  \n   Additive weighting based on named entities or high-value concepts:\n   - Use the weights in `<entity_weights>` below.\n   - Add the sum of triggered weights (cap at +3 total).\n\n4. **Apply penalty matrix** (see `<penalties>`).  \n   Penalties override additive scoring where specified.\n\nFinal score must be rounded and capped between **0 and 5**.\n</primary_scoring_logic>\n\n<entity_weights>\nUse these entity weights to modify the score (max +3 combined):\n\n{\n  \"FAME\": 1,\n  \"B100\": 1,\n  \"HVO\": 1,\n  \"ASB\": 2,\n  \"UCO\": 2,\n  \"RTFO\": 2,\n  \"RTFC\": 2,\n  \"Balfour Beatty\": 2,\n  \"SSE\": 1,\n  \"Lower Thames Crossing\": 3,\n  \"NetZero Teesside\": 2,\n  \"Sizewell C\": 2,\n  \"Kingsnorth\": 2,\n  \"Grangemouth\": 1,\n  \"Scope 3 emissions\": 1\n}\n</entity_weights>\n\n<penalties>\nApply these penalties after computing weighted relevance:\n\n{\n  \"competitor_content\": -3,      // e.g. Neste, Argent Energy, Green Fuels\n  \"non_UK_EU_centric\": -1,       // applies only if article is neither UK nor EU focused\n  \"non_liquid_renewables\": -5,   // EVs, hydrogen, solar, wind, SAF unless tied to biofuels\n  \"paywall_or_teaser\": \"cap:1\"   // directories, teasers, promos\n}\n</penalties>\n\n<topic_dominance_rules>\nBefore scoring, assess the article’s **dominant topic**:\n\n- If the true central theme is hydrogen, EVs, batteries, SAF, solar, or wind—with no tie to liquid biofuels—score = 0 or 1.  \n- If biofuels appear only in a single sentence inside a broader non-fuel topic, treat it as peripheral (Topical Dominance = 0–1).  \n- If drop-in diesel alternatives or waste-derived fuels drive the narrative, treat as high-dominance (Topical Dominance = 3).\n</topic_dominance_rules>\n\n<contrastive_examples>\n\nPAIR 1 — Biofuel vs. Generic Sustainability\n- **Score 5:** UK fleet switches to B100 made from UCO for Lower Thames Crossing works.  \n- **Score 1:** Global ESG trends with a passing mention of decarbonisation.\n\nPAIR 2 — UK/EU Relevance vs. Global\n- **Score 4:** UK company expands FAME production to meet RTFO targets.  \n- **Score 2:** EU circular fuel directive update with no UK specifics.  \n- **Score 1:** Global biodiesel market overview with no UK or EU specifics.\n\nPAIR 3 — Strong Tech Match vs. Weak Tech Match\n- **Score 5:** RTFC-eligible waste-derived ASB deployed in logistics operations.  \n- **Score 0:** Hydrogen refuelling infrastructure expansion.\n\nPAIR 4 — Competitor Penalty\n- **Score 2:** Neste launches renewable diesel product (competitor; penalty applies).  \n- **Score 4:** Syntech-adjacent UCO-to-FAME UK supply chain reporting.\n\n</contrastive_examples>\n\n<final_instruction>\nAfter applying all rules, weights, and penalties:\n\n1. Calculate raw relevance score  \n2. Apply penalties  \n3. Cap 0–5  \n4. Output only the JSON object\n\nNo extra commentary, no markdown, no lists, no explanation of scoring logic. Only the final JSON.\n</final_instruction>\n\n</prompt>"
            }
          ]
        },
        "batching": {
          "batchSize": 10,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -5472,
        -3280
      ],
      "id": "95d60864-74b6-4aa7-9dfe-bba23466ef84",
      "name": "Classification agent with Batch1",
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.markdown }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -11536,
        -4016
      ],
      "id": "a2fe3026-24bf-4be0-9da4-13ca9926e14a",
      "name": "Create summary and title7"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -11536,
        -3824
      ],
      "id": "9bf3b257-efc2-4369-8648-ade019f38f33",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -11360,
        -3824
      ],
      "id": "e63a25d9-bba5-4364-8183-2f98be63f7f0",
      "name": "Structured Output Parser14"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.markdown }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -11568,
        -3552
      ],
      "id": "b8c7d93c-5cc9-4ed4-b09e-b853cea2667c",
      "name": "Create summary and title8"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -11568,
        -3392
      ],
      "id": "aac69eee-58b1-4a51-b1ac-33f11536d747",
      "name": "OpenAI Chat Model13",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -11392,
        -3392
      ],
      "id": "b10500b2-275a-4baa-989a-887993376d2a",
      "name": "Structured Output Parser15"
    },
    {
      "parameters": {
        "operation": "Run actor and get dataset",
        "actorSource": "store",
        "actorId": {
          "__rl": true,
          "value": "WI0tj4Ieb5Kq458gB",
          "mode": "list",
          "cachedResultName": "LinkedIn Company Posts Scraper (No Cookies) ✅ $2 per 1k (harvestapi/linkedin-company-posts)",
          "cachedResultUrl": "https://console.apify.com/actors/WI0tj4Ieb5Kq458gB/input"
        },
        "customBody": "={\n    \"includeQuotePosts\": false,\n    \"includeReposts\": false,\n    \"maxPosts\": 5,\n    \"postedLimit\": \"month\",\n    \"scrapeComments\": false,\n    \"scrapeReactions\": false,\n    \"targetUrls\": [\n        \"{{ $json.url_or_keyword }}\"\n    ]\n}",
        "timeout": {}
      },
      "type": "@apify/n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -11824,
        -1808
      ],
      "id": "0754f16d-5233-4f23-853b-2d5242a9cbc2",
      "name": "Linkedin company post search scraper",
      "credentials": {
        "apifyApi": {
          "id": "CtQfLZVS6CSwrUIV",
          "name": "Apify account stephen"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e6382e72-d90b-4631-98ac-b4d6cfe0801c",
              "leftValue": "={{ $json.url_or_keyword }}",
              "rightValue": ".",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -12512,
        -4000
      ],
      "id": "feabd609-8871-45cd-90b7-bf5e37de3a4e",
      "name": "Filter4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8043336f-37b2-450d-9cee-0a9304f87969",
              "name": "sidecar",
              "value": "={{ $json.content.parts[0].text }}",
              "type": "string"
            },
            {
              "id": "f2dad15b-20aa-4c6a-9653-b38d64b56cac",
              "name": "shortCode",
              "value": "={{ $('Switch').item.json.shortCode }}",
              "type": "string"
            },
            {
              "id": "c39b39a4-c952-4193-8bb0-e03be3654a22",
              "name": "caption",
              "value": "={{ $('Instagram profile scraper').item.json.caption }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11040,
        -688
      ],
      "id": "7c8d12c5-7b0f-4ada-a0f8-c9d4e81f1160",
      "name": "sidecar fields"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "437df34e-c8a0-4e54-9b86-f332e3390dd3",
              "name": "sidecar_images",
              "value": "={{ $json.appended_sidecar }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -10624,
        -688
      ],
      "id": "d4bc9a30-08b8-465a-ac80-5f72a6df66a0",
      "name": "sidecar images1"
    },
    {
      "parameters": {
        "fieldsToSummarize": {
          "values": [
            {
              "aggregation": "append",
              "field": "sidecar"
            }
          ]
        },
        "fieldsToSplitBy": "shortCode",
        "options": {}
      },
      "type": "n8n-nodes-base.summarize",
      "typeVersion": 1.1,
      "position": [
        -10800,
        -688
      ],
      "id": "9728ed63-ef96-4909-b306-f83d45797d7d",
      "name": "Summarize"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.url_or_keyword }}",
                    "rightValue": "https://",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    },
                    "id": "9bd7a37d-5619-4b82-ac94-75dd3df5d5ca"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Keyword"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "89af75b5-0f31-4712-950f-767d7199e28f",
                    "leftValue": "={{ $json.url_or_keyword }}",
                    "rightValue": "https://www.linkedin.com/in/",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "profile url"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "a6aba742-8519-4530-9004-d805321fcd21",
                    "leftValue": "={{ $json.url_or_keyword }}",
                    "rightValue": "https://www.linkedin.com/company/",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "company url"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -12320,
        -1984
      ],
      "id": "b9325130-84d5-43a8-ba9e-09500d3c3b9c",
      "name": "Switch1"
    },
    {
      "parameters": {
        "operation": "Run actor and get dataset",
        "actorSource": "store",
        "actorId": {
          "__rl": true,
          "value": "buIWk2uOUzTmcLsuB",
          "mode": "list",
          "cachedResultName": "Linkedin Post Search Scraper (No Cookies) (harvestapi/linkedin-post-search)",
          "cachedResultUrl": "https://console.apify.com/actors/buIWk2uOUzTmcLsuB/input"
        },
        "customBody": "={\n    \"maxPosts\": 5,\n    \"scrapeComments\": false,\n    \"scrapeReactions\": false,\n    \"searchQueries\": [\n        \"{{ $('Either Url or Keyword2').item.json.url_or_keyword }}\"\n    ]\n}",
        "timeout": {}
      },
      "type": "@apify/n8n-nodes-apify.apify",
      "typeVersion": 1,
      "position": [
        -11824,
        -2144
      ],
      "id": "b621e86a-1379-4f3f-8caa-d80074a34e67",
      "name": "Linkedin keword scraper",
      "credentials": {
        "apifyApi": {
          "id": "CtQfLZVS6CSwrUIV",
          "name": "Apify account stephen"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "85711e61-d413-47d4-b046-f368cd9ea7e6",
              "name": "url",
              "value": "={{ $json.linkedinUrl }}",
              "type": "string"
            },
            {
              "id": "3ecbaa12-9e7c-4210-adf3-8ae326daa833",
              "name": "content",
              "value": "={{ $json.content }}",
              "type": "string"
            },
            {
              "id": "b3e1beef-2b90-40f4-b275-f09998ec258b",
              "name": "publication_date",
              "value": "={{ $json.postedAt.date }}",
              "type": "string"
            },
            {
              "id": "bcd3d0bb-05f7-4e46-9292-c9f035648ba8",
              "name": "search_query",
              "value": "={{ $('Either Url or Keyword2').item.json.url_or_keyword }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11552,
        -2160
      ],
      "id": "9fbdb211-8159-4e47-ac6c-4690d960b5c2",
      "name": "linkedin fields2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "8cf8cda7-52a7-46bf-9ac4-75e3d84f69ea",
              "leftValue": "={{ $json.linebreak }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -10384,
        -3040
      ],
      "id": "c7440ba5-a95d-4798-a077-a118545ea678",
      "name": "Filter"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "8cf8cda7-52a7-46bf-9ac4-75e3d84f69ea",
              "leftValue": "={{ $json.linebreak }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -10144,
        -2480
      ],
      "id": "02b6eb9f-0322-459f-a501-40045084a9e3",
      "name": "Filter1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e5ddd37f-8727-4df2-9fc5-b19cdb19d71e",
              "leftValue": "={{ $json.linebreak }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -10432,
        176
      ],
      "id": "65c1839f-6f1c-43e6-ba8e-a9fa3c869cfb",
      "name": "Filter2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "81adca30-530f-47b3-8880-ecc76b6ce1d6",
              "leftValue": "=",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -6944,
        -4464
      ],
      "id": "1187e6f0-8ef1-4d9f-a27c-bd4c1edc8d73",
      "name": "Filter3"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ca614e10-a88b-4f70-8ea6-09a7dee7e772",
              "name": "=content",
              "value": "={{ $json.text }}",
              "type": "string"
            },
            {
              "id": "d7e8711b-7f7c-487e-8aae-afa5d6132cec",
              "name": "url",
              "value": "=https://x.com/{{ $json.author.screen_name }}/status/{{ $json.tweet_id }}",
              "type": "string"
            },
            {
              "id": "69a2c6ec-5340-4ef4-8dbb-c9bb1d945bfe",
              "name": "publication_date",
              "value": "={{ $json.created_at }}",
              "type": "string"
            },
            {
              "id": "b3af0d59-d4e0-4dde-8bfc-6716e11d9089",
              "name": "search_query",
              "value": "={{ $('Either Url or Keyword').item.json.url_or_keyword }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11376,
        -1472
      ],
      "id": "f77fb277-2670-4fcd-b754-ccef5710df11",
      "name": "X fields"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -9328,
        -3104
      ],
      "id": "f5987302-c3a4-4934-bcf4-54c662649b24",
      "name": "Merge9"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "53313200-69a8-4749-b320-7ad926795be1",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "=RSS Article Description: \n{{ $if($('RSS Read').isExecuted, $('RSS Read').item.json['content:encodedSnippet'], '') || '' }}\n\n{{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.contentSnippet, '') }}\n------------------\nArticle page:\n{{ \n  $('Scrape a url and get its content2').item.json.data.markdown.removeMarkdown()\n}}\n\n",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.link || decodeURIComponent($('RSS Read').item.json.link.match(/url=([^&]+)/)?.[1]), '') }}",
              "type": "string"
            },
            {
              "id": "b72746e5-4271-48e7-af68-4e1bdfd40452",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "39872c24-4acc-4513-b7fb-7689cd511afb",
              "name": "search_query",
              "value": "={{ $if($('Limit5').isExecuted, $('Limit5').item.json.property_rss_feed, undefined) || $if($('sources').isExecuted, $('sources').item.json.url_or_keyword, undefined) }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.pubDate || $('Scrape a url and get its content2').item.json.data.metadata.publishedTime || $('Scrape a url and get its content2').item.json.data.metadata.publishedTime || $('Scrape a url and get its content2').item.json.data.metadata['article:published_time'], '') }}",
              "type": "string"
            },
            {
              "id": "6bd73285-c360-4b10-8567-8ae66ecba2bd",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "101c6d7f-6e56-4362-9238-0b3e4fd7f14d",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "RSS",
              "type": "string"
            },
            {
              "id": "9aea88f6-a629-4f42-ba37-8608bb631772",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -9840,
        -3328
      ],
      "id": "fa95282e-d67e-4335-b9d3-5fef29dd8026",
      "name": "RSS search fields1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e6382e72-d90b-4631-98ac-b4d6cfe0801c",
              "leftValue": "={{ $json.url_or_keyword }}",
              "rightValue": ".",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -12592,
        -3552
      ],
      "id": "60293fda-b846-4441-a429-57ff6751091b",
      "name": "Filter5"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $('Markdown1').item.json.linebreak }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n-if \"article page\" has only page or header or footer information dont mention it in your output\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -10160,
        -3040
      ],
      "id": "178e430f-0da1-47ca-a7c2-09f3c39b3f5a",
      "name": "Create summary and title9"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -10176,
        -2896
      ],
      "id": "125f4e18-97d8-4712-b5bb-b311fddbb63c",
      "name": "OpenAI Chat Model5",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -10000,
        -2880
      ],
      "id": "c9daabae-9cb9-4f2f-8a97-7efa6538595a",
      "name": "Structured Output Parser6"
    },
    {
      "parameters": {
        "content": "## Score\n* consistent 4.03",
        "height": 576,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -7168,
        -4032
      ],
      "id": "3a335f0f-9470-4dde-ade5-1fc4a88d7268",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"relevance_score\": {\n      \"type\": \"integer\",\n      \"description\": \"Relevance score from 0 to 5 indicating how closely the article aligns with Syntech Biofuel's focus\",\n      \"minimum\": 0,\n      \"maximum\": 5\n    },\n    \"reason\": {\n      \"type\": \"string\",\n      \"description\": \"Short factual explanation of the score (1-2 sentences maximum)\"\n    }\n  },\n  \"required\": [\"score\", \"reason\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -6848,
        -3680
      ],
      "id": "c905632f-aaf0-42bf-a689-bb72c47489a1",
      "name": "Structured Output Parser16"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-sonnet-4-5-20250929",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {
          "temperature": 0.5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        -7056,
        -3664
      ],
      "id": "a1395e43-b0e0-40c8-ad16-7539a106c0c9",
      "name": "Sonnet 4.5 T0.1",
      "credentials": {
        "anthropicApi": {
          "id": "5bvanokrfgZFZkQx",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.content }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n\n    <introduction>\n        You are an expert evaluator of sustainability and renewable fuel content.  \n        Your role is to assess how closely an article aligns with **Syntech Biofuel’s ecosystem, mission, and focus areas**.  \n        Syntech specializes in **advanced liquid biofuels** (B100, HVO, ASB, FAME) made from **waste streams**, emphasizing **UK-based innovation**, **decarbonisation**, and **drop-in diesel substitution**.  \n        Articles most relevant to Syntech discuss **UK waste-to-fuel systems**, **B100/B20/FAME deployment**, **RTFO-linked initiatives**, or **circular-economy biodiesel production**.\n    </introduction>\n\n    <task>\n        Assign a **relevance_score** from 0–5 showing how closely the article aligns with Syntech’s interests.  \n        Base this on:\n        1. **Centrality:** Are advanced biofuels, biodiesel, or waste-to-fuel systems the main topic?  \n        2. **Context:** Does it directly support Syntech’s UK-focused mission (e.g., decarbonising fleets with drop-in fuels)?  \n        3. **Brand Alignment:** Is it UK-based, waste-derived, and non-competitive in focus?  \n\n        Output only:\n        {\"relevance_score\": number, \"reason\": \"short factual explanation\"}\n    </task>\n\n    <keywords>\n      {{ \n$if($('Get All Sources1').isExecuted,\n$('Get All Sources1').all().filter(item => item.json.property_source === 'Keyword')\n.map(\nitem => '\\n' + item.json.name\n),\n$('Get All Sources').all().filter(item => item.json.property_source === 'Keyword')\n.map(\nitem => '\\n' + item.json.name\n)) \n}}\n    </keywords>\n\n    <steps>\n        1. **Read the entire article** to determine its **primary focus**.  \n        2. **Identify keyword mentions** and classify them as:\n            - *Central*: Core topic of the article.  \n            - *Peripheral*: Minor or passing mention.  \n        3. **Prioritize topic centrality** over keyword count. A few central mentions are stronger than many irrelevant ones.  \n        4. **UK relevance check:**  \n            - Articles about UK projects, policy, or operations can reach scores of 4–5.  \n            - Global or general renewables content should cap at 3.  \n        5. **Exclude or penalize** content dominated by hydrogen, EVs, solar, wind, SAF, or biogas **unless explicitly linked** to **liquid biofuels or drop-in diesel**.  \n        6. **Downweight competitor or reseller content** (e.g., Green Fuels, Neste, Argent Energy) — cap at **1–2**.  \n        7. **Paywalled, teaser, or directory listings** cap at **1**.  \n        8. **Use <scoring_criteria> and <examples>** to guide final score assignment.  \n        9. Output only the JSON with `relevance_score` and `reason`.\n    </steps>\n\n    <scoring_criteria>\n        **0 — Unrelated:**  \n        No connection to advanced biofuels, Syntech’s ecosystem, or UK decarbonisation using drop-in fuels.  \n        *Examples:* hydrogen, EVs, solar, generic sustainability, aviation SAF.\n\n        **1 — Marginally Related:**  \n        Mentions sustainability or emissions reduction but lacks any link to biofuels or Syntech’s UK context.  \n        *Example:* general energy transition or decarbonisation article.\n\n        **2 — Slightly Related:**  \n        Brief reference to biofuels, renewable diesel, or B100, but not central; or focuses on competitors.  \n        *Example:* “Green Fuels launches new biodiesel” or global trade summary.\n\n        **3 — Partially Related:**  \n        Includes biofuels or waste-derived energy as part of a broader discussion, with limited UK focus.  \n        *Example:* UK energy overview mentioning biodiesel among other renewables.\n\n        **4 — Strongly Related:**  \n        Focuses on UK biofuel or waste-to-fuel projects, such as B100 or HVO fleet deployment, circular economy models, or RTFO compliance.  \n        *Example:* UK waste oil conversion to biodiesel or local decarbonisation initiative.\n\n        **5 — Highly Relevant:**  \n        Article is primarily about Syntech-aligned subjects: **UK waste-to-fuel production**, **B100/FAME/ASB innovation**, or **drop-in diesel substitution** supporting decarbonisation.  \n        *Example:* “Biodiesel produced in the UK from used cooking oil powers fleet vehicles.”\n    </scoring_criteria>\n\n    <brand_alignment_rules>\n        * **Upweight** UK-based coverage of B100, HVO, ASB, or circular-economy biodiesel.  \n        * **Upweight** articles that quantify decarbonisation or mention RTFO alignment.  \n        * **Downweight or exclude** hydrogen, EV, SAF, or non-liquid renewables unless explicitly linked to liquid fuels.  \n        * **Downweight** competitor or reseller marketing content.  \n        * **Cap** scores for vague, global, or teaser content lacking technical depth or UK linkage.\n    </brand_alignment_rules>\n\n    <examples>\n        **Example Scoring Anchors:**  \n        - *Score 0:* “Hydrogen fuel cells breakthrough” → unrelated to liquid biofuels.  \n        - *Score 1:* “Global decarbonisation trends” → generic sustainability, no biofuel focus.  \n        - *Score 2:* “Neste launches renewable diesel product” → relevant technology but competitor-focused.  \n        - *Score 3:* “UK clean energy overview mentioning biodiesel” → partial relevance.  \n        - *Score 4:* “Teesside fleet adopts B100 biodiesel from waste oil” → strongly aligned.  \n        - *Score 5:* “UK biodiesel produced from used cooking oil powers national fleets” → fully aligned with Syntech mission.\n    </examples>\n\n    <restrictions>\n        * Output must be **only** a valid JSON object with `relevance_score` and `reason`.  \n        * Keep reasoning factual, concise (1–2 sentences).  \n        * Do not output keyword data, markdown, or extra commentary.\n    </restrictions>\n\n    <output_rules>\n        {\"relevance_score\": 4, \"reason\": \"Article focuses on UK waste-derived biodiesel and B100 deployment for decarbonisation, directly aligned with Syntech’s mission.\"}\n        Output nothing else.\n    </output_rules>\n\n</prompt>"
            }
          ]
        },
        "batching": {
          "batchSize": 10,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -7056,
        -3904
      ],
      "id": "ee41d90e-2168-4f4f-954c-e7be92764954",
      "name": "Classification agent with Batch3",
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "content": "## Score - New prompt engineering \n* consistent 4.00",
        "height": 576,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -6608,
        -4032
      ],
      "id": "33bb3f0d-1d67-49d5-916c-5275859951cd",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"relevance_score\": {\n      \"type\": \"integer\",\n      \"description\": \"Relevance score from 0 to 5 indicating how closely the article aligns with Syntech Biofuel's focus\",\n      \"minimum\": 0,\n      \"maximum\": 5\n    },\n    \"reason\": {\n      \"type\": \"string\",\n      \"description\": \"Short factual explanation of the score (1-2 sentences maximum)\"\n    }\n  },\n  \"required\": [\"score\", \"reason\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -6336,
        -3696
      ],
      "id": "a9f5d766-cff2-4978-beb6-1a5b4b00784d",
      "name": "Structured Output Parser17"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-sonnet-4-5-20250929",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {
          "temperature": 0.5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        -6544,
        -3680
      ],
      "id": "b80f2b1b-ab4f-4773-8694-3a2053556ae9",
      "name": "Sonnet 4.5 T0.2",
      "credentials": {
        "anthropicApi": {
          "id": "5bvanokrfgZFZkQx",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.content }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n\n  <introduction>\n    You are an expert evaluator of sustainability content, specializing in advanced liquid biofuels.  \n    Your job is to assess how closely an article aligns with **Syntech Biofuel's mission, market, and messaging priorities**.  \n    Syntech produces **drop-in diesel alternatives (B100, FAME, HVO, ASB)** from **UK waste feedstocks only** (e.g., UCO), with a focus on **circular ecology**, **precision engineering**, and **localised decarbonisation**.  \n    Their fuels are deployed in high-impact UK infrastructure and logistics projects such as **Lower Thames Crossing**, **Sizewell C**, and **NetZero Teesside**.\n  </introduction>\n\n  <task>\n    Assign a `relevance_score` from **0 to 5**, based on:\n    1. **Topical Centrality** – Is the article *mainly* about waste-based liquid biofuels?\n    2. **UK Relevance** – Is it about UK-based companies, projects, or regulation?\n    3. **Syntech Alignment** – Does it support drop-in fuel deployment, waste valorisation, or Syntech’s principles?\n    4. **High-value Triggers** – Does it mention any of these keywords or entities:  \n       **FAME**, **UCO**, **RTFO**, **RTFC**, **B100**, **ASB**, **Balfour Beatty**, **SSE**, **Lower Thames Crossing**, **NetZero Teesside**, **Sizewell C**, **Kingsnorth**, **Grangemouth**, or **Scope 3 emissions**?\n\n    **Output only this JSON format:**\n    ```json\n    {\"relevance_score\": number, \"reason\": \"brief factual explanation\"}\n    ```\n\n  </task>\n\n  <scoring_criteria>\n    - **5 — Highly Relevant**: Article is *primarily* about UK waste-based biodiesel deployment, aligned projects (e.g. Lower Thames Crossing), or decarbonisation through drop-in fuels.  \n    - **4 — Strongly Related**: Central topic is biofuels (e.g., FAME or B100), with UK context or technical relevance, but lacks named projects or deep alignment.\n    - **3 — Moderately Related**: Mentions biofuels or Syntech-adjacent themes as part of a broader topic, with some UK or fuel connection.\n    - **2 — Slightly Related**: Biofuels are a side note or competitor-focused (e.g., Neste, Green Fuels).\n    - **1 — Weakly Relevant**: General sustainability or energy topic, minimal/no connection to Syntech’s fuels.\n    - **0 — Unrelated**: Hydrogen, EVs, aviation SAF, or other tech with no link to liquid biofuels.\n\n  </scoring_criteria>\n\n  <brand_alignment_rules>\n    - **Upweight**: UK-based deployment of waste-derived fuels, RTFO compliance, Scope 3 discussions, or mentions of FAME/B100/ASB.\n    - **Cap score at 3**: For global articles, non-UK initiatives, or mixed-tech discussions.\n    - **Cap at 1**: For paywalled, PR/marketing copy from competitors, or non-actionable teaser pieces.\n    - **Score 0**: For hydrogen, EV, wind, solar, or generic ESG if unconnected to biofuels.\n\n  </brand_alignment_rules>\n\n  <output_rules>\n    - Output must be **only** a valid JSON object with `relevance_score` and `reason`.  \n    - Keep the reason short, factual, and avoid subjectivity or overexplaining.  \n    - No markdown, no commentary, no keyword extraction, no summaries.  \n\n    **Example:**\n    ```json\n    {\"relevance_score\": 5, \"reason\": \"Focuses on UK deployment of B100 made from UCO for fleet decarbonisation in a project involving Balfour Beatty.\"}\n    ```\n\n  </output_rules>\n\n</prompt>"
            }
          ]
        },
        "batching": {
          "batchSize": 10,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -6544,
        -3920
      ],
      "id": "fb1e0e24-aad5-4d1a-ac97-71ada2ee8a8b",
      "name": "Classification agent with Batch4",
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "content": "## Score - Prompt engineering + weighted \n* consistent 4.03",
        "height": 576,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -6064,
        -4032
      ],
      "id": "9407374d-0b36-4dec-a6c6-b30cfdba120c",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -13792,
        -4464
      ],
      "id": "28cccd82-f0a7-4d70-88f7-374c62e5b6f5",
      "name": "Urgently Watched List"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"relevance_score\": {\n      \"type\": \"integer\",\n      \"description\": \"Relevance score from 0 to 5 indicating how closely the article aligns with Syntech Biofuel's focus\",\n      \"minimum\": 0,\n      \"maximum\": 5\n    },\n    \"reason\": {\n      \"type\": \"string\",\n      \"description\": \"Short factual explanation of the score (1-2 sentences maximum)\"\n    }\n  },\n  \"required\": [\"score\", \"reason\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -5760,
        -3696
      ],
      "id": "32d61e2c-4aaf-4f4e-9de4-d165d50d6d84",
      "name": "Structured Output Parser18"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-sonnet-4-5-20250929",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {
          "temperature": 0.5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        -5968,
        -3680
      ],
      "id": "b937b28c-89c1-4d57-accc-177f2c504fbc",
      "name": "Sonnet 4.5 T0.3",
      "credentials": {
        "anthropicApi": {
          "id": "5bvanokrfgZFZkQx",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.content }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n\n<introduction>\nYou are an expert evaluator of renewable fuel content. Your task is to determine how relevant an article is to **Syntech Biofuel**, a UK company producing **waste-derived, drop-in diesel alternatives** (B100, FAME, HVO, ASB).\n\nSyntech’s mission centers on:\n- UK-generated waste feedstocks (e.g., UCO) only  \n- Circular ecology, precision engineering, and practical decarbonisation  \n- Deployment in major UK infrastructure projects (Lower Thames Crossing, NetZero Teesside, Sizewell C)  \n- Immediate-use, drop-in solutions for high-emitting sectors, especially construction, logistics, and heavy infrastructure\n</introduction>\n\n<output_schema>\nReturn **only** the following JSON object:\n\n{\n  \"relevance_score\": 0–5,\n  \"reason\": \"string\"\n}\n\nThe reason must be factual, concise (1–2 sentences), and must reference the *determinant factor(s)* behind the score.\n</output_schema>\n\n<primary_scoring_logic>\nDetermine the relevance score using this weighted system:\n\n1. **Topical Dominance (0–3 points)**  \n   - 3: Liquid biofuels (B100, FAME, HVO, ASB), waste-to-fuel systems, UCO supply chains, or drop-in diesel replacement are the central topic.  \n   - 2: Biofuels are a major component but not the primary subject.  \n   - 1: Biofuels mentioned peripherally.  \n   - 0: Not about liquid biofuels.\n\n2. **UK Relevance (0–2 points)**  \n   - 2: UK projects, UK operators, UK policy (RTFO/RTFC), UK infrastructure.  \n   - 1: Global content but includes some UK reference.  \n   - 0: No UK relevance.\n\n3. **Strategic Alignment (0–3 points)**  \n   Additive weighting based on named entities or high-value concepts:\n   - Use the weights in `<entity_weights>` below.\n   - Add the sum of triggered weights (cap at +3 total).\n\n4. **Apply penalty matrix** (see `<penalties>`).  \n   Penalties override additive scoring where specified.\n\nFinal score must be rounded and capped between **0 and 5**.\n</primary_scoring_logic>\n\n<entity_weights>\nUse these entity weights to modify the score (max +3 combined):\n\n{\n  \"FAME\": 1,\n  \"B100\": 1,\n  \"HVO\": 1,\n  \"ASB\": 2,\n  \"UCO\": 2,\n  \"RTFO\": 2,\n  \"RTFC\": 2,\n  \"Balfour Beatty\": 2,\n  \"SSE\": 1,\n  \"Lower Thames Crossing\": 3,\n  \"NetZero Teesside\": 2,\n  \"Sizewell C\": 2,\n  \"Kingsnorth\": 2,\n  \"Grangemouth\": 1,\n  \"Scope 3 emissions\": 1\n}\n</entity_weights>\n\n<penalties>\nApply these penalties after computing weighted relevance:\n\n{\n  \"competitor_content\": -3,     // e.g. Neste, Argent Energy, Green Fuels\n  \"non_UK_centric\": -1,         // only if no UK link exists\n  \"non_liquid_renewables\": -5,  // EVs, hydrogen, solar, wind, SAF unless tied to biofuels\n  \"paywall_or_teaser\": \"cap:1\"  // directories, teasers, promos\n}\n</penalties>\n\n<topic_dominance_rules>\nBefore scoring, assess the article’s **dominant topic**:\n\n- If the true central theme is hydrogen, EVs, batteries, SAF, solar, or wind—with no tie to liquid biofuels—score = 0 or 1.  \n- If biofuels appear only in a single sentence inside a broader non-fuel topic, treat it as peripheral (Topical Dominance = 0–1).  \n- If drop-in diesel alternatives or waste-derived fuels drive the narrative, treat as high-dominance (Topical Dominance = 3).\n</topic_dominance_rules>\n\n<contrastive_examples>\n\nPAIR 1 — Biofuel vs. Generic Sustainability\n- **Score 5:** UK fleet switches to B100 made from UCO for Lower Thames Crossing works.  \n- **Score 1:** Global ESG trends with a passing mention of decarbonisation.\n\nPAIR 2 — UK Relevance vs. Global\n- **Score 4:** UK company expands FAME production to meet RTFO targets.  \n- **Score 2:** Global biodiesel market overview with no UK specifics.\n\nPAIR 3 — Strong Tech Match vs. Weak Tech Match\n- **Score 5:** RTFC-eligible waste-derived ASB deployed in logistics operations.  \n- **Score 0:** Hydrogen refuelling infrastructure expansion.\n\nPAIR 4 — Competitor Penalty\n- **Score 2:** Neste launches renewable diesel product (competitor; penalty applies).  \n- **Score 4:** Syntech-adjacent UCO-to-FAME UK supply chain reporting.\n\n</contrastive_examples>\n\n<final_instruction>\nAfter applying all rules, weights, and penalties:\n\n1. Calculate raw relevance score  \n2. Apply penalties  \n3. Cap 0–5  \n4. Output only the JSON object\n\nNo extra commentary, no markdown, no lists, no explanation of scoring logic. Only the final JSON.\n</final_instruction>\n\n</prompt>"
            }
          ]
        },
        "batching": {
          "batchSize": 10,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -5968,
        -3920
      ],
      "id": "b638e543-ac9b-43ba-96db-440348099134",
      "name": "Classification agent with Batch5",
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "53313200-69a8-4749-b320-7ad926795be1",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "=RSS Article Description: \n{{ $if($('RSS Read').isExecuted, $('RSS Read').item.json['content:encodedSnippet'], '') || '' }}\n\n{{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.contentSnippet, '') }}\n------------------\nArticle page:\n{{ \n  $('Markdown1').item.json.linebreak.removeMarkdown()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.link || decodeURIComponent($('RSS Read').item.json.link.match(/url=([^&]+)/)?.[1]), '') }}",
              "type": "string"
            },
            {
              "id": "b72746e5-4271-48e7-af68-4e1bdfd40452",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "39872c24-4acc-4513-b7fb-7689cd511afb",
              "name": "search_query",
              "value": "={{ $if($('Limit5').isExecuted, $('Limit5').item.json.property_rss_feed, undefined) || $if($('sources').isExecuted, $('sources').item.json.url_or_keyword, undefined) }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.pubDate || $('Scrape a url and get its content2').item.json.data.metadata.publishedTime || $('Scrape a url and get its content2').item.json.data.metadata.publishedTime || $('Scrape a url and get its content2').item.json.data.metadata['article:published_time'], '') }}",
              "type": "string"
            },
            {
              "id": "6bd73285-c360-4b10-8567-8ae66ecba2bd",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "101c6d7f-6e56-4362-9238-0b3e4fd7f14d",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "RSS",
              "type": "string"
            },
            {
              "id": "9aea88f6-a629-4f42-ba37-8608bb631772",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -9840,
        -3040
      ],
      "id": "9ee786a0-ec3f-48b9-9bd9-365fb8abc5be",
      "name": "RSS search fields"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -15856,
        -1664
      ],
      "id": "b863ddf7-6278-4511-9a6c-c787d2806df9",
      "name": "OpenAI Chat Model14",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"keyword_variant\": {\n      \"type\": \"string\",\n      \"description\": \"SEO keyword variant\"\n    }\n  },\n  \"required\": [\"keyword_variant\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -15696,
        -1680
      ],
      "id": "2028dd91-99a2-4f78-87da-48f8aa7fa2d5",
      "name": "Structured Output Parser19"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.url_or_keyword }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=## Persona\nYou are an expert SEO and Content Strategist with deep specialisation in the renewable energy and industrial sectors. Your expertise lies in understanding user intent and crafting precise, high-value keyword variations that attract a specific B2B audience. You also generate clean, meaningful keyword transformations (e.g., “renewable energy” → “renewable energy storage”).\n\n## Context\nYou have been provided with comprehensive documentation about Syntech Biofuel, a UK-based producer of Advanced Smart Biofuel (ASB).\n\n- **Core Product:** Sustainable biofuel for immediate deployment in standard diesel engines.  \n- **Feedstock:** 100% UK-generated waste.  \n- **Key Differentiator:** Zero palm oil, zero POME, zero soy.  \n- **Target Market:** B2B clients across construction, infrastructure, and logistics.  \n- **Major Projects:** Lower Thames Crossing, NetZero Teesside, Sizewell C.  \n- **Core Values:** Innovation, Circular Ecology, Precision Engineering.  \n- **Market Proposition:** Practical, immediate decarbonisation improving ESG and addressing Scope 3 emissions.\n\n## Task\nGiven a single user-provided base keyword, generate a **highly relevant keyword variation** that is:\n- Meaningful and industry-connected.  \n- A semantic or conceptual shift, not just a longer form of the same keyword.  \n- Tied directly to Syntech Biofuel’s value proposition and market focus.  \n- Concise, natural, and professional.\n\n## Steps\n1. Analyse the user’s base keyword.  \n2. Identify the underlying theme or intent (e.g., “renewable energy” → sustainability, green power).  \n3. Generate a natural, industry-relevant **keyword variation** (e.g., “biofuel” → “renewable biofuel”).  \n4. Output the final keyword variation as a **single JSON object**.\n\n## Output Rules\n- Format MUST be a valid JSON object.  \n- Structure:  \n  `{\"keyword_variant\": \"YOUR_VARIATION_HERE\"}`  \n- No explanation, no extra text, no markdown in the final output.  \n- Tone: industry-specific and professional.\n\n## Restrictions\n- No competitor references.  \n- Must logically connect to Syntech Biofuel’s business, values, and differentiators.\n\n## Example\n**Input:**  \n`renewable energy`  \n\n**Output:**  \n`{\"keyword_variant\": \"renewable energy storage\"}`\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -15856,
        -1856
      ],
      "id": "17c3b750-512b-4e41-af9f-36eb53a2be9f",
      "name": "create longtail keword7 TARIQ"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.url_or_keyword }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=Act as a Google search query generator.\n\nYou will receive a single keyword related to sustainable biofuels (e.g., “B20 FAME”, “used cooking oil”, etc.).\n\nYour task is to generate a **concise, Google-optimized search phrase** that includes the keyword exactly as provided. The goal is to surface the **latest news, regulatory updates, market trends, or scientific/technical advancements**, with a **primary focus on the UK**, and **secondarily on the EU**.\n\n---\n\n**Rules:**\n- Always include the input keyword exactly as provided.\n- Use natural language optimized for Google search (e.g., “latest news on…”).\n- Keep it short (max 10–12 words).\n- Emphasize **recency** and **location** (e.g., \"2025\", \"UK\", \"EU\").\n- You may include words like: `latest`, `2025`, `news`, `update`, `policy`, `UK`, `EU`, `biofuel market`, etc.\n\n---\n\n**Input format:** A single keyword (string)  \n**Output format:** One concise Google search phrase\n\n---\n\n**Examples:**\n- Input: `used cooking oil` → Output: `latest UK news on used cooking oil biofuels 2025`\n- Input: `B20 FAME` → Output: `B20 FAME UK EU biofuel regulation update 2025`\n- Input: `waste-derived biodiesel` → Output: `waste-derived biodiesel market forecast UK 2025`"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -12400,
        -3552
      ],
      "id": "56e3d502-300a-443e-8dc4-a4f029c6b0a8",
      "name": "create longtail keyword5",
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.url_or_keyword }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=Act as a search query generator.\n\nYou will receive a single keyword related to sustainable biofuels (e.g., “B20 FAME”, “used cooking oil”, etc.).\n\nYour task is to generate a **concise and relevant search phrase** that includes the keyword exactly as provided. The search phrase should aim to surface the **latest news, market trends, regulatory updates, or technological advancements** related to that keyword, with a **primary focus on the UK**, and **secondarily on the EU**.\n\nKeep the output **short, clear, and snappy** — like a search engine query. Make sure it sounds natural but is optimized to find **recent insights**.\n\n---\n\n**Rules:**\n- **Always include the input keyword as-is** in the output.\n- Keep the total phrase **under 10 words**.\n- Focus the query on **UK and EU news or insights**.\n- Prioritize recent, relevant developments (e.g., past few months).\n\n---\n\n**Input format:** A single keyword (string)  \n**Output format:** One concise search phrase\n\n---\n\n**Examples:**\n- Input: `used cooking oil` → Output: `UK and EU news on used cooking oil`\n- Input: `B20 FAME` → Output: `Market trends and news for B20 FAME UK`\n- Input: `waste-derived biodiesel` → Output: `UK updates on waste-derived biodiesel`"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -12288,
        -2464
      ],
      "id": "3db4286d-64d4-4dcd-ad81-e08c4c92276d",
      "name": "create longtail keyword6",
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $json.url_or_keyword }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=Act as a Twitter/X search phrase generator.\n\nYou will receive a single keyword related to sustainable biofuels (e.g., “B20 FAME”, “used cooking oil”, etc.).\n\nYour task is to generate a **short, relevant Twitter/X search query** that includes the keyword exactly as provided. The goal is to surface the **latest posts, commentary, or breaking news** about that keyword, with a **primary focus on the UK**, and **secondarily on the EU**.\n\n---\n\n**Rules:**\n- Always include the input keyword exactly as given.\n- Use concise, search-friendly language (no more than 6–8 words).\n- Optionally include **hashtags**, country mentions (`UK`, `EU`), or terms like `regulation`, `news`, `update`, `biofuel`, `policy`, etc.\n- No need for full sentences – this is a search term for X.\n- Do **not** include usernames or links.\n\n---\n\n**Input format:** A single keyword (string)  \n**Output format:** One short search query for Twitter/X\n\n---\n\n**Examples:**\n- Input: `used cooking oil` → Output: `used cooking oil UK biofuel news`\n- Input: `B20 FAME` → Output: `B20 FAME UK regulation`\n- Input: `waste-derived biodiesel` → Output: `#wastebiodiesel UK policy update`"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -12016,
        -1264
      ],
      "id": "3e4bda05-4863-424f-8e4a-a228a10f030f",
      "name": "create longtail keyword"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-3-5-haiku-20241022",
          "mode": "list",
          "cachedResultName": "Claude Haiku 3.5"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        -6384,
        -2912
      ],
      "id": "d82b34a3-6a82-497f-a52a-5c89be663ebf",
      "name": "Anthropic Chat Model",
      "credentials": {
        "anthropicApi": {
          "id": "5bvanokrfgZFZkQx",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('If From Form').item.json.content }}",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n\nYou are a simple pre-screener.  \nYour only job is to decide whether an article should be **kept** for further analysis or **discarded**.\n\n### KEEP criteria (choose “keep” when any of these are true):\n- The article mentions **liquid biofuels**, **biodiesel**, **renewable diesel**, **drop-in diesel**, **FAME**, **HVO**, **ASB**, **UCO**, or **waste-to-fuel**.  \n- The article discusses **decarbonising heavy vehicles**, **construction**, **infrastructure**, or **logistics** in a way that could involve liquid fuels.  \n- The article is unclear, mixed-topic, ambiguous, or partially related in any way.  \n- You are unsure.\n\n### DISCARD criteria (choose “discard” only when the article is clearly NOT about liquid biofuels):\n- The article is mainly about **hydrogen**, **electric vehicles**, **batteries**, **solar**, **wind**, **heat pumps**, **nuclear**, **SAF**, or **general sustainability** with *no* mention of liquid biofuels.  \n- The content is purely corporate ESG, climate reporting, finance, or emissions commentary with *no* fuel mention.  \n- The article is clearly off-topic (e.g., aviation, tech, politics, unrelated business sectors).  \n\n### Important:\n- When in doubt → **KEEP**  \n- If the article has *any possible connection* to biofuels → **KEEP**  \n- Competitors, geography, or nuance DO NOT matter here — the full model will evaluate those later.\n\n### Output format (JSON only):\nReturn ONLY one of the following:\n\n{\"decision\": \"keep\", \"reason\": \"short explanation\"}\n\nor\n\n{\"decision\": \"discard\", \"reason\": \"short explanation\"}\n\nThe reason must be 3–10 words, objective, and directly tied to the criteria above.\n\n</prompt>"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -6288,
        -3088
      ],
      "id": "11e94de2-f634-498d-9d44-3186449136ad",
      "name": "Pre-Screener",
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"decision\": \"keep\", \n  \"reason\": \"short explanation\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -6032,
        -2912
      ],
      "id": "20ab464b-eecb-41e4-ab76-f65a4175b344",
      "name": "Structured Output Parser20"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "824b966d-9483-4bd7-8a81-93306360add6",
              "leftValue": "={{ $('Pre-Screener').item.json.output.decision.toLowerCase() }}",
              "rightValue": "keep",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -5936,
        -3088
      ],
      "id": "d4f0db9e-57bf-4549-8eae-196b5489868b",
      "name": "Remove Unrrelevant Articles"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "HNXCPPC6Hx1KK9QW",
          "mode": "list",
          "cachedResultUrl": "/workflow/HNXCPPC6Hx1KK9QW",
          "cachedResultName": "Filter Articles By Topic"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "article": "={{ $('Remove Duplicates').item.json.toJsonString() }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "article",
              "displayName": "article",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "mode": "each",
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        -3248,
        -2128
      ],
      "id": "1c37e359-6959-4189-9da3-91bc28507e4f",
      "name": "Filter Articles By Topic",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "HNXCPPC6Hx1KK9QW",
          "mode": "list",
          "cachedResultUrl": "/workflow/HNXCPPC6Hx1KK9QW",
          "cachedResultName": "Filter Articles By Topic"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "article": "={{ $('Remove Duplicates').item.json.toJsonString() }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "article",
              "displayName": "article",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "mode": "each",
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        -2752,
        -2336
      ],
      "id": "7b956225-e298-4d3a-86cd-a1b28db8d31d",
      "name": "Filter Articles By Topic1",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8efead37-57d8-4101-9010-c855f2525db6",
              "name": "url_or_keyword",
              "value": "={{ $json.property_rss_feed || $json.url_or_keyword }}",
              "type": "string"
            },
            {
              "id": "7ca00974-25ef-4c7a-ac32-42d318e2efaa",
              "name": "prompt",
              "value": "={{ $json.prompt }}",
              "type": "string"
            },
            {
              "id": "2a3d10ea-9972-4e63-a289-f79cfec66ac6",
              "name": "additional_formats",
              "value": "={{ $json.additional_formats }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -12704,
        -3136
      ],
      "id": "ee2e3667-fba9-4ac3-8e82-aacf04809857",
      "name": "Either Url or Keyword4"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "trigger-content-engine",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -15872,
        -2368
      ],
      "id": "ad3caf87-1cf8-4796-8215-e8e0365c948f",
      "name": "Manually Trigger Content Engine",
      "webhookId": "eda87c01-fe8a-42f6-a116-fa1b7eb6d165"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4a79dc1a-993d-4f55-a508-0b1fd1055780",
              "leftValue": "={{ $json.content }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "b4353be1-5da7-4423-9018-2139e44ad239",
              "leftValue": "={{ $json.url }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "1acba9c2-9c44-4137-9da1-13473b6c47eb",
              "leftValue": "={{ $json.content }}",
              "rightValue": "https://",
              "operator": {
                "type": "string",
                "operation": "notStartsWith"
              }
            },
            {
              "id": "6d8ad5a5-a39d-44f2-8564-bdc8880305f2",
              "leftValue": "={{ $json.url }}",
              "rightValue": "syntechbiofuel",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            },
            {
              "id": "378c0625-3c25-43cc-9739-0e72fdc20ce2",
              "leftValue": "={{ $json.publication_date }}",
              "rightValue": "={{ new Date(Date.now() - 90 * 24 * 60 * 60 * 1000).toISOString() }}",
              "operator": {
                "type": "dateTime",
                "operation": "after"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -10864,
        -1280
      ],
      "id": "6db9edf6-df15-4da0-9eb0-1280221a737e",
      "name": "If Valid Content?"
    },
    {
      "parameters": {
        "operation": "scrape",
        "url": "={{ decodeURIComponent($json.link.match(/url=([^&]+)/)?.[1] || '') || $json.link }}",
        "scrapeOptions": {
          "options": {
            "formats": {
              "format": [
                {}
              ]
            },
            "excludeTags": {
              "items": [
                {
                  "tag": "footer"
                },
                {
                  "tag": "script"
                },
                {
                  "tag": "nav"
                },
                {
                  "tag": "style"
                }
              ]
            },
            "headers": {}
          }
        },
        "requestOptions": {}
      },
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        -13472,
        -4480
      ],
      "id": "0e2a8a87-b999-4143-913c-710c6c0ee3f2",
      "name": "Scrape a url and get its content3",
      "credentials": {
        "firecrawlApi": {
          "id": "BNVJqHXn81DoWSYA",
          "name": "Firecrawl account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6e532ff2-3eee-4984-88ef-3cc30f2e6bdf",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -13248,
        -4480
      ],
      "id": "7d77c6a7-86f5-431f-821d-f43a96122e9c",
      "name": "If Not Error3"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0f1fd4a3-670d-4861-af5b-bc94fa454574",
              "name": "failed_url",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.link, decodeURIComponent($('Urgently Watched List').item.json.link.match(/url=([^&]+)/)?.[1])) }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -13072,
        -4368
      ],
      "id": "604e5b55-1a34-4a2c-b748-3004ccb87ece",
      "name": "failed urls1",
      "executeOnce": false
    },
    {
      "parameters": {
        "url": "={{ decodeURIComponent($json.failed_url.match(/url=([^&]+)/)?.[1] || '') || $json.failed_url }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -12752,
        -4368
      ],
      "id": "45dcf856-4638-4bc1-886b-734c0823920f",
      "name": "extract content3",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "html": "={{ $('extract content3').item.json.data || '' }}",
        "destinationKey": "linebreak",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        -12256,
        -4384
      ],
      "id": "143f8ea3-3476-486d-b4d7-b98e88b0bb32",
      "name": "Markdown2"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const htmlContent = $node[\"extract content3\"].json[\"data\"];\n\n// Function to extract published date from various HTML patterns\nconst extractPublishedDate = (html) => {\n    if (!html) return null;\n    \n    // 1. Open Graph meta tags (most common)\n    let match = html.match(/<meta[^>]*property=[\"']article:published_time[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*property=[\"']article:published_time[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 2. Schema.org meta tags\n    match = html.match(/<meta[^>]*itemprop=[\"']datePublished[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*itemprop=[\"']datePublished[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 3. Standard meta name tags\n    const metaNames = [\n        'publishdate', 'publication-date', 'date', 'pubdate', 'publish_date',\n        'published-date', 'article.published', 'article:published',\n        'datePublished', 'dc.date', 'DC.date', 'dc.date.issued',\n        'sailthru.date', 'article.created', 'last-modified', 'created'\n    ];\n    \n    for (const name of metaNames) {\n        match = html.match(new RegExp(`<meta[^>]*name=[\"']${name}[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n        \n        match = html.match(new RegExp(`<meta[^>]*content=[\"']([^\"']+)[\"'][^>]*name=[\"']${name}[\"'][^>]*>`, 'i'));\n        if (match?.[1]) return match[1];\n    }\n    \n    // 4. JSON-LD structured data\n    const jsonLdMatch = html.match(/<script[^>]*type=[\"']application\\/ld\\+json[\"'][^>]*>([\\s\\S]*?)<\\/script>/gi);\n    if (jsonLdMatch) {\n        for (const jsonBlock of jsonLdMatch) {\n            try {\n                const jsonContent = jsonBlock.replace(/<script[^>]*>|<\\/script>/gi, '').trim();\n                const data = JSON.parse(jsonContent);\n                \n                // Handle both single objects and arrays\n                const items = Array.isArray(data) ? data : [data];\n                \n                for (const item of items) {\n                    if (item.datePublished) return item.datePublished;\n                    if (item.publishedDate) return item.publishedDate;\n                    if (item.dateCreated) return item.dateCreated;\n                    if (item.article?.datePublished) return item.article.datePublished;\n                }\n            } catch (e) {\n                // Continue if JSON parsing fails\n            }\n        }\n    }\n    \n    // 5. Time tags with datetime attribute\n    match = html.match(/<time[^>]*datetime=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // 6. Data attributes\n    match = html.match(/data-published[-_]?(?:time|date)=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    match = html.match(/data-date=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 7. Twitter card meta tags\n    match = html.match(/<meta[^>]*name=[\"']twitter:data1[\"'][^>]*content=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1] && /\\d{4}/.test(match[1])) return match[1];\n    \n    // 8. Specific publisher formats\n    // WordPress\n    match = html.match(/<abbr[^>]*class=[\"'][^\"']*published[\"'][^>]*title=[\"']([^\"']+)[\"'][^>]*>/i);\n    if (match?.[1]) return match[1];\n    \n    // Medium\n    match = html.match(/data-post-published-at=[\"']([^\"']+)[\"']/i);\n    if (match?.[1]) return match[1];\n    \n    // 9. Look for ISO date patterns in the HTML (last resort)\n    // Matches formats like: 2024-01-15, 2024-01-15T10:30:00, etc.\n    const isoDateMatch = html.match(/\\b(20\\d{2}[-\\/](0[1-9]|1[0-2])[-\\/](0[1-9]|[12]\\d|3[01])(?:T[\\d:]+(?:\\.\\d+)?(?:Z|[+-]\\d{2}:\\d{2})?)?)\\b/);\n    if (isoDateMatch?.[1]) return isoDateMatch[1];\n    \n    return null;\n};\n\n// Extract the published date\nconst publishedDate = extractPublishedDate(htmlContent);\n\n// Return the result\nreturn {\n    publishedDate: publishedDate\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -12480,
        -4384
      ],
      "id": "f2b716d7-9b5c-4654-bcbf-56321b0c22f1",
      "name": "extract date4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $('Scrape a url and get its content3').item.json.data.markdown }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n-if \"article page\" has only page or header or footer information dont mention it in your output\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -11840,
        -4672
      ],
      "id": "788a1f0d-8fb3-47f0-9db8-fe0f972531a1",
      "name": "Create summary and title10"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -11808,
        -4528
      ],
      "id": "104e0b2a-c584-4dfd-8150-80d4354c430b",
      "name": "OpenAI Chat Model15",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -11648,
        -4528
      ],
      "id": "434c5ee5-2b5d-4f1b-bacb-c36dcfbe3d49",
      "name": "Structured Output Parser21"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "8cf8cda7-52a7-46bf-9ac4-75e3d84f69ea",
              "leftValue": "={{ $json.linebreak }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -12032,
        -4384
      ],
      "id": "d15628f6-f494-4c2d-b0ba-4ab5dde59567",
      "name": "Filter6"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -10976,
        -4448
      ],
      "id": "c0e6a75c-3a07-4258-b941-1c975bd412cc",
      "name": "Merge11"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "53313200-69a8-4749-b320-7ad926795be1",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "=RSS Article Description: \n{{ $if($('RSS Read').isExecuted, $('RSS Read').item.json['content:encodedSnippet'], $('Urgently Watched List').item.json['content:encodedSnippet']) || '' }}\n\n{{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.contentSnippet, $('Urgently Watched List').item.json.contentSnippet) }}\n------------------\nArticle page:\n{{ \n  $('Scrape a url and get its content3').item.json.data.markdown.removeMarkdown()\n}}\n\n",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.link || decodeURIComponent($('RSS Read').item.json.link.match(/url=([^&]+)/)?.[1]), decodeURIComponent($('Urgently Watched List').item.json.link.match(/url=([^&]+)/)?.[1])) }}",
              "type": "string"
            },
            {
              "id": "b72746e5-4271-48e7-af68-4e1bdfd40452",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "39872c24-4acc-4513-b7fb-7689cd511afb",
              "name": "search_query",
              "value": "={{ $if($('Limit5').isExecuted, $('Limit5').item.json.property_rss_feed, undefined) || $if($('sources').isExecuted, $('sources').item.json.url_or_keyword, undefined) || 'Urgent Watchlist' }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.pubDate || $('Scrape a url and get its content3').item.json.data.metadata.publishedTime || $('Scrape a url and get its content3').item.json.data.metadata.publishedTime || $('Scrape a url and get its content3').item.json.data.metadata['article:published_time'], $('Urgently Watched List').item.json.pubDate) }}",
              "type": "string"
            },
            {
              "id": "6bd73285-c360-4b10-8567-8ae66ecba2bd",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "101c6d7f-6e56-4362-9238-0b3e4fd7f14d",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "RSS",
              "type": "string"
            },
            {
              "id": "9aea88f6-a629-4f42-ba37-8608bb631772",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11488,
        -4672
      ],
      "id": "b4bb235b-84e7-4632-8d9b-0ffac5f8214e",
      "name": "RSS search fields2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<content>\n{{ $('Markdown2').item.json.linebreak }}\n</content>",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=<prompt>\n    <task>\n        Your primary tasks are to analyze provided content and then generate a JSON object containing two key-value pairs:\n        1.  **title:** A compelling, benefit-driven title.\n        2.  **summary:** A concise and powerful summary of the key information.\n    </task>\n    \n    <steps>\n        1.  Thoroughly review all the key information provided.\n        2.  Identify the most critical benefits for the target audience (businesses with vehicle fleets, construction machinery, etc.).\n        3.  Distill this information into a clear, engaging summary, adhering strictly to the word count limit.\n        4.  Craft a short, impactful title that grabs attention and highlights the primary value proposition.\n        5.  Format the final output as a single JSON object.\n    </steps>\n\n    <restrictions>\n        - **Summary Word Count:** DO NOT exceed 50 words for the summary.\n        - **Tone:** AVOID jargon where possible. Focus on clear business benefits.\n        - **Clarity:** Ensure the 'drop-in' nature (no engine modification) is communicated as a key advantage of simplicity.\n        - **JSON Formatting:** The final output must be a single, valid JSON object enclosed in a markdown code block. Do not include any text before or after the JSON object.\n-if \"article page\" has only page or header or footer information dont mention it in your output\n    </restrictions>\n\n    <output_rules>\n        - **Format:** A raw JSON object.\n        - **Keys:** The JSON object must contain exactly two keys: `title` and `summary`.\n        - **Values:** The values for both keys must be strings.\n        - **Tone:** The content of the strings must be professional, confident, and inspiring.\n    </output_rules>\n\n    <examples>\n        ### Example 1\n        **Input Content:** A press release detailing the launch of Syntech ASB and its ISCC certification.\n        **Output:**\n        ```json\n        {\n          \"title\": \"Immediately Cut Carbon Emissions by 90% with UK-Made Biofuel\",\n          \"summary\": \"Syntech ASB is a UK-made, ISCC-certified biofuel from 100% used cooking oil. As a simple drop-in fuel for any diesel engine, it helps businesses instantly reduce carbon emissions by up to 90% and meet Net Zero targets without new investment.\"\n        }\n        ```\n    </examples>\n\n</prompt>\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -11808,
        -4384
      ],
      "id": "db3f8bc0-19f0-4da4-b13a-6dc6f0803d95",
      "name": "Create summary and title11"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -11824,
        -4240
      ],
      "id": "cbc7de16-f4ec-4162-9e31-713dd4ecc713",
      "name": "OpenAI Chat Model16",
      "credentials": {
        "openAiApi": {
          "id": "S2kEpGa9PHsoI7on",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A compelling, benefit-driven title\"\n    },\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\": \"A concise summary (max 50 words)\"\n    }\n  },\n  \"required\": [\"title\", \"summary\"]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -11648,
        -4224
      ],
      "id": "2591763b-be36-48ba-8672-3edba47261c1",
      "name": "Structured Output Parser22"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "53313200-69a8-4749-b320-7ad926795be1",
              "name": "title",
              "value": "={{ $json.output.title }}",
              "type": "string"
            },
            {
              "id": "ab5c9158-a33a-4f8f-b6d0-a6787df0f0d5",
              "name": "content",
              "value": "=RSS Article Description: \n{{ $if($('RSS Read').isExecuted, $('RSS Read').item.json['content:encodedSnippet'], $('Urgently Watched List').item.json['content:encodedSnippet']) || '' }}\n\n{{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.contentSnippet, $('Urgently Watched List').item.json.contentSnippet) }}\n------------------\nArticle page:\n{{ \n  $('Markdown2').item.json.linebreak.removeMarkdown()\n}}",
              "type": "string"
            },
            {
              "id": "f0c15fc7-071d-406d-8200-abecbf458836",
              "name": "url",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.link || decodeURIComponent($('RSS Read').item.json.link.match(/url=([^&]+)/)?.[1]), decodeURIComponent($('Urgently Watched List').item.json.link.match(/url=([^&]+)/)?.[1])) }}",
              "type": "string"
            },
            {
              "id": "b72746e5-4271-48e7-af68-4e1bdfd40452",
              "name": "summary",
              "value": "={{ $json.output.summary }}",
              "type": "string"
            },
            {
              "id": "39872c24-4acc-4513-b7fb-7689cd511afb",
              "name": "search_query",
              "value": "={{ $if($('Limit5').isExecuted, $('Limit5').item.json.property_rss_feed, undefined) || $if($('sources').isExecuted, $('sources').item.json.url_or_keyword, undefined) || 'Urgent Watchlist' }}",
              "type": "string"
            },
            {
              "id": "42852696-c7af-4ce4-a273-e61970ef2e8f",
              "name": "publication_date",
              "value": "={{ $if($('RSS Read').isExecuted, $('RSS Read').item.json.pubDate || $('Scrape a url and get its content3').item.json.data.metadata.publishedTime || $('Scrape a url and get its content3').item.json.data.metadata.publishedTime || $('Scrape a url and get its content3').item.json.data.metadata['article:published_time'], $('Urgently Watched List').item.json.pubDate) }}",
              "type": "string"
            },
            {
              "id": "6bd73285-c360-4b10-8567-8ae66ecba2bd",
              "name": "prompt",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.prompt, \"\") }}",
              "type": "string"
            },
            {
              "id": "101c6d7f-6e56-4362-9238-0b3e4fd7f14d",
              "name": "additional_formats",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.additional_formats, \"\") }}",
              "type": "string"
            },
            {
              "id": "a0b9d46b-67d2-4152-b1fa-2306fa5751e4",
              "name": "source",
              "value": "RSS",
              "type": "string"
            },
            {
              "id": "9aea88f6-a629-4f42-ba37-8608bb631772",
              "name": "mode",
              "value": "={{ $if($('sources').isExecuted, $('sources').item.json.process_mode, \"\") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -11488,
        -4384
      ],
      "id": "831853dd-8eac-41a9-a736-49abde6dc949",
      "name": "RSS search fields3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.notion.com/v1/pages",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "notionApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Notion-Version",
              "value": "2025-09-03"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"parent\": {\n    \"type\": \"database_id\",\n    \"database_id\": \"27c785c0-cfab-8137-800f-dcf3e01a3e97\"\n  },\n  \"properties\": {\n    \"Article Name\": {\n      \"title\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Remove Duplicates').item.json.title }}\"\n          }\n        }\n      ]\n    },\n    \"Publication Date\": {\n      \"date\": {\n        \"start\": \"{{ $('Merge').item.json.publication_date.toDateTime().toISO() }}\"\n      }\n    },\n    \"Source URL\": {\n      \"url\": \"{{ $('Remove Duplicates').item.json.url }}\"\n    },\n    \"Source\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Merge').item.json.source }}\"\n        }\n      ]\n    },\n    \"Status\": {\n      \"select\": {\n        \"name\": \"Not Reviewed\"\n      }\n    },\n    \"Search Query\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": {{ $('Merge').item.json.search_query.toJsonString() }}\n          }\n        }\n      ]\n    },\n    \"Summary\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": {{ $('Merge').item.json.summary.toJsonString() }}\n          }\n        }\n      ]\n    },\n    \"Own Analysis\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $if($('Merge').isExecuted, $('Merge').item.json.prompt || '' , '') }}\"\n          }\n        }\n      ]\n    },\n    \"Fact Fingerprint\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic1').item.json.fact_extraction.toJsonString().replace(/\"/g, '\\\\\"') }}\"\n          }\n        }\n      ]\n    },\n    \"Topic Action\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Filter Articles By Topic1').item.json.topical_signature.topic_action }}\"\n        }\n      ]\n    },\n    \"Topic Entities\": {\n      \"multi_select\": [\n        {{ $('Filter Articles By Topic1').item.json.topical_signature.topic_entities.map(item =>\n      `{\n          \"name\": \"${item}\"\n        }`) }}\n      ]\n    },\n    \"Topic Geo\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Filter Articles By Topic1').item.json.topical_signature.topic_geo }}\"\n        }\n      ]\n    },\n    \"Topic Signature\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic1').item.json.topical_signature.topic_signature }}\"\n          }\n        }\n      ]\n    },\n    \"Topic Subject\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic1').item.json.topical_signature.topic_subject }}\"\n          }\n        }\n      ]\n    },\n    \"Update Status\": {\n      \"select\": {\n        \"name\": \"{{ $('Filter Articles By Topic1').item.json.classification }}\"\n      }\n    }\n  },\n  \"children\": [\n    {\n      \"object\": \"block\",\n      \"type\": \"paragraph\",\n      \"paragraph\": {\n        \"rich_text\": [\n          {\n            \"text\": {\n              \"content\": {{ $json.textSubString.toJsonString() }}\n            }\n          }\n        ]\n      }\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -1792,
        -2544
      ],
      "id": "76f6c1d9-8811-4ef5-9573-38842062bb1e",
      "name": "Add Content With Date",
      "credentials": {
        "notionApi": {
          "id": "WaawMco9CQO56cmm",
          "name": "Stephen New Notion"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.notion.com/v1/pages",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "notionApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Notion-Version",
              "value": "2025-09-03"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"parent\": {\n    \"type\": \"database_id\",\n    \"database_id\": \"27c785c0-cfab-8137-800f-dcf3e01a3e97\"\n  },\n  \"properties\": {\n    \"Article Name\": {\n      \"title\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Remove Duplicates').item.json.title }}\"\n          }\n        }\n      ]\n    },\n    \"Source URL\": {\n      \"url\": \"{{ $('Remove Duplicates').item.json.url }}\"\n    },\n    \"Source\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Merge').item.json.source }}\"\n        }\n      ]\n    },\n    \"Status\": {\n      \"select\": {\n        \"name\": \"Not Reviewed\"\n      }\n    },\n    \"Search Query\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": {{ $('Merge').item.json.search_query.toJsonString() }}\n          }\n        }\n      ]\n    },\n    \"Summary\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": {{ $('Merge').item.json.summary.toJsonString() }}\n          }\n        }\n      ]\n    },\n    \"Own Analysis\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $if($('Merge').isExecuted, $('Merge').item.json.prompt || '' , '') }}\"\n          }\n        }\n      ]\n    },\n    \"Fact Fingerprint\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic1').item.json.fact_extraction.toJsonString().replace(/\"/g, '\\\\\"') }}\"\n          }\n        }\n      ]\n    },\n    \"Topic Action\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Filter Articles By Topic1').item.json.topical_signature.topic_action }}\"\n        }\n      ]\n    },\n    \"Topic Entities\": {\n      \"multi_select\": [\n        {{ $('Filter Articles By Topic1').item.json.topical_signature.topic_entities.map(item =>\n      `{\n          \"name\": \"${item}\"\n        }`) }}\n      ]\n    },\n    \"Topic Geo\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Filter Articles By Topic1').item.json.topical_signature.topic_geo }}\"\n        }\n      ]\n    },\n    \"Topic Signature\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic1').item.json.topical_signature.topic_signature }}\"\n          }\n        }\n      ]\n    },\n    \"Topic Subject\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic1').item.json.topical_signature.topic_subject }}\"\n          }\n        }\n      ]\n    },\n    \"Update Status\": {\n      \"select\": {\n        \"name\": \"{{ $('Filter Articles By Topic1').item.json.classification }}\"\n      }\n    }\n  },\n  \"children\": [\n    {\n      \"object\": \"block\",\n      \"type\": \"paragraph\",\n      \"paragraph\": {\n        \"rich_text\": [\n          {\n            \"text\": {\n              \"content\": {{ $json.textSubString.toJsonString() }}\n            }\n          }\n        ]\n      }\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -1792,
        -2368
      ],
      "id": "459ec048-dac8-483a-ae48-0f240dec0acc",
      "name": "Add Content Without Date",
      "credentials": {
        "notionApi": {
          "id": "WaawMco9CQO56cmm",
          "name": "Stephen New Notion"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.notion.com/v1/pages",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "notionApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Notion-Version",
              "value": "2025-09-03"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"parent\": {\n    \"type\": \"database_id\",\n    \"database_id\": \"27c785c0-cfab-8137-800f-dcf3e01a3e97\"\n  },\n  \"properties\": {\n    \"Article Name\": {\n      \"title\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Remove Duplicates').item.json.title }}\"\n          }\n        }\n      ]\n    },\n    \"Publication Date\": {\n      \"date\": {\n        \"start\": \"{{ $('Merge').item.json.publication_date.toDateTime().toISO() }}\"\n      }\n    },\n    \"Source URL\": {\n      \"url\": \"{{ $('Remove Duplicates').item.json.url }}\"\n    },\n    \"Source\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Merge').item.json.source }}\"\n        }\n      ]\n    },\n    \"Status\": {\n      \"select\": {\n        \"name\": \"Not Reviewed\"\n      }\n    },\n    \"Search Query\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": {{ $('Merge').item.json.search_query.toJsonString() }}\n          }\n        }\n      ]\n    },\n    \"Summary\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": {{ $('Merge').item.json.summary.toJsonString() }}\n          }\n        }\n      ]\n    },\n    \"Own Analysis\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $if($('Merge').isExecuted, $('Merge').item.json.prompt || '' , '') }}\"\n          }\n        }\n      ]\n    },\n    \"Fact Fingerprint\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic').item.json.fact_extraction.toJsonString().replace(/\"/g, '\\\\\"') }}\"\n          }\n        }\n      ]\n    },\n    \"Topic Action\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Filter Articles By Topic').item.json.topical_signature.topic_action }}\"\n        }\n      ]\n    },\n    \"Topic Entities\": {\n      \"multi_select\": [\n        {{ $('Filter Articles By Topic').item.json.topical_signature.topic_entities.map(item =>\n      `{\n          \"name\": \"${item}\"\n        }`) }}\n      ]\n    },\n    \"Topic Geo\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Filter Articles By Topic').item.json.topical_signature.topic_geo }}\"\n        }\n      ]\n    },\n    \"Topic Signature\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic').item.json.topical_signature.topic_signature }}\"\n          }\n        }\n      ]\n    },\n    \"Topic Subject\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic').item.json.topical_signature.topic_subject }}\"\n          }\n        }\n      ]\n    },\n    \"Update Status\": {\n      \"select\": {\n        \"name\": \"{{ $('Filter Articles By Topic').item.json.classification }}\"\n      }\n    }\n  },\n  \"children\": [\n    {\n      \"object\": \"block\",\n      \"type\": \"paragraph\",\n      \"paragraph\": {\n        \"rich_text\": [\n          {\n            \"text\": {\n              \"content\": {{ $('Remove Duplicates').item.json.content.toJsonString() }}\n            }\n          }\n        ]\n      }\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -2672,
        -1888
      ],
      "id": "2ebaebb8-c7bc-42c2-be5c-b711cdb71950",
      "name": "Add Content With Date1",
      "credentials": {
        "notionApi": {
          "id": "WaawMco9CQO56cmm",
          "name": "Stephen New Notion"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.notion.com/v1/pages",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "notionApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Notion-Version",
              "value": "2025-09-03"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"parent\": {\n    \"type\": \"database_id\",\n    \"database_id\": \"27c785c0-cfab-8137-800f-dcf3e01a3e97\"\n  },\n  \"properties\": {\n    \"Article Name\": {\n      \"title\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Remove Duplicates').item.json.title }}\"\n          }\n        }\n      ]\n    },\n    \"Source URL\": {\n      \"url\": \"{{ $('Remove Duplicates').item.json.url }}\"\n    },\n    \"Source\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Merge').item.json.source }}\"\n        }\n      ]\n    },\n    \"Status\": {\n      \"select\": {\n        \"name\": \"Not Reviewed\"\n      }\n    },\n    \"Search Query\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": {{ $('Merge').item.json.search_query.toJsonString() }}\n          }\n        }\n      ]\n    },\n    \"Summary\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": {{ $('Merge').item.json.summary.toJsonString() }}\n          }\n        }\n      ]\n    },\n    \"Own Analysis\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $if($('Merge').isExecuted, $('Merge').item.json.prompt || '' , '') }}\"\n          }\n        }\n      ]\n    },\n    \"Fact Fingerprint\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic').item.json.fact_extraction.toJsonString().replace(/\"/g, '\\\\\"') }}\"\n          }\n        }\n      ]\n    },\n    \"Topic Action\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Filter Articles By Topic').item.json.topical_signature.topic_action }}\"\n        }\n      ]\n    },\n    \"Topic Entities\": {\n      \"multi_select\": [\n        {{ $('Filter Articles By Topic').item.json.topical_signature.topic_entities.map(item =>\n      `{\n          \"name\": \"${item}\"\n        }`) }}\n      ]\n    },\n    \"Topic Geo\": {\n      \"multi_select\": [\n        {\n          \"name\": \"{{ $('Filter Articles By Topic').item.json.topical_signature.topic_geo }}\"\n        }\n      ]\n    },\n    \"Topic Signature\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic').item.json.topical_signature.topic_signature }}\"\n          }\n        }\n      ]\n    },\n    \"Topic Subject\": {\n      \"rich_text\": [\n        {\n          \"text\": {\n            \"content\": \"{{ $('Filter Articles By Topic').item.json.topical_signature.topic_subject }}\"\n          }\n        }\n      ]\n    },\n    \"Update Status\": {\n      \"select\": {\n        \"name\": \"{{ $('Filter Articles By Topic').item.json.classification }}\"\n      }\n    }\n  },\n  \"children\": [\n    {\n      \"object\": \"block\",\n      \"type\": \"paragraph\",\n      \"paragraph\": {\n        \"rich_text\": [\n          {\n            \"text\": {\n              \"content\": {{ $('Remove Duplicates').item.json.content.toJsonString() }}\n            }\n          }\n        ]\n      }\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -2672,
        -1712
      ],
      "id": "297c12a4-ba5a-4904-a069-63b886b974bd",
      "name": "Add Content Without Date1",
      "credentials": {
        "notionApi": {
          "id": "WaawMco9CQO56cmm",
          "name": "Stephen New Notion"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-3-7-sonnet-20250219",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 3.7"
        },
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        -6208,
        -2912
      ],
      "id": "41bf4907-5730-4570-ae3d-189b3e1fa2df",
      "name": "Anthropic Chat Model1",
      "credentials": {
        "anthropicApi": {
          "id": "5bvanokrfgZFZkQx",
          "name": "Anthropic account"
        }
      }
    }
  ],
  "pinData": null,
  "repo_name": "syntech-backup-railway",
  "repo_owner": "Granite-Marketing",
  "repo_path": "https://github.com/Granite-Marketing/syntech-n8n-backup/",
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false,
    "timeSavedPerExecution": 120,
    "errorWorkflow": "Qsg1jSZ5AQScoAOn"
  },
  "shared": [
    {
      "updatedAt": "2025-12-11T11:25:52.825Z",
      "createdAt": "2025-12-11T11:25:52.825Z",
      "role": "workflow:owner",
      "workflowId": "XvR2qiHcGd7RnFWv",
      "projectId": "U9sMeJya1DaokkjK"
    }
  ],
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": [
        282
      ]
    },
    "node:Schedule Trigger1": {
      "recurrenceRules": []
    },
    "node:RSS Feed Trigger": {
      "lastItemDate": "2025-11-18T16:31:39.000Z"
    }
  },
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2026-01-28T08:03:01.397Z",
  "versionId": "30c8ae93-5e0c-4485-8115-09d8bdabcc1b"
}